(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[496],{2914:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{_:()=>pn});var U=Y(8205),e=Y(3184),K=Y(4972),xe=Y(4505);class Oe{constructor(){this.changed=new e.vpe,this.treeChanged=new e.vpe,this.deleted=new e.vpe}get effect(){return this.effectNode.effect}get context(){return this.effectNode.context}}Oe.\u0275fac=function(u){return new(u||Oe)},Oe.\u0275cmp=e.Xpm({type:Oe,selectors:[["ng-component"]],inputs:{effectNode:"effectNode",spell:"spell"},outputs:{changed:"changed",treeChanged:"treeChanged",deleted:"deleted"},decls:0,vars:0,template:function(u,l){},encapsulation:2});class ce{get href(){return`https://avrae.readthedocs.io/en/latest/automation_ref.html#${this.anchor}`}}ce.\u0275fac=function(u){return new(u||ce)},ce.\u0275cmp=e.Xpm({type:ce,selectors:[["avr-autodoc-link"]],inputs:{anchor:"anchor"},decls:2,vars:1,consts:[["target","_blank",1,"doc-link",3,"href"]],template:function(u,l){1&u&&(e.TgZ(0,"a",0),e._uU(1,"View the documentation on ReadTheDocs."),e.qZA()),2&u&&e.Q6J("href",l.href,e.LSH)},styles:[".doc-link[_ngcontent-%COMP%]{display:block;margin-top:8px}\n/*# sourceMappingURL=autodoc-link.component.ts-angular-inline--1.css.map*/"]});var ee=Y(5434),Ce=Y(6362),Le=Y(1534),we=Y(89),k=Y(587),J=Y(4770),re=Y(4683),ie=Y(5590),he=Y(1434),Me=Y(1130);function lt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-checkbox",11),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().custom=b})("change",function(){e.CHM(l);const b=e.oxw();return b.changed.emit(),b.onCustomChange()}),e._uU(1," Has custom attack bonus "),e.qZA()}if(2&C){const l=e.oxw();e.Q6J("ngModel",l.custom)}}function $t(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",12)(1,"input",13),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.attackBonus=b}),e.qZA(),e.TgZ(2,"mat-icon",14),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.effect.attackBonus)}}function Rt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",12)(1,"input",15),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().customadvantage=b})("change",function(){e.CHM(l);const b=e.oxw();return b.onCustomAdvantageChange(),b.changed.emit()}),e.qZA(),e.TgZ(2,"mat-icon",14),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.customadvantage)("matTooltipClass","adv-tooltip")}}class ct extends Oe{constructor(){super(),this.custom=!1,this.advantage="0",this.customadvantage=""}ngOnInit(){(this.effect.attackBonus||null==this.spell)&&(this.custom=!0),this.effect.adv&&!["-1","0","1","2"].includes(this.effect.adv)?(this.advantage="custom",this.customadvantage=this.effect.adv):this.advantage=this.effect.adv||"0"}onCustomChange(){this.custom||(this.effect.attackBonus=void 0)}onAdvantageSelectChange(u){"custom"===u.value?this.effect.adv=this.customadvantage:this.effect.adv=u.value,this.changed.emit()}onCustomAdvantageChange(){this.effect.adv=this.customadvantage}}ct.\u0275fac=function(u){return new(u||ct)},ct.\u0275cmp=e.Xpm({type:ct,selectors:[["avr-attack-effect"]],features:[e.qOj],decls:24,vars:4,consts:[["anchor","attack"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["matTooltip","If not checked, uses the caster's default spell attack bonus.",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxFlex","grow",4,"ngIf"],["matTooltip","The default advantage for this attack roll."],[3,"value","valueChange","selectionChange"],["value","0"],["value","1"],["value","2"],["value","-1"],["value","custom"],["matTooltip","If not checked, uses the caster's default spell attack bonus.",3,"ngModel","ngModelChange","change"],["fxFlex","grow"],["matInput","","placeholder","Attack Bonus",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],["matInput","","placeholder","Custom Advantage","matTooltip","0 for Flat\n1 for Advantage\n2 for Elven Accuracy\n-1 for Disadvantage",1,"text-monospace",3,"ngModel","matTooltipClass","ngModelChange","change"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," An Attack effect makes an attack roll against a targeted creature. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,lt,2,1,"mat-checkbox",2),e.YNc(5,$t,4,1,"mat-form-field",3),e.qZA(),e.TgZ(6,"div",1)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Advantage"),e.qZA(),e.TgZ(10,"mat-select",5),e.NdJ("valueChange",function(b){return l.advantage=b})("selectionChange",function(b){return l.onAdvantageSelectChange(b)}),e.TgZ(11,"mat-option",6),e._uU(12,"Flat"),e.qZA(),e.TgZ(13,"mat-option",7),e._uU(14,"Advantage"),e.qZA(),e.TgZ(15,"mat-option",8),e._uU(16,"Elven Accuracy"),e.qZA(),e.TgZ(17,"mat-option",9),e._uU(18,"Disadvantage"),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20,"Custom"),e.qZA()()(),e.YNc(21,Rt,4,2,"mat-form-field",3),e.qZA(),e.TgZ(22,"p"),e._uU(23," Use the Effect Tree to edit the on-hit and on-miss effects!\n"),e.qZA()),2&u&&(e.xp6(4),e.Q6J("ngIf",null!=l.spell),e.xp6(1),e.Q6J("ngIf",l.custom),e.xp6(5),e.Q6J("value",l.advantage),e.xp6(11),e.Q6J("ngIf","custom"===l.advantage))},directives:[ce,ee.xw,ee.SQ,ee.Wh,Ce.O5,Le.oG,we.gM,k.JJ,k.On,J.KE,ee.yH,re.Nt,k.Fj,ie.Hw,J.R9,J.hX,he.gD,Me.ey],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}",".adv-tooltip{white-space:pre-line!important}\n/*# sourceMappingURL=attack-effect.component.css.map*/"]});var Ge=Y(5722),Ct=Y(6942),ft=Y(1196),Mt=Y(3188);const tt=["skillInput"];function Un(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-chip",9),e.NdJ("removed",function(){const H=e.CHM(l).$implicit;return e.oxw().remove(H)}),e._uU(1),e.TgZ(2,"button",10)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&C){const l=u.$implicit,m=e.oxw();e.xp6(1),e.hij(" ",m.skillKeyToName(l)," ")}}function gi(C,u){if(1&C&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l[0]),e.xp6(1),e.hij(" ",l[1]," ")}}const ni={acrobatics:"Acrobatics",animalHandling:"Animal Handling",arcana:"Arcana",athletics:"Athletics",deception:"Deception",history:"History",initiative:"Initiative",insight:"Insight",intimidation:"Intimidation",investigation:"Investigation",medicine:"Medicine",nature:"Nature",perception:"Perception",performance:"Performance",persuasion:"Persuasion",religion:"Religion",sleightOfHand:"Sleight of Hand",stealth:"Stealth",survival:"Survival",strength:"Strength",dexterity:"Dexterity",constitution:"Constitution",intelligence:"Intelligence",wisdom:"Wisdom",charisma:"Charisma"};class un{constructor(){this.label="Skills",this.required=!1,this.skillsChange=new e.vpe,this.skillCtrl=new k.NI(""),this.filteredSkills=this.skillCtrl.valueChanges.pipe((0,Ge.O)(""),(0,Ct.U)(u=>this._filter(u)))}skillKeyToName(u){var l;return null!==(l=ni[u])&&void 0!==l?l:"Invalid Skill"}remove(u){const l=this.skills.indexOf(u);l>=0&&(this.skills.splice(l,1),this.skillsChange.emit(this.skills))}selected(u){this.skills.push(u.option.value),this.skillsChange.emit(this.skills),this.skillInput.nativeElement.value="",this.skillCtrl.setValue("")}_filter(u){if(!u)return Object.entries(ni).filter(([m,b])=>!this.skills.includes(m));const l=u.toLowerCase();return Object.entries(ni).filter(([m,b])=>(m.toLowerCase().includes(l)||b.toLowerCase().includes(l))&&!this.skills.includes(m))}}function Cn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",12)(2,"input",13),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(3,"mat-icon",14),e._uU(4," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.dc)}}function bn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"avr-ability-select",15),e.NdJ("skillsChange",function(b){e.CHM(l);return e.oxw().contestAbilityWrapper=b})("skillsChange",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("skills",l.contestAbilityWrapper)}}function ut(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2,"Tie Behaviour"),e.qZA(),e.TgZ(3,"mat-select",1),e.NdJ("valueChange",function(b){e.CHM(l);return e.oxw().effect.contestTie=b})("selectionChange",function(){return e.CHM(l),e.oxw().changed.emit()}),e.TgZ(4,"mat-option",17),e._uU(5,"Target Wins"),e.qZA(),e.TgZ(6,"mat-option",18),e._uU(7,"Caster Wins"),e.qZA(),e.TgZ(8,"mat-option",19),e._uU(9,"Neither"),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(3),e.Q6J("value",l.effect.contestTie)}}function Gt(C,u){1&C&&(e.TgZ(0,"p"),e._uU(1," Use the Effect Tree to edit the on-fail and on-success effects!\n"),e.qZA())}un.\u0275fac=function(u){return new(u||un)},un.\u0275cmp=e.Xpm({type:un,selectors:[["avr-ability-select"]],viewQuery:function(u,l){if(1&u&&e.Gf(tt,5),2&u){let m;e.iGM(m=e.CRH())&&(l.skillInput=m.first)}},inputs:{label:"label",required:"required",skills:"skills"},outputs:{skillsChange:"skillsChange"},decls:12,vars:9,consts:[["matTooltip","The highest of any listed abilities will be used.",1,"is-fullwidth"],["aria-label","Fruit selection",3,"required"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Add skill...",3,"formControl","matAutocomplete","matChipInputFor"],["skillInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(u,l){if(1&u&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-chip-list",1,2),e.YNc(5,Un,5,1,"mat-chip",3),e._UZ(6,"input",4,5),e.qZA(),e.TgZ(8,"mat-autocomplete",6,7),e.NdJ("optionSelected",function(b){return l.selected(b)}),e.YNc(10,gi,2,2,"mat-option",8),e.ALo(11,"async"),e.qZA()()),2&u){const m=e.MAs(4),b=e.MAs(9);e.xp6(2),e.Oqu(l.label),e.xp6(1),e.Q6J("required",l.required),e.xp6(2),e.Q6J("ngForOf",l.skills),e.xp6(1),e.Q6J("formControl",l.skillCtrl)("matAutocomplete",b)("matChipInputFor",m),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,7,l.filteredSkills))}},directives:[J.KE,we.gM,J.hX,ft.qn,Ce.sg,ft.HS,ft.qH,ie.Hw,k.Fj,Mt.ZL,ft.oH,k.JJ,k.oH,Mt.XC,Me.ey],pipes:[Ce.Ov],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class le extends Oe{constructor(){super(),this.checkType="basic"}ngOnInit(){null!=this.effect.contestAbility?this.checkType="contest":null!=this.effect.dc&&(this.checkType="dc")}onCheckTypeChange(){var u,l,m,b,H,ue,Ue;"basic"===this.checkType?(this.effect.contestAbility=void 0,this.effect.dc=void 0,this.effect.contestTie=void 0):"dc"===this.checkType?(this.effect.contestAbility=void 0,this.effect.contestTie=void 0,this.effect.dc=null!==(u=this.effect.dc)&&void 0!==u?u:"",this.effect.success=null!==(l=this.effect.success)&&void 0!==l?l:[],this.effect.fail=null!==(m=this.effect.fail)&&void 0!==m?m:[]):(this.effect.dc=void 0,this.effect.contestAbility=null!==(b=this.effect.contestAbility)&&void 0!==b?b:"athletics",this.effect.contestTie=null!==(H=this.effect.contestTie)&&void 0!==H?H:"success",this.effect.success=null!==(ue=this.effect.success)&&void 0!==ue?ue:[],this.effect.fail=null!==(Ue=this.effect.fail)&&void 0!==Ue?Ue:[]),this.changed.emit(),this.treeChanged.emit()}get abilityWrapper(){return"string"!=typeof this.effect.ability?this.effect.ability:[this.effect.ability]}set abilityWrapper(u){1===u.length?this.effect.ability=u[0]:this.effect.ability=u}get contestAbilityWrapper(){return"string"!=typeof this.effect.contestAbility?this.effect.contestAbility:[this.effect.contestAbility]}set contestAbilityWrapper(u){1===u.length?this.effect.contestAbility=u[0]:this.effect.contestAbility=u}get advantageWrapper(){var u;return null!==(u=this.effect.adv)&&void 0!==u?u:0}set advantageWrapper(u){this.effect.adv=u||void 0}}le.\u0275fac=function(u){return new(u||le)},le.\u0275cmp=e.Xpm({type:le,selectors:[["avr-check-effect"]],features:[e.qOj],decls:33,vars:10,consts:[["anchor","ability-check"],[3,"value","valueChange","selectionChange"],["value","basic"],["value","dc"],["value","contest"],["required","",1,"is-fullwidth",3,"skills","skillsChange"],[4,"ngIf"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],["matTooltip","The default advantage for the target's ability check."],[3,"value"],["matTooltip","Which list of effects to run if the ability contest results in a tie.",4,"ngIf"],[1,"is-fullwidth"],["matInput","","required","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],["required","","label","Caster Skills (Contest)",1,"is-fullwidth",3,"skills","skillsChange"],["matTooltip","Which list of effects to run if the ability contest results in a tie."],["value","success"],["value","fail"],["value","neither"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Makes an ability check as the targeted creature, optionally as a contest against the caster. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Check Type"),e.qZA(),e.TgZ(7,"mat-select",1),e.NdJ("valueChange",function(b){return l.checkType=b})("selectionChange",function(){return l.onCheckTypeChange()}),e.TgZ(8,"mat-option",2),e._uU(9,"Check Roll"),e.qZA(),e.TgZ(10,"mat-option",3),e._uU(11,"Check Against DC"),e.qZA(),e.TgZ(12,"mat-option",4),e._uU(13,"Contest Against Caster"),e.qZA()()()(),e.TgZ(14,"div")(15,"avr-ability-select",5),e.NdJ("skillsChange",function(b){return l.abilityWrapper=b})("skillsChange",function(){return l.changed.emit()}),e.qZA()(),e.YNc(16,Cn,5,1,"div",6),e.YNc(17,bn,2,1,"div",6),e.TgZ(18,"span",7),e._uU(19,"Additional Options"),e.qZA(),e.TgZ(20,"div",8)(21,"mat-form-field",9)(22,"mat-label"),e._uU(23,"Advantage"),e.qZA(),e.TgZ(24,"mat-select",1),e.NdJ("valueChange",function(b){return l.advantageWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(25,"mat-option",10),e._uU(26,"Flat"),e.qZA(),e.TgZ(27,"mat-option",10),e._uU(28,"Advantage"),e.qZA(),e.TgZ(29,"mat-option",10),e._uU(30,"Disadvantage"),e.qZA()()(),e.YNc(31,ut,10,1,"mat-form-field",11),e.qZA(),e.YNc(32,Gt,2,0,"p",6)),2&u&&(e.xp6(7),e.Q6J("value",l.checkType),e.xp6(8),e.Q6J("skills",l.abilityWrapper),e.xp6(1),e.Q6J("ngIf","dc"===l.checkType),e.xp6(1),e.Q6J("ngIf","contest"===l.checkType),e.xp6(7),e.Q6J("value",l.advantageWrapper),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngIf","contest"===l.checkType),e.xp6(1),e.Q6J("ngIf","basic"!==l.checkType))},directives:[ce,J.KE,J.hX,he.gD,Me.ey,un,Ce.O5,re.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,we.gM,ee.xw,ee.SQ,ee.Wh],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class wn extends Oe{constructor(){super()}ngOnInit(){}}wn.\u0275fac=function(u){return new(u||wn)},wn.\u0275cmp=e.Xpm({type:wn,selectors:[["avr-condition-effect"]],features:[e.qOj],decls:25,vars:2,consts:[["anchor","condition-branch"],[1,"is-fullwidth"],["matInput","","placeholder","Condition","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],[3,"value","valueChange","selectionChange"],["value","true"],["value","false"],["value","both"],["value","neither"],["value","raise"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1,' A Branch effect runs certain effects if a certain condition is met, or other effects otherwise. AKA "condition" or "if-else". '),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field",1)(5,"input",2),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.condition=b}),e.qZA(),e.TgZ(6,"mat-icon",3),e._uU(7," calculate "),e.qZA()()(),e.TgZ(8,"div")(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Error Behaviour"),e.qZA(),e.TgZ(12,"mat-select",4),e.NdJ("valueChange",function(b){return l.effect.errorBehaviour=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(13,"mat-option",5),e._uU(14,"Treat as True"),e.qZA(),e.TgZ(15,"mat-option",6),e._uU(16,"Treat as False"),e.qZA(),e.TgZ(17,"mat-option",7),e._uU(18,"Run Both"),e.qZA(),e.TgZ(19,"mat-option",8),e._uU(20,"Skip Effect"),e.qZA(),e.TgZ(21,"mat-option",9),e._uU(22,"Stop Execution"),e.qZA()()()(),e.TgZ(23,"p"),e._uU(24," Use the Effect Tree to edit the on-true and on-false effects!\n"),e.qZA()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.condition),e.xp6(7),e.Q6J("value",l.effect.errorBehaviour))},directives:[ce,J.KE,re.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,we.gM,J.hX,he.gD,Me.ey],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var Pt=Y(2938),Ve=Y(7963),dn=Y(4815);function xn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," named "),e.qZA(),e.TgZ(3,"mat-form-field")(4,"input",20),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.counter=b}),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("ngModel",l.effect.counter)}}function qn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," of level "),e.qZA(),e.TgZ(3,"mat-form-field")(4,"input",21),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.counter.slot=b}),e.qZA(),e.TgZ(5,"mat-icon",12),e._uU(6," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("ngModel",l.effect.counter.slot)}}function Ut(C,u){if(1&C&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function Tn(C,u){if(1&C&&(e.TgZ(0,"mat-optgroup",26),e.YNc(1,Ut,2,2,"mat-option",27),e.qZA()),2&C){const l=u.$implicit;e.Q6J("label",l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function En(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," named "),e.qZA(),e.TgZ(3,"mat-form-field",22)(4,"mat-select",23),e.NdJ("selectionChange",function(b){return e.CHM(l),e.oxw().onAbilitySelectionChange(b)}),e.TgZ(5,"mat-option")(6,"ngx-mat-select-search",24),e.NdJ("ngModelChange",function(b){return e.CHM(l),e.oxw().updateSearchFilteredGroupedLimitedUse(b)}),e.qZA()(),e.YNc(7,Tn,2,2,"mat-optgroup",25),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("value",l.selectedLimitedUse),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredGroupedLimitedUse)}}class bt extends Oe{constructor(u){super(),this.gamedataService=u,this.limitedUse=[],this.searchFilteredGroupedLimitedUse=[]}get errorBehaviourWrapper(){var u;return void 0===this.effect.errorBehaviour?"warn":null!==(u=this.effect.errorBehaviour)&&void 0!==u?u:"ignore"}set errorBehaviourWrapper(u){this.effect.errorBehaviour="warn"===u?void 0:u}ngOnInit(){this.loadLimitedUse(),"string"==typeof this.effect.counter?this.counterType="counter":"slot"in this.effect.counter?this.counterType="slot":"id"in this.effect.counter&&(this.counterType="ability")}onCounterTypeChange(){"counter"===this.counterType?this.effect.counter="":"slot"===this.counterType?this.effect.counter={slot:1}:"ability"===this.counterType&&(this.effect.counter={id:1091,typeId:222216831})}onAbilitySelectionChange(u){this.effect.counter={id:u.value.id,typeId:u.value.typeId},this.selectedLimitedUse=u.value}updateSearchFilteredGroupedLimitedUse(u){let l=this.limitedUse.filter(m=>m.name.toLowerCase().includes(u.toLowerCase()));this.searchFilteredGroupedLimitedUse=Object.entries((0,Pt.groupBy)(l,m=>m.type))}loadLimitedUse(){this.gamedataService.getLimitedUse().subscribe(u=>{if(u.success){this.limitedUse=u.data;const l=this.effect.counter;this.selectedLimitedUse=this.limitedUse.find(m=>m.id===l.id&&m.typeId===l.typeId),this.updateSearchFilteredGroupedLimitedUse("")}})}}bt.\u0275fac=function(u){return new(u||bt)(e.Y36(Ve.u))},bt.\u0275cmp=e.Xpm({type:bt,selectors:[["avr-counter-effect"]],features:[e.qOj],decls:46,vars:9,consts:[["anchor","use-counter"],[1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","ability"],["value","counter"],["value","slot"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Amount","required","","matTooltip","If negative, will add charges instead of using them",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],[3,"ngModel","ngModelChange","change"],["matTooltip","If checked, the counter will ignore the -amt argument.",3,"ngModel","ngModelChange","change"],["value","ignore"],["value","warn"],["value","raise"],["matInput","","placeholder","Counter Name","required","",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Slot Level","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matTooltip","When you run this action, I'll find the best counter to use for this ability automatically."],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Uses a number of charges of the given counter, and displays the remaining amount and delta. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Counter Type"),e.qZA(),e.TgZ(9,"mat-select",2),e.NdJ("valueChange",function(b){return l.counterType=b})("selectionChange",function(){return l.changed.emit(),l.onCounterTypeChange()}),e.TgZ(10,"mat-option",3),e._uU(11,"ability"),e.qZA(),e.TgZ(12,"mat-option",4),e._uU(13,"custom counter"),e.qZA(),e.TgZ(14,"mat-option",5),e._uU(15,"spell slot"),e.qZA()()(),e.TgZ(16,"span",6),e.YNc(17,xn,5,1,"span",7),e.YNc(18,qn,7,1,"span",8),e.YNc(19,En,8,2,"span",8),e.qZA()(),e.TgZ(20,"div",9)(21,"mat-form-field",10)(22,"input",11),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.amount=b}),e.qZA(),e.TgZ(23,"mat-icon",12),e._uU(24," calculate "),e.qZA()()(),e.TgZ(25,"span",13),e._uU(26,"Additional Options"),e.qZA(),e.TgZ(27,"div",14)(28,"mat-checkbox",15),e.NdJ("ngModelChange",function(b){return l.effect.allowOverflow=b})("change",function(){return l.changed.emit()}),e._uU(29," Allow Overflow "),e.qZA(),e.TgZ(30,"span"),e._uU(31,"|"),e.qZA(),e.TgZ(32,"mat-checkbox",16),e.NdJ("ngModelChange",function(b){return l.effect.fixedValue=b})("change",function(){return l.changed.emit()}),e._uU(33," Fixed Value "),e.qZA(),e.TgZ(34,"span"),e._uU(35,"|"),e.qZA(),e.TgZ(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Error Behaviour"),e.qZA(),e.TgZ(39,"mat-select",2),e.NdJ("valueChange",function(b){return l.errorBehaviourWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(40,"mat-option",17),e._uU(41,"Ignore"),e.qZA(),e.TgZ(42,"mat-option",18),e._uU(43,"Show Warning"),e.qZA(),e.TgZ(44,"mat-option",19),e._uU(45,"Stop Execution"),e.qZA()()()()),2&u&&(e.xp6(5),e.hij("Use ","ability"===l.counterType?"an":"a"," "),e.xp6(4),e.Q6J("value",l.counterType),e.xp6(7),e.Q6J("ngSwitch",l.counterType),e.xp6(2),e.Q6J("ngSwitchCase","slot"),e.xp6(1),e.Q6J("ngSwitchCase","ability"),e.xp6(3),e.Q6J("ngModel",l.effect.amount),e.xp6(6),e.Q6J("ngModel",l.effect.allowOverflow),e.xp6(4),e.Q6J("ngModel",l.effect.fixedValue),e.xp6(7),e.Q6J("value",l.errorBehaviourWrapper))},directives:[ce,J.KE,J.hX,he.gD,Me.ey,Ce.RF,Ce.ED,re.Nt,k.Fj,k.Q7,k.JJ,k.On,Ce.n9,ie.Hw,J.R9,we.gM,dn.nu,Ce.sg,Me.Nv,ee.xw,ee.SQ,ee.Wh,ee.yH,Le.oG],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var ze=Y(6531),It=Y(7317);function Dt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"input",7),e.NdJ("change",function(){return e.CHM(l),e.oxw(2).changed.emit()})("ngModelChange",function(b){const ue=e.CHM(l).$implicit;return e.oxw(2).parent.higher[ue]=b}),e.qZA()()}if(2&C){const l=u.$implicit,m=e.oxw(2);e.xp6(1),e.MGl("placeholder","Level ",l,""),e.Q6J("ngModel",m.parent.higher[l])}}function Fn(C,u){if(1&C&&(e.TgZ(0,"div",2)(1,"mat-expansion-panel",3)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," At Higher Levels "),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Dt,2,2,"mat-form-field",5),e.qZA()()()),2&C){const l=e.oxw();e.xp6(6),e.Q6J("ngForOf",l.possibleLevels)}}function kt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"button",8),e.NdJ("click",function(){return e.CHM(l),e.oxw().addHigher()}),e._uU(2,"Add Higher Level"),e.qZA()()}}class ht{constructor(){this.changed=new e.vpe,this.undefined=void 0,this.possibleLevels=[]}calcLevels(){var C,u;this.possibleLevels=(C=this.spell.level+1,u=10,Array.from({length:u-C},(l,m)=>m+C))}addHigher(){this.parent.higher=new Map,this.changed.emit()}ngOnInit(){this.calcLevels()}ngOnChanges(u){this.calcLevels()}}function go(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"avr-higher-level",9),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("parent",l.effect)("spell",l.spell)}}ht.\u0275fac=function(u){return new(u||ht)},ht.\u0275cmp=e.Xpm({type:ht,selectors:[["avr-higher-level"]],inputs:{parent:"parent",spell:"spell"},outputs:{changed:"changed"},features:[e.TTD],decls:2,vars:2,consts:[["style","min-width: 300px;",4,"ngIf"],[4,"ngIf"],[2,"min-width","300px"],[1,"higher-level-panel"],["fxLayout","column"],["fxFlex","",4,"ngFor","ngForOf"],["fxFlex",""],["matInput","",3,"placeholder","ngModel","change","ngModelChange"],["mat-stroked-button","",3,"click"]],template:function(u,l){1&u&&(e.YNc(0,Fn,7,1,"div",0),e.YNc(1,kt,3,0,"div",1)),2&u&&(e.Q6J("ngIf",null!=l.parent.higher),e.xp6(1),e.Q6J("ngIf",void 0===l.parent.higher))},directives:[Ce.O5,ze.ib,ze.yz,ze.yK,ee.xw,Ce.sg,J.KE,ee.yH,re.Nt,k.Fj,k.JJ,k.On,It.lW],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class $e extends Oe{constructor(){super()}ngOnInit(){}}function ii(C,u){1&C&&(e.TgZ(0,"div",21)(1,"span"),e._uU(2," Concentration spells create an effect with the spell name automatically, this will overwrite it, potentially breaking things. "),e.qZA()())}$e.\u0275fac=function(u){return new(u||$e)},$e.\u0275cmp=e.Xpm({type:$e,selectors:[["avr-damage-effect"]],features:[e.qOj],decls:17,vars:6,consts:[["anchor","damage"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex",""],["matInput","","placeholder","Damage","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[3,"ngModel","ngModelChange","change"],["fxLayout","column","fxFill","","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","space-evenly center","fxLayoutAlign.gt-xs","left center"],[4,"ngIf"],["matTooltip","If checked, the roll won't apply bonuses from the -d argument.",3,"ngModel","ngModelChange","change"],["fxFlex","",3,"parent","spell","changed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Deals damage to or heals a targeted creature. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.damage=b}),e.qZA(),e.TgZ(6,"span",4),e._uU(7),e.qZA()(),e.TgZ(8,"span")(9,"mat-checkbox",5),e.NdJ("ngModelChange",function(b){return l.effect.overheal=b})("change",function(){return l.changed.emit()}),e._uU(10," Allow Overheal "),e.qZA()()(),e.TgZ(11,"div",6),e.YNc(12,go,2,2,"div",7),e.TgZ(13,"mat-checkbox",5),e.NdJ("ngModelChange",function(b){return l.effect.cantripScale=b})("change",function(){return l.changed.emit()}),e._uU(14," Scales like Cantrip "),e.qZA(),e.TgZ(15,"mat-checkbox",8),e.NdJ("ngModelChange",function(b){return l.effect.fixedValue=b})("change",function(){return l.changed.emit()}),e._uU(16," Fixed Value "),e.qZA()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.damage),e.xp6(2),e.Oqu("{ }"),e.xp6(2),e.Q6J("ngModel",l.effect.overheal),e.xp6(3),e.Q6J("ngIf",null!=l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale),e.xp6(2),e.Q6J("ngModel",l.effect.fixedValue))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,re.Nt,k.Fj,k.Q7,k.JJ,k.On,J.R9,we.gM,Le.oG,ee.s9,Ce.O5,ht],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class An extends Oe{constructor(){super()}ngOnInit(){}}An.\u0275fac=function(u){return new(u||An)},An.\u0275cmp=e.Xpm({type:An,selectors:[["avr-ieffect-effect"]],features:[e.qOj],decls:33,vars:12,consts:[["anchor","ieffect"],["fxLayout","row","fxLayoutGap","4px",1,"auto-row"],["fxFlex","1 2 auto"],["matInput","","placeholder","Name","required","",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Duration","required","","matTooltip","Use -1 for infinite duration.",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],["fxFlex","2 1 auto"],["matInput","","placeholder","Effects",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],["style","color: red; font-weight: bold; margin-bottom: 10px; margin-top: -10px;",4,"ngIf"],["fxLayout","row","fxLayoutGap","8px",1,"auto-row"],["matTooltip","Whether the effect duration ticks down at the end of the turn rather than the start.",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","change"],["matTooltip","If another effect with the same name exists, add this effect as a child instead of overwriting it.",3,"ngModel","ngModelChange","change"],["fxLayout","row"],[1,"is-fullwidth"],["matInput","","placeholder","Description","rows","3","maxlength","500",3,"ngModel","change","ngModelChange"],["fxLayout","row",2,"gap","8px"],["fxFlex","",2,"max-width","calc(50% - 4px)"],["matInput","","placeholder","Save As","matTooltip","If supplied, saves the added effect as an automation variable. Use this in another IEffect's parent field to set this effect as its parent.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Parent","matTooltip","If supplied, sets the added effect's parent to the given effect. This must be the same as another IEffect's save_as.",1,"text-monospace",3,"ngModel","change","ngModelChange"],[2,"color","red","font-weight","bold","margin-bottom","10px","margin-top","-10px"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," This IEffect version (v1) has been deprecated in v4 of Avrae. Please recreate this effect to migrate to the new effect version! "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",4),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.duration=b}),e.qZA(),e.TgZ(8,"mat-icon",5),e._uU(9,"calculate "),e.qZA()(),e.TgZ(10,"mat-form-field",6)(11,"input",7),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.effects=b}),e.qZA(),e.TgZ(12,"span",8),e._uU(13),e.qZA()()(),e.YNc(14,ii,3,0,"div",9),e.TgZ(15,"div",10)(16,"mat-checkbox",11),e.NdJ("ngModelChange",function(b){return l.effect.end=b})("change",function(){return l.changed.emit()}),e._uU(17," Ticks on end of turn? "),e.qZA(),e.TgZ(18,"mat-checkbox",12),e.NdJ("ngModelChange",function(b){return l.effect.conc=b})("change",function(){return l.changed.emit()}),e._uU(19," Requires concentration? "),e.qZA(),e.TgZ(20,"mat-checkbox",13),e.NdJ("ngModelChange",function(b){return l.effect.stacking=b})("change",function(){return l.changed.emit()}),e._uU(21," Stacking? "),e.qZA()(),e.TgZ(22,"div",14)(23,"mat-form-field",15)(24,"textarea",16),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.desc=b}),e._uU(25,"    "),e.qZA(),e.TgZ(26,"span",8),e._uU(27),e.qZA()()(),e.TgZ(28,"div",17)(29,"mat-form-field",18)(30,"input",19),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.save_as=b}),e.qZA()(),e.TgZ(31,"mat-form-field",18)(32,"input",20),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.parent=b}),e.qZA()()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(2),e.Q6J("ngModel",l.effect.duration),e.xp6(4),e.Q6J("ngModel",l.effect.effects),e.xp6(2),e.Oqu("{ }"),e.xp6(1),e.Q6J("ngIf",null!=l.spell&&l.spell.concentration&&l.spell.name==l.effect.name),e.xp6(2),e.Q6J("ngModel",l.effect.end),e.xp6(2),e.Q6J("ngModel",l.effect.conc),e.xp6(2),e.Q6J("ngModel",l.effect.stacking),e.xp6(4),e.Q6J("ngModel",l.effect.desc),e.xp6(3),e.Oqu("{ }"),e.xp6(3),e.Q6J("ngModel",l.effect.save_as),e.xp6(2),e.Q6J("ngModel",l.effect.parent))},directives:[ce,ee.xw,ee.SQ,J.KE,ee.yH,re.Nt,k.Fj,k.Q7,k.JJ,k.On,we.gM,ie.Hw,J.R9,Ce.O5,Le.oG,k.nD],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});const Xe="annotatedstring",Re="intexpression",pt=[{name:"Bludgeoning",value:"bludgeoning"},{name:"Piercing",value:"piercing"},{name:"Slashing",value:"slashing"},{name:"Acid",value:"acid"},{name:"Cold",value:"cold"},{name:"Fire",value:"fire"},{name:"Force",value:"force"},{name:"Lightning",value:"lightning"},{name:"Necrotic",value:"necrotic"},{name:"Poison",value:"poison"},{name:"Psychic",value:"psychic"},{name:"Radiant",value:"radiant"},{name:"Thunder",value:"thunder"}],qt=[{name:"All",value:"all"},{name:"Strength",value:"str"},{name:"Dexterity",value:"dex"},{name:"Constitution",value:"con"},{name:"Intelligence",value:"int"},{name:"Wisdom",value:"wis"},{name:"Charisma",value:"cha"}],Bn=[{name:"All",value:"all"},{name:"Acrobatics",value:"acrobatics"},{name:"Animal Handling",value:"animalHandling"},{name:"Arcana",value:"arcana"},{name:"Athletics",value:"athletics"},{name:"Deception",value:"deception"},{name:"History",value:"history"},{name:"Initiative",value:"initiative"},{name:"Insight",value:"insight"},{name:"Intimidation",value:"intimidation"},{name:"Investigation",value:"investigation"},{name:"Medicine",value:"medicine"},{name:"Nature",value:"nature"},{name:"Perception",value:"perception"},{name:"Performance",value:"performance"},{name:"Persuasion",value:"persuasion"},{name:"Religion",value:"religion"},{name:"Sleight of Hand",value:"sleightOfHand"},{name:"Stealth",value:"stealth"},{name:"Survival",value:"survival"},{name:"Strength",value:"strength"},{name:"Dexterity",value:"dexterity"},{name:"Constitution",value:"constitution"},{name:"Intelligence",value:"intelligence"},{name:"Wisdom",value:"wisdom"},{name:"Charisma",value:"charisma"}],Ke={attack_advantage:{name:"Attack Advantage",type:Re,defaultOptions:[{name:"Flat",value:"0"},{name:"Advantage",value:"1"},{name:"Disadvantage",value:"-1"},{name:"Elven Accuracy",value:"2"}]},to_hit_bonus:{name:"To Hit Bonus",type:Xe},damage_bonus:{name:"Damage Bonus",type:Xe},magical_damage:{name:"Magical Damage",type:Re,defaultOptions:[{name:"True",value:"1"}]},silvered_damage:{name:"Silvered Damage",type:Re,defaultOptions:[{name:"True",value:"1"}]},resistances:{name:"Resistance",type:Xe,isList:!0,defaultOptions:pt},immunities:{name:"Immunity",type:Xe,isList:!0,defaultOptions:pt},vulnerabilities:{name:"Vulnerability",type:Xe,isList:!0,defaultOptions:pt},ignored_resistances:{name:"Ignore Resistance",type:Xe,isList:!0,defaultOptions:pt},ac_value:{name:"Set AC",type:Re},ac_bonus:{name:"AC Bonus",type:Re},max_hp_value:{name:"Set Max HP",type:Re},max_hp_bonus:{name:"Max HP Bonus",type:Re},save_bonus:{name:"Saving Throw Bonus",type:Xe},save_adv:{name:"Saving Throw Advantage",type:Xe,isList:!0,defaultOptions:qt},save_dis:{name:"Saving Throw Disadvantage",type:Xe,isList:!0,defaultOptions:qt},check_bonus:{name:"Ability Check Bonus",type:Xe},check_adv:{name:"Ability Check Advantage",type:Xe,isList:!0,defaultOptions:Bn},check_dis:{name:"Ability Check Disadvantage",type:Xe,isList:!0,defaultOptions:Bn},dc_bonus:{name:"DC Bonus",type:Re}};var Pi=Y(345);class We{constructor(){this.delete=new e.vpe,this.deleteState=0}deleteClicked(){this.deleteState++,2===this.deleteState&&(this.delete.emit(),this.deleteState=0)}}function Wt(C,u){1&C&&(e.TgZ(0,"mat-error"),e._uU(1," Concentration spells create an effect with the spell name automatically. This will overwrite it, potentially creating issues. "),e.qZA())}function Jn(C,u){if(1&C&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(1),e.hij(" ",l.name," ")}}function Kt(C,u){if(1&C&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(1),e.hij(" ",l.name," ")}}function oi(C,u){if(1&C&&(e.TgZ(0,"mat-form-field",29)(1,"mat-label"),e._uU(2,"Value"),e.qZA(),e.TgZ(3,"mat-select",35),e.YNc(4,Kt,2,2,"mat-option",31),e.TgZ(5,"mat-option",34),e._uU(6,"Custom"),e.qZA()()()),2&C){const l=e.oxw().$implicit,m=e.oxw();e.xp6(4),e.Q6J("ngForOf",m.PASSIVE_EFFECTS[l.get("effectType").value].defaultOptions),e.xp6(1),e.Q6J("value",m.CUSTOM_SENTINEL)}}function ri(C,u){1&C&&(e.TgZ(0,"mat-icon",8),e._uU(1," calculate "),e.qZA())}function nt(C,u){1&C&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&C&&(e.xp6(1),e.hij(" ","{ }"," "))}function Hn(C,u){if(1&C&&(e.TgZ(0,"mat-form-field",29)(1,"mat-label"),e._uU(2,"Custom Expression"),e.qZA(),e._UZ(3,"input",36),e.YNc(4,ri,2,0,"mat-icon",37),e.YNc(5,nt,2,1,"span",38),e.qZA()),2&C){const l=e.oxw().$implicit,m=e.oxw();e.xp6(4),e.Q6J("ngIf",m.isValueIntExpression(l)),e.xp6(1),e.Q6J("ngIf",!m.isValueIntExpression(l))}}function gt(C,u){1&C&&e._UZ(0,"span",29)}function Zt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"mat-form-field",29)(3,"mat-label"),e._uU(4,"Passive Effect"),e.qZA(),e.TgZ(5,"mat-select",30),e.YNc(6,Jn,2,2,"mat-option",31),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8,"Only one instance of this effect may be specified."),e.qZA()(),e.YNc(9,oi,7,2,"mat-form-field",32),e.YNc(10,Hn,6,2,"mat-form-field",32),e.YNc(11,gt,1,0,"span",32),e.TgZ(12,"avr-doubleclick-delete-button",33),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deletePassiveEffect(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,m=u.index,b=e.oxw();e.xp6(1),e.Q6J("formGroupName",m),e.xp6(5),e.Q6J("ngForOf",b.passiveEffectTypeOptions),e.xp6(3),e.Q6J("ngIf",b.hasDefaultOptions(l)),e.xp6(1),e.Q6J("ngIf",b.isCustomValue(l)),e.xp6(1),e.Q6J("ngIf",!b.isCustomValue(l))}}function Ye(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA()(),e.TgZ(4,"div",39)(5,"mat-form-field",1),e._UZ(6,"input",40),e.qZA(),e.TgZ(7,"p",5),e._uU(8," Display Options "),e.qZA(),e.TgZ(9,"div",41)(10,"mat-form-field",42)(11,"mat-label"),e._uU(12,"Verb"),e.qZA(),e._UZ(13,"input",43),e.qZA(),e.TgZ(14,"mat-form-field",22),e._UZ(15,"input",44),e.qZA()(),e.TgZ(16,"mat-form-field",1),e._UZ(17,"input",45),e.qZA(),e.TgZ(18,"div")(19,"mat-checkbox",46),e._uU(20," Name is proper noun "),e.qZA()(),e.TgZ(21,"div")(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Action Type"),e.qZA(),e.TgZ(25,"mat-select",47)(26,"mat-option",34),e._uU(27,"Attack"),e.qZA(),e.TgZ(28,"mat-option",34),e._uU(29,"Action"),e.qZA(),e.TgZ(30,"mat-option",34),e._uU(31,"No Action"),e.qZA(),e.TgZ(32,"mat-option",34),e._uU(33,"Bonus Action"),e.qZA(),e.TgZ(34,"mat-option",34),e._uU(35,"Reaction"),e.qZA(),e.TgZ(36,"mat-option",34),e._uU(37,"Minute"),e.qZA(),e.TgZ(38,"mat-option",34),e._uU(39,"Hour"),e.qZA(),e.TgZ(40,"mat-option",34),e._uU(41,"Special"),e.qZA(),e.TgZ(42,"mat-option",34),e._uU(43,"Legendary Action"),e.qZA(),e.TgZ(44,"mat-option",34),e._uU(45,"Mythic Action"),e.qZA(),e.TgZ(46,"mat-option",34),e._uU(47,"Lair Action"),e.qZA()()()(),e.TgZ(48,"p",5),e._uU(49," Critical Hit Options "),e.qZA(),e.TgZ(50,"div",41)(51,"mat-form-field",42)(52,"mat-label"),e._uU(53,"Crit On"),e.qZA(),e._UZ(54,"input",48),e.qZA(),e.TgZ(55,"mat-form-field",22),e._UZ(56,"input",49),e.qZA()(),e.TgZ(57,"p",5),e._uU(58," Default Casting Information Overrides "),e.qZA(),e.TgZ(59,"p"),e._uU(60," For Attack and Save nodes without an explicitly defined attack bonus/DC, the default DC and attack modifier to use. If left blank, the target's default spellcasting information is used. "),e.qZA(),e.TgZ(61,"div",41)(62,"mat-form-field",22),e._UZ(63,"input",50),e.TgZ(64,"mat-icon",8),e._uU(65," calculate "),e.qZA()(),e.TgZ(66,"mat-form-field",22),e._UZ(67,"input",51),e.TgZ(68,"mat-icon",8),e._uU(69," calculate "),e.qZA()(),e.TgZ(70,"mat-form-field",22),e._UZ(71,"input",52),e.TgZ(72,"mat-icon",8),e._uU(73," calculate "),e.qZA()()(),e.TgZ(74,"p",5),e._uU(75," Effects "),e.qZA(),e.TgZ(76,"p"),e._uU(77," To edit this action's effects, use the Effect Tree! "),e.qZA()(),e.TgZ(78,"mat-action-row")(79,"avr-doubleclick-delete-button",33),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deleteAttack(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,m=u.index;e.xp6(3),e.hij(" ",l.get("name").value," "),e.xp6(1),e.Q6J("formGroupName",m),e.xp6(22),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(2),e.Q6J("value",3),e.xp6(2),e.Q6J("value",4),e.xp6(2),e.Q6J("value",6),e.xp6(2),e.Q6J("value",7),e.xp6(2),e.Q6J("value",8),e.xp6(2),e.Q6J("value",9),e.xp6(2),e.Q6J("value",10),e.xp6(2),e.Q6J("value",11)}}function Ii(C,u){if(1&C&&(e.TgZ(0,"mat-option",34)(1,"div",57),e._UZ(2,"span"),e.TgZ(3,"span"),e._uU(4),e.qZA()()()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(2),e.Gre("button-style button-style-",l.value,""),e.xp6(2),e.Oqu(l.name)}}function Ft(C,u){1&C&&(e.TgZ(0,"mat-form-field",58)(1,"mat-label"),e._uU(2,"Custom Expression"),e.qZA(),e._UZ(3,"input",59),e.TgZ(4,"mat-icon",8),e._uU(5," calculate "),e.qZA()())}function hn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA()(),e.TgZ(4,"div",39)(5,"mat-form-field",1),e._UZ(6,"input",53),e.TgZ(7,"span",4),e._uU(8),e.qZA()(),e.TgZ(9,"p",5),e._uU(10," Display Options "),e.qZA(),e.TgZ(11,"mat-form-field",6)(12,"mat-label"),e._uU(13,"Verb"),e.qZA(),e._UZ(14,"input",54),e.TgZ(15,"span",4),e._uU(16),e.qZA()(),e.TgZ(17,"div",41)(18,"mat-form-field",29)(19,"mat-label"),e._uU(20,"Style"),e.qZA(),e.TgZ(21,"mat-select",55),e.YNc(22,Ii,5,5,"mat-option",31),e.TgZ(23,"mat-option",34),e._uU(24," Custom Expression "),e.qZA()()(),e.YNc(25,Ft,6,0,"mat-form-field",56),e.qZA(),e.TgZ(26,"p",5),e._uU(27," Default Casting Information Overrides "),e.qZA(),e.TgZ(28,"p"),e._uU(29," For Attack and Save nodes without an explicitly defined attack bonus/DC, the default DC and attack modifier to use. If left blank, the target's default spellcasting information is used. "),e.qZA(),e.TgZ(30,"div",41)(31,"mat-form-field",22),e._UZ(32,"input",50),e.TgZ(33,"mat-icon",8),e._uU(34," calculate "),e.qZA()(),e.TgZ(35,"mat-form-field",22),e._UZ(36,"input",51),e.TgZ(37,"mat-icon",8),e._uU(38," calculate "),e.qZA()(),e.TgZ(39,"mat-form-field",22),e._UZ(40,"input",52),e.TgZ(41,"mat-icon",8),e._uU(42," calculate "),e.qZA()()(),e.TgZ(43,"p",5),e._uU(44," Effects "),e.qZA(),e.TgZ(45,"p"),e._uU(46," To edit this button's effects, use the Effect Tree! "),e.qZA()(),e.TgZ(47,"mat-action-row")(48,"avr-doubleclick-delete-button",33),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deleteButton(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,m=u.index,b=e.oxw();e.xp6(3),e.hij(" ",l.get("label").value," "),e.xp6(1),e.Q6J("formGroupName",m),e.xp6(4),e.hij(" ","{ }"," "),e.xp6(6),e.Q6J("placeholder","uses "+l.get("label").value),e.xp6(2),e.hij(" ","{ }"," "),e.xp6(6),e.Q6J("ngForOf",b.buttonStyleOptions),e.xp6(1),e.Q6J("value",b.CUSTOM_SENTINEL),e.xp6(2),e.Q6J("ngIf",b.isCustomButtonStyle(l))}}We.\u0275fac=function(u){return new(u||We)},We.\u0275cmp=e.Xpm({type:We,selectors:[["avr-doubleclick-delete-button"]],outputs:{delete:"delete"},decls:3,vars:1,consts:[["mat-icon-button","","matTooltip","Double click to delete.",3,"color","click","clickOutside"],["aria-label","Delete"]],template:function(u,l){1&u&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.deleteClicked()})("clickOutside",function(){return l.deleteState=0}),e.TgZ(1,"mat-icon",1),e._uU(2,"delete"),e.qZA()()),2&u&&e.Q6J("color",0===l.deleteState?"warn":"accent")},directives:[It.lW,we.gM,Pi.t,ie.Hw],encapsulation:2});const it="__custom";class Sn extends Oe{constructor(u){super(),this.fb=u,this.passiveEffects=this.fb.array([]),this.attacks=this.fb.array([]),this.buttons=this.fb.array([]),this.effectGroup=this.fb.group({passiveEffects:this.passiveEffects,attacks:this.attacks,buttons:this.buttons}),this.PASSIVE_EFFECTS=Ke,this.CUSTOM_SENTINEL=it,this.passiveEffectTypeOptions=Object.entries(Ke).map(([l,m])=>({value:l,name:m.name})),this.buttonStyleOptions=[{name:"Blurple",value:"1"},{name:"Grey",value:"2"},{name:"Green",value:"3"},{name:"Red",value:"4"}]}ngOnInit(){this.populatePassiveEffectForm(),this.passiveEffects.valueChanges.subscribe(u=>this.onPassiveEffectsChange(u)),this.populateAttackForm(),this.attacks.valueChanges.subscribe(u=>this.onAttacksChange(u)),this.populateButtonForm(),this.buttons.valueChanges.subscribe(u=>this.onButtonsChange(u))}get durationWrapper(){var u,l;return null!==(l=null===(u=this.effect.duration)||void 0===u?void 0:u.toString())&&void 0!==l?l:""}set durationWrapper(u){this.effect.duration=u||void 0}get saveAsWrapper(){var u,l;return null!==(l=null===(u=this.effect.save_as)||void 0===u?void 0:u.toString())&&void 0!==l?l:""}set saveAsWrapper(u){this.effect.save_as=u||void 0}populatePassiveEffectForm(){if(this.effect.effects)for(const[u,l]of Object.entries(this.effect.effects)){const m=Ke[u];if(!m)continue;const b=H=>{var ue;return(null===(ue=m.defaultOptions)||void 0===ue?void 0:ue.map(Ue=>Ue.value).includes(H))?[H,null,!1]:[it,H,!1]};if(m.isList)for(const H of l)this.addPassiveEffect(u,...b(H));else this.addPassiveEffect(u,...b(l))}}addPassiveEffect(u=null,l="",m="",b=!0){const H=this.fb.control(u,Et=>this.passiveEffectTypeValidator(Et)),ue=this.fb.control(l),Ue=this.fb.control(m);H.valueChanges.subscribe(()=>{ue.setValue(null),Ue.setValue(null)}),this.passiveEffects.push(this.fb.group({effectType:H,defaultOptions:ue,value:Ue}),{emitEvent:b})}deletePassiveEffect(u){this.passiveEffects.removeAt(u)}onPassiveEffectsChange(u){var l;const m={};for(const{effectType:b,defaultOptions:H,value:ue}of u){if(!(b in Ke))continue;const Ue=H===it?ue:H||ue;Ke[b].isList?m[b]=[...null!==(l=m[b])&&void 0!==l?l:[],Ue]:m[b]=Ue}this.effect.effects=(0,Pt.isEmpty)(m)?void 0:m,this.changed.emit()}passiveEffectTypeValidator(u){return this.passiveEffects.controls.filter(m=>m.get("effectType")!==u).map(m=>m.get("effectType").value).filter(m=>!Ke[m].isList).includes(u.value)?{effectType:{name:`Can only specify one ${u.value} per IEffect`}}:null}hasDefaultOptions(u){const l=Ke[u.get("effectType").value];return!!l&&null!=l.defaultOptions}isCustomValue(u){var l,m;const b=u.get("effectType").value;return null!=b&&(u.get("defaultOptions").value===it||!(null===(m=null===(l=Ke[b])||void 0===l?void 0:l.defaultOptions)||void 0===m?void 0:m.length))}isValueIntExpression(u){const l=Ke[u.get("effectType").value];return!l||"intexpression"===l.type}populateAttackForm(){if(this.effect.attacks)for(const u of this.effect.attacks)this.addAttack(u,!1)}addAttack(u,l=!0){var m,b,H,ue,Ue,Et,be,_e,Ci,Xi,eo,to;const no=this.fb.control(null!==(m=null==u?void 0:u.attack.name)&&void 0!==m?m:"New Action");no.valueChanges.subscribe(()=>{setTimeout(()=>this.treeChanged.emit())}),this.attacks.push(this.fb.group({name:no,verb:this.fb.control(null!==(b=null==u?void 0:u.attack.verb)&&void 0!==b?b:null),thumb:this.fb.control(null!==(H=null==u?void 0:u.attack.thumb)&&void 0!==H?H:null),phrase:this.fb.control(null!==(ue=null==u?void 0:u.attack.phrase)&&void 0!==ue?ue:null),proper:this.fb.control(null!==(Ue=null==u?void 0:u.attack.proper)&&void 0!==Ue&&Ue),criton:this.fb.control(null!==(Et=null==u?void 0:u.attack.criton)&&void 0!==Et?Et:null),extraCritDamage:this.fb.control(null!==(be=null==u?void 0:u.attack.extra_crit_damage)&&void 0!==be?be:null),activationType:this.fb.control(null!==(_e=null==u?void 0:u.attack.activation_type)&&void 0!==_e?_e:0),defaultDc:this.fb.control(null!==(Ci=null==u?void 0:u.defaultDC)&&void 0!==Ci?Ci:null),defaultAttackBonus:this.fb.control(null!==(Xi=null==u?void 0:u.defaultAttackBonus)&&void 0!==Xi?Xi:null),defaultCastingMod:this.fb.control(null!==(eo=null==u?void 0:u.defaultCastingMod)&&void 0!==eo?eo:null),_automation:this.fb.control(null!==(to=null==u?void 0:u.attack.automation)&&void 0!==to?to:[])},{emitEvent:l})),l&&this.treeChanged.emit()}deleteAttack(u){this.attacks.removeAt(u),this.treeChanged.emit()}onAttacksChange(u){const l=[];for(const m of u)l.push({attack:{_v:2,name:m.name,automation:m._automation,verb:m.verb||void 0,thumb:m.thumb||void 0,phrase:m.phrase||void 0,proper:m.proper||void 0,criton:m.criton||void 0,extra_crit_damage:m.extraCritDamage||void 0,activation_type:m.activationType||void 0},defaultDC:m.defaultDc||void 0,defaultAttackBonus:m.defaultAttackBonus||void 0,defaultCastingMod:m.defaultCastingMod||void 0});this.effect.attacks=(0,Pt.isEmpty)(l)?void 0:l,this.changed.emit()}populateButtonForm(){if(this.effect.buttons)for(const u of this.effect.buttons)this.addButton(u,!1)}addButton(u,l=!0){var m,b,H,ue,Ue,Et;const be=this.fb.control(null!==(m=null==u?void 0:u.label)&&void 0!==m?m:"New Button");let _e;be.valueChanges.subscribe(()=>{setTimeout(()=>this.treeChanged.emit())}),_e=!(null==u?void 0:u.style)||this.buttonStyleOptions.some(Ci=>Ci.value===u.style)?{style:this.fb.control((null==u?void 0:u.style)||"1"),customStyle:this.fb.control(null)}:{style:this.fb.control(it),customStyle:this.fb.control((null==u?void 0:u.style)||null)},this.buttons.push(this.fb.group(Object.assign(Object.assign({label:be,verb:this.fb.control(null!==(b=null==u?void 0:u.verb)&&void 0!==b?b:null)},_e),{defaultDc:this.fb.control(null!==(H=null==u?void 0:u.defaultDC)&&void 0!==H?H:null),defaultAttackBonus:this.fb.control(null!==(ue=null==u?void 0:u.defaultAttackBonus)&&void 0!==ue?ue:null),defaultCastingMod:this.fb.control(null!==(Ue=null==u?void 0:u.defaultCastingMod)&&void 0!==Ue?Ue:null),_automation:this.fb.control(null!==(Et=null==u?void 0:u.automation)&&void 0!==Et?Et:[])}),{emitEvent:l})),l&&this.treeChanged.emit()}deleteButton(u){this.buttons.removeAt(u),this.treeChanged.emit()}onButtonsChange(u){const l=[];for(const m of u){const b=m.style===it?m.customStyle:m.style;l.push({label:m.label,automation:m._automation,verb:m.verb||void 0,style:b||void 0,defaultDC:m.defaultDc||void 0,defaultAttackBonus:m.defaultAttackBonus||void 0,defaultCastingMod:m.defaultCastingMod||void 0})}this.effect.buttons=(0,Pt.isEmpty)(l)?void 0:l,this.changed.emit()}isCustomButtonStyle(u){return u.get("style").value===it}}Sn.\u0275fac=function(u){return new(u||Sn)(e.Y36(k.qu))},Sn.\u0275cmp=e.Xpm({type:Sn,selectors:[["avr-ieffect2-effect"]],features:[e.qOj],decls:70,vars:20,consts:[["anchor","ieffect"],[1,"is-fullwidth"],["matInput","","placeholder","Name","required","",3,"ngModel","change","ngModelChange"],[4,"ngIf"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[1,"auto-label"],["floatLabel","always",1,"is-fullwidth"],["matInput","","placeholder","Indefinite","matTooltip","The duration, in rounds. Leave blank for infinite duration.\n\n1 Min  - 10\n1 Hour - 600\n1 Day  - 14400\n1 Year - 5256000",3,"ngModel","matTooltipClass","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","center baseline",1,"auto-row"],["matTooltip","Whether the effect duration ticks down at the end of the turn rather than the start.",3,"ngModel","ngModelChange","change"],["matTooltip","Should this effect tick down on the casters turn, or the targets turn.",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","change"],[3,"formGroup"],["formArrayName","passiveEffects"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],["formArrayName","attacks"],["multi",""],["formArrayName","buttons"],["matInput","","placeholder","Description","rows","3","maxlength","500",3,"ngModel","change","ngModelChange"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline"],["fxFlex",""],["matInput","","placeholder","Save As","matTooltip","If supplied, saves the added effect as an automation variable. Use this in another IEffect's parent field to set this effect as its parent.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Parent","matTooltip","If supplied, sets the added effect's parent to the given effect. This must be the same as another IEffect's save_as.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxLayout","column","fxFill","","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","space-evenly center","fxLayoutAlign.gt-xs","left center"],["matTooltip","If another effect with the same name exists, add this effect as a child instead of overwriting it.",3,"ngModel","ngModelChange","change"],["matTooltip","Targets the caster of the automation instead of the current target.",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row",3,"formGroupName"],["fxFlex","1 4 auto"],["formControlName","effectType"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","1 4 auto",4,"ngIf"],[3,"delete"],[3,"value"],["formControlName","defaultOptions"],["matInput","","formControlName","value"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed",4,"ngIf"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces",4,"ngIf"],[3,"formGroupName"],["matInput","","formControlName","name","placeholder","Name","required",""],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","","floatLabel","always"],["matInput","","formControlName","verb","placeholder","attacks with"],["matInput","","formControlName","thumb","placeholder","Thumbnail URL"],["matInput","","formControlName","phrase","placeholder","Flavor Text"],["formControlName","proper"],["formControlName","activationType"],["matInput","","formControlName","criton","placeholder","(target's criton setting)","type","number","min","1","max","20"],["matInput","","formControlName","extraCritDamage","placeholder","Extra Crit Damage"],["matInput","","formControlName","defaultDc","placeholder","DC",1,"text-monospace"],["matInput","","formControlName","defaultAttackBonus","placeholder","Spell Attack Bonus",1,"text-monospace"],["matInput","","formControlName","defaultCastingMod","placeholder","Spellcasting Modifier",1,"text-monospace"],["matInput","","formControlName","label","placeholder","Label","required",""],["matInput","","formControlName","verb",3,"placeholder"],["formControlName","style"],["fxFlex","4 1 auto",4,"ngIf"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","left center"],["fxFlex","4 1 auto"],["matInput","","formControlName","customStyle"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Adds an InitTracker Effect to a targeted creature, if the target is in combat. Initiative Effects are a versatile method to modify a combatant's bonuses, maluses, grant temporary actions, and create automation that runs at the click of a button! "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field",1)(5,"input",2),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA(),e.YNc(6,Wt,2,0,"mat-error",3),e.TgZ(7,"span",4),e._uU(8),e.qZA()()(),e.TgZ(9,"p",5),e._uU(10," Duration Options\n"),e.qZA(),e.TgZ(11,"div")(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Duration"),e.qZA(),e.TgZ(15,"input",7),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.durationWrapper=b}),e.qZA(),e.TgZ(16,"mat-icon",8),e._uU(17," calculate "),e.qZA()()(),e.TgZ(18,"div",9)(19,"mat-checkbox",10),e.NdJ("ngModelChange",function(b){return l.effect.end=b})("change",function(){return l.changed.emit()}),e._uU(20," Ticks on end of turn "),e.qZA(),e.TgZ(21,"mat-checkbox",11),e.NdJ("ngModelChange",function(b){return l.effect.tick_on_caster=b})("change",function(){return l.changed.emit()}),e._uU(22," Tick on Caster "),e.qZA(),e.TgZ(23,"mat-checkbox",12),e.NdJ("ngModelChange",function(b){return l.effect.conc=b})("change",function(){return l.changed.emit()}),e._uU(24," Requires concentration "),e.qZA()(),e.TgZ(25,"div",13)(26,"div",14)(27,"p",5),e._uU(28," Passive Effects "),e.qZA(),e.YNc(29,Zt,13,5,"div",15),e.TgZ(30,"button",16),e.NdJ("click",function(){return l.addPassiveEffect()}),e._uU(31," + Add passive effect "),e.qZA()()(),e.TgZ(32,"div",13)(33,"div",17)(34,"p",5),e._uU(35," Granted Actions "),e.qZA(),e.TgZ(36,"mat-accordion",18),e.YNc(37,Ye,80,13,"mat-expansion-panel",15),e.qZA(),e.TgZ(38,"button",16),e.NdJ("click",function(){return l.addAttack()}),e._uU(39," + Add granted action "),e.qZA()()(),e.TgZ(40,"div",13)(41,"div",19)(42,"p",5),e._uU(43," Granted Buttons "),e.qZA(),e.TgZ(44,"mat-accordion",18),e.YNc(45,hn,49,8,"mat-expansion-panel",15),e.qZA(),e.TgZ(46,"button",16),e.NdJ("click",function(){return l.addButton()}),e._uU(47," + Add granted button "),e.qZA()()(),e.TgZ(48,"p",5),e._uU(49," Description\n"),e.qZA(),e.TgZ(50,"div")(51,"mat-form-field",1)(52,"textarea",20),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.desc=b}),e._uU(53,"    "),e.qZA(),e.TgZ(54,"span",4),e._uU(55),e.qZA()()(),e.TgZ(56,"p",5),e._uU(57," Parenting Options\n"),e.qZA(),e.TgZ(58,"div",21)(59,"mat-form-field",22)(60,"input",23),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.saveAsWrapper=b}),e.qZA()(),e.TgZ(61,"mat-form-field",22)(62,"input",24),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.parent=b}),e.qZA()()(),e.TgZ(63,"p",5),e._uU(64," Other Options\n"),e.qZA(),e.TgZ(65,"div",25)(66,"mat-checkbox",26),e.NdJ("ngModelChange",function(b){return l.effect.stacking=b})("change",function(){return l.changed.emit()}),e._uU(67," Enable Effect Stacking "),e.qZA(),e.TgZ(68,"mat-checkbox",27),e.NdJ("ngModelChange",function(b){return l.effect.target_self=b})("change",function(){return l.changed.emit()}),e._uU(69," Target Self "),e.qZA()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(1),e.Q6J("ngIf",null!=l.spell&&l.spell.concentration&&l.spell.name===l.effect.name),e.xp6(2),e.hij(" ","{ }"," "),e.xp6(7),e.Q6J("ngModel",l.durationWrapper)("matTooltipClass","adv-tooltip"),e.xp6(4),e.Q6J("ngModel",l.effect.end),e.xp6(2),e.Q6J("ngModel",l.effect.tick_on_caster),e.xp6(2),e.Q6J("ngModel",l.effect.conc),e.xp6(2),e.Q6J("formGroup",l.effectGroup),e.xp6(4),e.Q6J("ngForOf",l.passiveEffects.controls),e.xp6(3),e.Q6J("formGroup",l.effectGroup),e.xp6(5),e.Q6J("ngForOf",l.attacks.controls),e.xp6(3),e.Q6J("formGroup",l.effectGroup),e.xp6(5),e.Q6J("ngForOf",l.buttons.controls),e.xp6(7),e.Q6J("ngModel",l.effect.desc),e.xp6(3),e.Oqu("{ }"),e.xp6(5),e.Q6J("ngModel",l.saveAsWrapper),e.xp6(2),e.Q6J("ngModel",l.effect.parent),e.xp6(4),e.Q6J("ngModel",l.effect.stacking),e.xp6(2),e.Q6J("ngModel",l.effect.target_self))},directives:[ce,J.KE,re.Nt,k.Fj,k.Q7,k.JJ,k.On,Ce.O5,J.TO,J.R9,we.gM,J.hX,ie.Hw,ee.xw,ee.SQ,ee.Wh,Le.oG,k.JL,k.sg,k.CE,Ce.sg,k.x0,ee.yH,he.gD,k.u,Me.ey,We,It.lW,ze.pp,ze.ib,ze.yz,ze.yK,k.wV,k.qQ,k.Fd,ze.VG,k.nD,ee.s9],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}",".button-style[_ngcontent-%COMP%]{border-radius:50%;width:1.25em;height:1.25em;display:inline-block}.button-style-1[_ngcontent-%COMP%]{background:rgb(88,101,242)}.button-style-2[_ngcontent-%COMP%]{background:rgb(79,84,92)}.button-style-3[_ngcontent-%COMP%]{background:rgb(45,125,70)}.button-style-4[_ngcontent-%COMP%]{background:rgb(216,60,62)}  .adv-tooltip{white-space:pre-line!important}\n/*# sourceMappingURL=ieffect2-effect.component.css.map*/"]});class Qe extends Oe{constructor(){super()}ngOnInit(){}get removeParentWrapper(){var u;return null!==(u=this.effect.removeParent)&&void 0!==u?u:"never"}set removeParentWrapper(u){this.effect.removeParent="never"==u?void 0:u}}function on(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"avr-higher-level",16),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()}if(2&C){const l=e.oxw();e.Q6J("parent",l.effect)("spell",l.spell)}}Qe.\u0275fac=function(u){return new(u||Qe)},Qe.\u0275cmp=e.Xpm({type:Qe,selectors:[["avr-remove-ieffect-effect"]],features:[e.qOj],decls:16,vars:1,consts:[["anchor","remove-ieffect"],["fxLayout","row nowrap","fxLayoutGap","6px",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","never"],["value","always"],["value","if_no_children"],["aria-hidden","false","aria-label","Remove parent help","inline","","matTooltip","If the removed effect has a parent effect, whether to remove it as well."]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Removes the initiative effect that triggered this automation. Only works when run in execution triggered by an initiative effect, such as a ButtonInteraction. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Remove Parent"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.removeParentWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(8,"mat-option",3),e._uU(9,"Never"),e.qZA(),e.TgZ(10,"mat-option",4),e._uU(11,"Always"),e.qZA(),e.TgZ(12,"mat-option",5),e._uU(13,"If No Children"),e.qZA()()(),e.TgZ(14,"mat-icon",6),e._uU(15," help "),e.qZA()()),2&u&&(e.xp6(7),e.Q6J("value",l.removeParentWrapper))},directives:[ce,ee.xw,ee.SQ,J.KE,J.hX,he.gD,Me.ey,ie.Hw,we.gM],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class N extends Oe{constructor(){super()}ngOnInit(){}}function d(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().custom=b})("change",function(){e.CHM(l);const b=e.oxw();return b.changed.emit(),b.onCustomChange()}),e._uU(1," Has custom DC "),e.qZA()}if(2&C){const l=e.oxw();e.Q6J("ngModel",l.custom)}}function _(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",14)(1,"input",15),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(2,"mat-icon",16),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.effect.dc)}}N.\u0275fac=function(u){return new(u||N)},N.\u0275cmp=e.Xpm({type:N,selectors:[["avr-roll-effect"]],features:[e.qOj],decls:28,vars:8,consts:[["anchor","roll"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","1 3 auto"],["matInput","","placeholder","Name","required","","matTooltip","The result of the roll will be saved to an automation variable with this name.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxFlex","3 1 auto"],["matInput","","placeholder","Dice","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[1,"auto-label"],["fxFlex","1 4 auto","fxLayoutAlign","center center"],["matTooltip","If checked, the roll won't display in the automation's Meta field or apply bonuses from the -d argument.",3,"ngModel","ngModelChange","change"],["matTooltip","If checked, the roll won't apply bonuses from the -d argument.",3,"ngModel","ngModelChange","change"],["fxFlex","4 1 auto"],["matInput","","placeholder","Display Name","matTooltip","The name to display in the Meta field. If left blank, will use the saved name.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["fxFlex","",3,"parent","spell","changed",4,"ngIf"],[3,"ngModel","ngModelChange","change"],["fxFlex","",3,"parent","spell","changed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Rolls some dice and saves the result in a variable. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"mat-form-field",4)(7,"input",5),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.dice=b}),e.qZA(),e.TgZ(8,"span",6),e._uU(9),e.qZA()()(),e.TgZ(10,"p",7),e._uU(11,"Additional Options"),e.qZA(),e.TgZ(12,"div",1)(13,"div",8)(14,"mat-checkbox",9),e.NdJ("ngModelChange",function(b){return l.effect.hidden=b})("change",function(){return l.changed.emit()}),e._uU(15," Hidden "),e.qZA()(),e.TgZ(16,"div",8)(17,"mat-checkbox",10),e.NdJ("ngModelChange",function(b){return l.effect.fixedValue=b})("change",function(){return l.changed.emit()}),e._uU(18," Fixed Value "),e.qZA()(),e.TgZ(19,"mat-form-field",11)(20,"input",12),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.displayName=b}),e.qZA()()(),e.TgZ(21,"div")(22,"p",7),e._uU(23,"Spell Options"),e.qZA(),e.TgZ(24,"div",13),e.YNc(25,on,1,2,"avr-higher-level",14),e.TgZ(26,"mat-checkbox",15),e.NdJ("ngModelChange",function(b){return l.effect.cantripScale=b})("change",function(){return l.changed.emit()}),e._uU(27," Scales like Cantrip "),e.qZA()()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(2),e.Q6J("ngModel",l.effect.dice),e.xp6(2),e.Oqu("{ }"),e.xp6(5),e.Q6J("ngModel",l.effect.hidden),e.xp6(3),e.Q6J("ngModel",l.effect.fixedValue),e.xp6(3),e.Q6J("ngModel",l.effect.displayName),e.xp6(5),e.Q6J("ngIf",l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,re.Nt,k.Fj,k.Q7,we.gM,k.JJ,k.On,J.R9,Le.oG,Ce.O5,ht],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class w extends Oe{constructor(){super(),this.custom=!1}get advantageWrapper(){var u;return null!==(u=this.effect.adv)&&void 0!==u?u:0}set advantageWrapper(u){this.effect.adv=u||void 0}ngOnInit(){(this.effect.dc||null==this.spell)&&(this.custom=!0)}onCustomChange(){this.custom||(this.effect.dc=void 0)}}function E(C,u){if(1&C&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function P(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div",13)(1,"mat-form-field",10)(2,"input",14),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(3,"mat-icon",15),e._uU(4," calculate "),e.qZA()(),e.TgZ(5,"mat-form-field",10)(6,"input",16),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.attackBonus=b}),e.qZA(),e.TgZ(7,"mat-icon",15),e._uU(8," calculate "),e.qZA()(),e.TgZ(9,"mat-form-field",10)(10,"input",17),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.castingMod=b}),e.qZA(),e.TgZ(11,"mat-icon",15),e._uU(12," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.dc),e.xp6(4),e.Q6J("ngModel",l.effect.attackBonus),e.xp6(4),e.Q6J("ngModel",l.effect.castingMod)}}w.\u0275fac=function(u){return new(u||w)},w.\u0275cmp=e.Xpm({type:w,selectors:[["avr-save-effect"]],features:[e.qOj],decls:36,vars:7,consts:[["anchor","save"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","str"],["value","dex"],["value","con"],["value","int"],["value","wis"],["value","cha"],["matTooltip","If not checked, uses the caster's default DC.",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxFlex","grow",4,"ngIf"],["matTooltip","The default advantage for this saving throw."],[3,"value"],["matTooltip","If not checked, uses the caster's default DC.",3,"ngModel","ngModelChange","change"],["fxFlex","grow"],["matInput","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," A Save effect forces a targeted creature to make a saving throw. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Save Stat"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.effect.stat=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(8,"mat-option",3),e._uU(9,"Strength"),e.qZA(),e.TgZ(10,"mat-option",4),e._uU(11,"Dexterity"),e.qZA(),e.TgZ(12,"mat-option",5),e._uU(13,"Constitution"),e.qZA(),e.TgZ(14,"mat-option",6),e._uU(15,"Intelligence"),e.qZA(),e.TgZ(16,"mat-option",7),e._uU(17,"Wisdom"),e.qZA(),e.TgZ(18,"mat-option",8),e._uU(19,"Charisma"),e.qZA()()()(),e.TgZ(20,"div",1),e.YNc(21,d,2,1,"mat-checkbox",9),e.YNc(22,_,4,1,"mat-form-field",10),e.qZA(),e.TgZ(23,"div",1)(24,"mat-form-field",11)(25,"mat-label"),e._uU(26,"Advantage"),e.qZA(),e.TgZ(27,"mat-select",2),e.NdJ("valueChange",function(b){return l.advantageWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(28,"mat-option",12),e._uU(29,"Flat"),e.qZA(),e.TgZ(30,"mat-option",12),e._uU(31,"Advantage"),e.qZA(),e.TgZ(32,"mat-option",12),e._uU(33,"Disadvantage"),e.qZA()()()(),e.TgZ(34,"p"),e._uU(35," Use the Effect Tree to edit the on-fail and on-success effects!\n"),e.qZA()),2&u&&(e.xp6(7),e.Q6J("value",l.effect.stat),e.xp6(14),e.Q6J("ngIf",null!=l.spell),e.xp6(1),e.Q6J("ngIf",l.custom),e.xp6(5),e.Q6J("value",l.advantageWrapper),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",-1))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,J.hX,he.gD,Me.ey,Ce.O5,Le.oG,we.gM,k.JJ,k.On,ee.yH,re.Nt,k.Fj,ie.Hw,J.R9],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Z extends Oe{constructor(u){super(),this.gamedataService=u,this.allSpells=[],this.searchFilteredSpells=[],this.custom=!1}ngOnInit(){this.loadSpells(),(this.effect.dc||this.effect.attackBonus||this.effect.castingMod)&&(this.custom=!0)}onCustomChange(){this.custom||(this.effect.dc=void 0,this.effect.attackBonus=void 0,this.effect.castingMod=void 0)}onSpellSelectionChange(u){const l=u.value;this.effect.id=l.entity_id,this.spellToCast=l}updateSearchFilteredSpells(u){this.searchFilteredSpells=this.allSpells.filter(l=>l.name.toLowerCase().includes(u.toLowerCase()))}loadSpells(){this.gamedataService.getAllEntitlements().subscribe(u=>{if(u.success){const l=Array.from(u.data.values());this.allSpells=l.filter(m=>"spell"===m.entity_type),this.spellToCast=this.allSpells.find(m=>m.entity_id===this.effect.id),this.updateSearchFilteredSpells("")}})}}function $(C,u){1&C&&(e.TgZ(0,"mat-option",11),e._uU(1,"All"),e.qZA())}function te(C,u){1&C&&(e.TgZ(0,"mat-option",12),e._uU(1,"Position"),e.qZA())}function ge(C,u){1&C&&(e.TgZ(0,"mat-option",13),e._uU(1,"Parent"),e.qZA())}function Ze(C,u){1&C&&(e.TgZ(0,"mat-option",14),e._uU(1,"Children"),e.qZA())}function ot(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",15,16),e.NdJ("change",function(){e.CHM(l);const b=e.MAs(2);return e.oxw().onTargetPosChange(b)}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("value",l.effect.target.toString())}}function wt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"mat-label"),e._uU(2,"Sort Targets By"),e.qZA(),e.TgZ(3,"mat-select",2),e.NdJ("valueChange",function(b){e.CHM(l);return e.oxw().selectedTargetSort=b})("selectionChange",function(b){return e.CHM(l),e.oxw().onTargetSortChange(b)}),e.TgZ(4,"mat-option",18),e._uU(5,"User Input"),e.qZA(),e.TgZ(6,"mat-option",19),e._uU(7,"HP Ascending"),e.qZA(),e.TgZ(8,"mat-option",20),e._uU(9,"HP Descending"),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(3),e.Q6J("value",l.selectedTargetSort)}}Z.\u0275fac=function(u){return new(u||Z)(e.Y36(Ve.u))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["avr-spell-effect"]],features:[e.qOj],decls:26,vars:6,consts:[["anchor","cast-spell"],[1,"auto-row"],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always","matTooltip","If a level is not provided, this defaults to the spell's level."],["matInput","","placeholder","(default level)","type","number","min","0","max","9",3,"ngModel","ngModelChange"],["matTooltip","Whether to use the caster's default DC and attack modifier or the information defined here.",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",4,"ngIf"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline"],["fxFlex",""],["matInput","","placeholder","Parent","matTooltip","If supplied, sets the added effect's parent to the given effect. This must be the same as another IEffect's save_as.",1,"text-monospace",3,"ngModel","change","ngModelChange"],[3,"value"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["matInput","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],["matInput","","placeholder","Spell Attack Bonus",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Spellcasting Modifier",1,"text-monospace",3,"ngModel","change","ngModelChange"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Executes the given spell\u2019s automation as if it were immediately cast. Does not use a spell slot to cast the spell. This is usually used in features that cast spells using alternate resources. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"span"),e._uU(5,"Cast "),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Spell"),e.qZA(),e.TgZ(9,"mat-select",2),e.NdJ("selectionChange",function(b){return l.onSpellSelectionChange(b)}),e.TgZ(10,"mat-option")(11,"ngx-mat-select-search",3),e.NdJ("ngModelChange",function(b){return l.updateSearchFilteredSpells(b)}),e.qZA()(),e.YNc(12,E,2,2,"mat-option",4),e.qZA()(),e.TgZ(13,"span"),e._uU(14," at level "),e.qZA(),e.TgZ(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Spell Level"),e.qZA(),e.TgZ(18,"input",6),e.NdJ("ngModelChange",function(b){return l.effect.level=b}),e.qZA()()(),e.TgZ(19,"div")(20,"mat-checkbox",7),e.NdJ("ngModelChange",function(b){return l.custom=b})("change",function(){return l.onCustomChange(),l.changed.emit()}),e._uU(21," Override caster's spellcasting information "),e.qZA()(),e.YNc(22,P,13,3,"div",8),e.TgZ(23,"div",9)(24,"mat-form-field",10)(25,"input",11),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.parent=b}),e.qZA()()()),2&u&&(e.xp6(9),e.Q6J("value",l.spellToCast),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredSpells),e.xp6(6),e.Q6J("ngModel",l.effect.level),e.xp6(2),e.Q6J("ngModel",l.custom),e.xp6(2),e.Q6J("ngIf",l.custom),e.xp6(3),e.Q6J("ngModel",l.effect.parent))},directives:[ce,J.KE,J.hX,he.gD,Me.ey,dn.nu,k.JJ,k.On,Ce.sg,we.gM,re.Nt,k.qQ,k.Fd,k.wV,k.Fj,Le.oG,Ce.O5,ee.xw,ee.SQ,ee.Wh,ee.yH,ie.Hw,J.R9],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class xt extends Oe{constructor(){super(),this.selectedTarget="self",this.selectedTargetSort="user"}ngOnInit(){var u;this.selectedTarget=this.isNumber(this.effect.target)?"position":this.effect.target,this.selectedTargetSort=null!==(u=this.effect.sortBy)&&void 0!==u?u:"user"}isNumber(u){return"number"==typeof u}onTargetSelectChange(u){"position"===u.value?this.effect.target=1:this.effect.target=u.value,"self"===u.value&&(this.selectedTargetSort="user",this.effect.sortBy=void 0),this.changed.emit()}onTargetPosChange(u){this.effect.target=+u.value,this.changed.emit()}onTargetSortChange(u){"user"===u.value?this.effect.sortBy=void 0:this.effect.sortBy=u.value,this.changed.emit()}}function _t(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p",6),e._uU(2,"Spell Options"),e.qZA(),e.TgZ(3,"div",7)(4,"avr-higher-level",8),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA(),e.TgZ(5,"mat-checkbox",9),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.cantripScale=b})("change",function(){return e.CHM(l),e.oxw().changed.emit()}),e._uU(6," Scales like Cantrip "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("parent",l.effect)("spell",l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale)}}xt.\u0275fac=function(u){return new(u||xt)},xt.\u0275cmp=e.Xpm({type:xt,selectors:[["avr-target-effect"]],features:[e.qOj],decls:20,vars:7,consts:[["anchor","target"],["fxLayout","row","fxLayoutGap","6px",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","all",4,"ngIf"],["value","self"],["value","position",4,"ngIf"],["value","parent",4,"ngIf"],["value","children",4,"ngIf"],["value","each",2,"height","0"],[4,"ngIf"],["matTooltip","By default, targets are processed in the order the -t arguments are given.",4,"ngIf"],["value","all"],["value","position"],["value","parent"],["value","children"],["matInput","","placeholder","Target Position","type","number","min","1",3,"value","change"],["targetPosInput",""],["matTooltip","By default, targets are processed in the order the -t arguments are given."],["value","user"],["value","hp_asc"],["value","hp_desc"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Designates what creatures to affect. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Target"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.selectedTarget=b})("selectionChange",function(b){return l.onTargetSelectChange(b)}),e.YNc(8,$,2,0,"mat-option",3),e.TgZ(9,"mat-option",4),e._uU(10,"Caster"),e.qZA(),e.YNc(11,te,2,0,"mat-option",5),e.YNc(12,ge,2,0,"mat-option",6),e.YNc(13,Ze,2,0,"mat-option",7),e.TgZ(14,"mat-option",8),e._uU(15,"All"),e.qZA()()(),e.YNc(16,ot,3,1,"mat-form-field",9),e.YNc(17,wt,10,1,"mat-form-field",10),e.qZA(),e.TgZ(18,"p"),e._uU(19," Use the Effect Tree to edit the child effects!\n"),e.qZA()),2&u&&(e.xp6(7),e.Q6J("value",l.selectedTarget),e.xp6(1),e.Q6J("ngIf",!l.context.isIEffectButton),e.xp6(3),e.Q6J("ngIf",!l.context.isIEffectButton),e.xp6(1),e.Q6J("ngIf",l.context.isIEffect),e.xp6(1),e.Q6J("ngIf",l.context.isIEffect),e.xp6(3),e.Q6J("ngIf",l.isNumber(l.effect.target)),e.xp6(1),e.Q6J("ngIf","self"!==l.effect.target))},directives:[ce,ee.xw,ee.SQ,J.KE,J.hX,he.gD,Ce.O5,Me.ey,re.Nt,we.gM],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Qn extends Oe{constructor(){super()}ngOnInit(){}}function Tt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",5)(2,"textarea",8),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.text=b}),e._uU(3,"    "),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.text),e.xp6(3),e.Oqu("{ }")}}function Di(C,u){if(1&C&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function si(C,u){if(1&C&&(e.TgZ(0,"mat-optgroup",13),e.YNc(1,Di,2,2,"mat-option",14),e.qZA()),2&C){const l=u.$implicit;e.Q6J("label",l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function ai(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Referenced Ability"),e.qZA(),e.TgZ(4,"mat-select",10),e.NdJ("selectionChange",function(b){return e.CHM(l),e.oxw().onRefSelectionChange(b)}),e.TgZ(5,"mat-option")(6,"ngx-mat-select-search",11),e.NdJ("ngModelChange",function(b){return e.CHM(l),e.oxw().debouncedUpdateSearchFilteredGroupedRefs(b)}),e.qZA()(),e.YNc(7,si,2,2,"mat-optgroup",12),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("value",l.selectedAbilityRef),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredGroupedRefs)}}Qn.\u0275fac=function(u){return new(u||Qn)},Qn.\u0275cmp=e.Xpm({type:Qn,selectors:[["avr-temphp-effect"]],features:[e.qOj],decls:9,vars:3,consts:[["anchor","temphp"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Amount","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[4,"ngIf"],[1,"auto-label"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","left center"],[3,"parent","spell","changed"],[3,"ngModel","ngModelChange","change"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Sets the target's temp HP. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.amount=b}),e.qZA(),e.TgZ(6,"span",4),e._uU(7),e.qZA()()(),e.YNc(8,_t,7,3,"div",5)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.amount),e.xp6(2),e.Oqu("{ }"),e.xp6(1),e.Q6J("ngIf",null!=l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,re.Nt,k.Fj,k.Q7,k.JJ,k.On,J.R9,we.gM,Ce.O5,ht,Le.oG],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});const _i={text:"Display the text given below when the effect is run. This is the most common way to display an ability's effect.",ref:"Display the full description of a given feature."};class $n extends Oe{constructor(u){super(),this.gamedataService=u,this.TEXT_TYPE_HELPS=_i,this.textType="text",this.allRefs=[],this.searchFilteredGroupedRefs=[],this.debouncedUpdateSearchFilteredGroupedRefs=(0,Pt.debounce)(this.updateSearchFilteredGroupedRefs,500)}ngOnInit(){this.loadRefs(),"string"==typeof this.effect.text?this.textType="text":this.textType="ref"}onTextTypeChange(){"text"===this.textType?this.effect.text="":(this.effect.text={id:192,typeId:12168134},this.updateSelectedRef())}onRefSelectionChange(u){this.effect.text={id:u.value.entity_id,typeId:u.value.type_id},this.selectedAbilityRef=u.value}updateSearchFilteredGroupedRefs(u){let l=this.allRefs.filter(m=>m.name.toLowerCase().includes(u.toLowerCase()));this.searchFilteredGroupedRefs=Object.entries((0,Pt.groupBy)(l,m=>m.entity_type))}updateSelectedRef(){let u=this.effect.text;this.selectedAbilityRef=this.allRefs.find(l=>l.entity_id===u.id&&l.type_id===u.typeId)}loadRefs(){this.gamedataService.getDescribableEntities().subscribe(u=>{u.success&&(this.allRefs=u.data,this.updateSelectedRef(),this.updateSearchFilteredGroupedRefs(""))})}}function li(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p",7),e._uU(2,"Spell Options"),e.qZA(),e.TgZ(3,"div",12)(4,"avr-higher-level",13),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("parent",l.effect)("spell",l.spell)}}$n.\u0275fac=function(u){return new(u||$n)(e.Y36(Ve.u))},$n.\u0275cmp=e.Xpm({type:$n,selectors:[["avr-text-effect"]],features:[e.qOj],decls:21,vars:5,consts:[["anchor","text"],[3,"value","valueChange","selectionChange"],["value","text"],["value","ref"],["aria-hidden","false","aria-label","Text type help","inline","",3,"matTooltip"],[1,"is-fullwidth"],["matInput","","placeholder","Title",3,"ngModel","change","ngModelChange"],[4,"ngIf"],["matInput","","placeholder","Description","rows","10",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Outputs a short amount of text in the result embed. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Text Type"),e.qZA(),e.TgZ(7,"mat-select",1),e.NdJ("valueChange",function(b){return l.textType=b})("selectionChange",function(){return l.changed.emit(),l.onTextTypeChange()}),e.TgZ(8,"mat-option",2),e._uU(9," Text "),e.qZA(),e.TgZ(10,"mat-option",3),e._uU(11," Ability Reference "),e.qZA()()(),e.TgZ(12,"span")(13,"mat-icon",4),e._uU(14," help "),e.qZA()()(),e.TgZ(15,"div")(16,"mat-form-field",5)(17,"textarea",6),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.title=b}),e._uU(18,"    "),e.qZA()()(),e.YNc(19,Tt,6,2,"div",7),e.YNc(20,ai,8,2,"div",7)),2&u&&(e.xp6(7),e.Q6J("value",l.textType),e.xp6(6),e.Q6J("matTooltip",l.TEXT_TYPE_HELPS[l.textType]),e.xp6(4),e.Q6J("ngModel",l.effect.title),e.xp6(2),e.Q6J("ngIf","text"===l.textType),e.xp6(1),e.Q6J("ngIf","ref"===l.textType))},directives:[ce,J.KE,J.hX,he.gD,Me.ey,ie.Hw,we.gM,re.Nt,k.Fj,k.JJ,k.On,Ce.O5,J.R9,dn.nu,Ce.sg,Me.Nv],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Gn extends Oe{constructor(){super()}ngOnInit(){}}Gn.\u0275fac=function(u){return new(u||Gn)},Gn.\u0275cmp=e.Xpm({type:Gn,selectors:[["avr-variable-effect"]],features:[e.qOj],decls:20,vars:4,consts:[["anchor","set-variable"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],["fxFlex","1 3 auto"],["matInput","","placeholder","Name","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxFlex","3 1 auto"],["matInput","","placeholder","Value","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Error Value",1,"text-monospace",3,"ngModel","change","ngModelChange"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["fxFlex","",3,"parent","spell","changed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Saves the result of an IntExpression to a variable without displaying anything. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"span"),e._uU(7,"="),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"input",5),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.value=b}),e.qZA(),e.TgZ(10,"mat-icon",6),e._uU(11,"calculate "),e.qZA()()(),e.TgZ(12,"span",7),e._uU(13,"On Error"),e.qZA(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"input",10),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.onError=b}),e.qZA(),e.TgZ(17,"mat-icon",6),e._uU(18,"calculate "),e.qZA()()(),e.YNc(19,li,5,2,"div",11)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(4),e.Q6J("ngModel",l.effect.value),e.xp6(7),e.Q6J("ngModel",l.effect.onError),e.xp6(3),e.Q6J("ngIf",null!=l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,re.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,we.gM,Ce.O5,ht],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class rt{constructor(u,l,m,b){this.label=u,this.icon=l,this.tooltip=m,this._children=b,this.childrenSubject=new xe.X(b)}get children(){return this._children}set children(u){this._children=u,this.childrenSubject.next(u)}}class ki extends rt{constructor(u,l,m,b,H,ue){super(m,b,H,ue),this.effect=u,this.context=l}}class ci extends rt{constructor(u,l,m,b,H){super(l,m,b,H),this.context=u}}class No{constructor(u){this.context={ancestors:[]},this.childrenBuilders={target(l){return this.effectsToNodes(l.effects)},attack(l){return[new rt("Hit",void 0,void 0,this.effectsToNodes(l.hit)),new rt("Miss",void 0,void 0,this.effectsToNodes(l.miss))]},save(l){return[new rt("Fail",void 0,void 0,this.effectsToNodes(l.fail)),new rt("Success",void 0,void 0,this.effectsToNodes(l.success))]},ieffect2(l){var m,b;const H=[];for(const ue of null!==(m=l.attacks)&&void 0!==m?m:[])H.push(this.ieffect2AttackNode(ue));for(const ue of null!==(b=l.buttons)&&void 0!==b?b:[])H.push(this.ieffect2ButtonNode(ue));return H},condition(l){return[new rt("On True",void 0,void 0,this.effectsToNodes(l.onTrue)),new rt("On False",void 0,void 0,this.effectsToNodes(l.onFalse))]},check(l){var m,b,H,ue;return null!=l.dc?(l.success=null!==(m=l.success)&&void 0!==m?m:[],l.fail=null!==(b=l.fail)&&void 0!==b?b:[],[new rt("Success",void 0,void 0,this.effectsToNodes(l.success)),new rt("Fail",void 0,void 0,this.effectsToNodes(l.fail))]):null!=l.contestAbility?(l.success=null!==(H=l.success)&&void 0!==H?H:[],l.fail=null!==(ue=l.fail)&&void 0!==ue?ue:[],[new rt("Target Wins",void 0,void 0,this.effectsToNodes(l.success)),new rt("Caster Wins",void 0,void 0,this.effectsToNodes(l.fail))]):[]}},this.context.isSpell=u,this.effectTreeNodeMap=new WeakMap}effectsToNodes(u){let l=[];for(const m of u)l.push(this.effectToNode(m,u));return l.push(new ci(this.getContext(u),"Add Effect")),l}effectToNode(u,l){var m,b,H;const ue=this.effectTreeNodeMap.get(u),Ue=Zi[u.type];let Et,be;if(void 0===Ue?Et=new ki(u,this.getContext(l),"Unknown Node","help_outline","This node is not yet supported by the web builder."):(be=this.withContext({ancestors:[...this.context.ancestors,u]},()=>{var _e;return null===(_e=this.childrenBuilders[u.type])||void 0===_e?void 0:_e.call(this,u)}),Et=new ki(u,this.getContext(l),Ue.label||u.type,Ue.icon,Ue.tooltip,be)),ue){if("target"===u.type)ue.children=be;else if((null===(m=ue.children)||void 0===m?void 0:m.length)===(null==be?void 0:be.length))for(let _e=0;null!==(H=_e<(null===(b=ue.children)||void 0===b?void 0:b.length))&&void 0!==H&&H;_e++)ue.children[_e].label=be[_e].label,ue.children[_e].icon=be[_e].icon,ue.children[_e].tooltip=be[_e].tooltip,ue.children[_e].children=be[_e].children;else ue.children=be;return ue}return this.effectTreeNodeMap.set(u,Et),Et}getContext(u){var l,m,b,H;return{parentArray:u,ancestors:null!==(l=this.context.ancestors)&&void 0!==l?l:[],isSpell:null!==(m=this.context.isSpell)&&void 0!==m&&m,isIEffect:null!==(b=this.context.isIEffect)&&void 0!==b&&b,isIEffectButton:null!==(H=this.context.isIEffectButton)&&void 0!==H&&H}}withContext(u,l){const m=Object.assign({},this.context);Object.assign(this.context,u);const b=l();return this.context=m,b}ieffect2AttackNode(u){return this.ieffect2Node(u,`Action: ${u.attack.name}`,u.attack.automation,void 0,"Edit the parent Initiative Effect node to edit this attack!")}ieffect2ButtonNode(u){return this.withContext({isIEffectButton:!0},()=>this.ieffect2Node(u,`Button: ${u.label}`,u.automation,void 0,"Edit the parent Initiative Effect node to edit this button!"))}ieffect2Node(u,l,m,b,H){const ue=this.withContext({ancestors:[],isIEffect:!0},()=>this.effectsToNodes(m));return new rt(l,b,H,ue)}}const Zi={target:{label:"Target",icon:"my_location",component:xt},attack:{label:"Attack Roll",icon:"ddb:melee-attack",component:ct},save:{label:"Saving Throw",icon:"ddb:resistant",component:w},damage:{label:"Damage",icon:"ddb:force",component:$e},temphp:{label:"Temp HP",icon:"ddb:healing",component:Qn},ieffect:{label:"Initiative Effect (Legacy)",icon:"extension",component:An},ieffect2:{label:"Initiative Effect",icon:"extension",component:Sn},remove_ieffect:{label:"Remove Initiative Effect",icon:"extension_off",component:Qe},roll:{label:"Roll",icon:"ddb:digital-dice",component:N},text:{label:"Text",icon:"chat",component:$n},variable:{label:"Set Variable",icon:"code",component:Gn},condition:{label:"Branch",icon:"call_split",component:wn},counter:{label:"Use Counter",icon:"looks_one",component:bt},spell:{label:"Cast Spell",icon:"ddb:spells",component:Z},check:{label:"Ability Check",icon:"beenhere",component:le}};var Lo=Y(6623),Wn=Y(3338),Kn=Y(2796);function Ni(C,u){if(1&C&&e._UZ(0,"mat-icon",8),2&C){const l=e.oxw().$implicit,m=e.oxw(2);e.Q6J("svgIcon",m.getRuleIcon(l))}}function Ro(C,u){if(1&C&&(e.TgZ(0,"mat-icon"),e._uU(1),e.qZA()),2&C){const l=e.oxw().$implicit,m=e.oxw(2);e.xp6(1),e.Oqu(m.getRuleIcon(l))}}function Uo(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const H=e.CHM(l).$implicit;return e.oxw(2).addEffect(H.id)}),e.YNc(1,Ni,1,1,"mat-icon",6),e.YNc(2,Ro,2,1,"mat-icon",7),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&C){const l=u.$implicit,m=e.oxw(2);e.xp6(1),e.Q6J("ngIf",m.getRuleIcon(l)&&m.getRuleIcon(l).includes("ddb:")),e.xp6(1),e.Q6J("ngIf",m.getRuleIcon(l)&&!m.getRuleIcon(l).includes("ddb:")),e.xp6(2),e.Oqu(m.getRuleLabel(l))}}function qo(C,u){if(1&C&&(e.TgZ(0,"div")(1,"button",3)(2,"strong"),e._uU(3),e.qZA()(),e.YNc(4,Uo,5,3,"button",4),e.qZA()),2&C){const l=u.$implicit;e.xp6(3),e.Oqu(l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function Yt(C){return u=>u.ancestors.some(l=>l.type===C)}function jt(C){return u=>!Yt(C)(u)}const Li=[{id:"target",rules:[jt("target")]},{id:"attack",rules:[Yt("target")]},{id:"save",rules:[Yt("target")]},{id:"damage",rules:[Yt("target")]},{id:"temphp",rules:[Yt("target")]},{id:"ieffect2",rules:[Yt("target")]},{id:"remove_ieffect",rules:[C=>C.isIEffect]},{id:"roll",rules:[]},{id:"text",rules:[]},{id:"variable",rules:[]},{id:"condition",rules:[]},{id:"counter",rules:[]},{id:"spell",rules:[C=>0===C.ancestors.length,C=>!C.isSpell]},{id:"check",rules:[Yt("target")]},{id:"preset_atk_dmg",label:"Attack and Damage",group:"Presets",rules:[jt("target")]},{id:"preset_save_half",label:"Save for Half",group:"Presets",rules:[jt("target")]},{id:"preset_prone",label:"Prone Effect",group:"Presets",rules:[Yt("target")]},{id:"preset_save_to_end",label:"Save to Remove Condition",group:"Presets",rules:[Yt("target")]},{id:"preset_all_resistance",label:"Resistance to All Damage Types",group:"Presets",rules:[Yt("target")]},{id:"preset_recharge",label:"Monster Ability Recharge",group:"Presets",rules:[C=>0===C.ancestors.length]},{id:"preset_basic_dot",label:"Damage Over Time Effect",group:"Presets",rules:[Yt("target")]},{id:"preset_grapple",label:"Grapple Contest",group:"Presets",rules:[jt("target")]},{id:"preset_aura",label:"Basic Aura",group:"Presets",rules:[jt("target")]}];class On{constructor(){this.created=new e.vpe}ngOnInit(){const u=Li.filter(l=>l.rules.every(m=>m(this.context)));this.satisfiedRules=Object.entries((0,Pt.groupBy)(u,l=>{var m;return null!==(m=l.group)&&void 0!==m?m:"Effects"}))}getRuleIcon(u){var l,m,b;return null!==(b=null!==(l=u.icon)&&void 0!==l?l:null===(m=Zi[u.id])||void 0===m?void 0:m.icon)&&void 0!==b?b:null}getRuleLabel(u){var l,m,b;return null!==(b=null!==(l=u.label)&&void 0!==l?l:null===(m=Zi[u.id])||void 0===m?void 0:m.label)&&void 0!==b?b:u.id}addEffect(u){let l;switch(u){case"target":l={type:"target",target:this.context.isIEffectButton?"self":"all",effects:[]};break;case"attack":l={type:"attack",hit:[],miss:[]};break;case"save":l={type:"save",stat:"dex",fail:[],success:[]};break;case"damage":l={type:"damage",damage:""};break;case"temphp":l={type:"temphp",amount:""};break;case"ieffect2":l={type:"ieffect2",name:""};break;case"remove_ieffect":l={type:"remove_ieffect"};break;case"roll":l={type:"roll",dice:"",name:""};break;case"text":l={type:"text",text:""};break;case"variable":l={type:"variable",name:"",value:""};break;case"condition":l={type:"condition",condition:"",onTrue:[],onFalse:[]};break;case"counter":l={type:"counter",counter:"",amount:""};break;case"spell":l={type:"spell",id:2102};break;case"check":l={type:"check",ability:"athletics"};break;case"preset_atk_dmg":l=this.generateAttackAndDamagePreset();break;case"preset_save_half":return void this.doSaveForHalfPreset();case"preset_prone":l=this.generatePronePreset();break;case"preset_recharge":l=this.generateRechargePreset();break;case"preset_save_to_end":l=this.generateSaveToEndPreset();break;case"preset_basic_dot":l=this.generateBasicDOTPreset();break;case"preset_all_resistance":l=this.generateAllResistancePreset();break;case"preset_grapple":return void this.doGrapplePreset();case"preset_aura":return void this.doAuraPreset();default:return void console.error(`Unknown effect type to add: "${u}"`)}this.newEffect(l),this.created.emit()}newEffect(u){this.context.parentArray.push(u)}generateAttackAndDamagePreset(){return{type:"target",target:"each",effects:[{type:"attack",hit:[{type:"damage",damage:"1d10[fire]"}],miss:[]}]}}generatePronePreset(){return{type:"ieffect2",name:"Prone",effects:{attack_advantage:"-1"},desc:"A prone creature's only movement option is to crawl, unless it stands up and thereby ends the condition",buttons:[{label:"Stand Up",verb:"stands up",automation:[{type:"remove_ieffect"}]}]}}generateRechargePreset(){return{type:"target",target:"self",effects:[{type:"ieffect2",name:"&&& Used",buttons:[{label:"Recharge &&&",verb:"attempts to recharge their &&&",style:"3",automation:[{type:"roll",dice:"1d6",name:"recharge"},{type:"condition",condition:"int(recharge) >= 5",onTrue:[{type:"remove_ieffect"},{type:"text",text:"{{caster.name}} recharges their &&&!"}],onFalse:[{type:"text",text:"{{caster.name}} doesn't recharge their &&&!"}]}]}]}]}}generateSaveToEndPreset(){return{type:"ieffect2",name:"Condition",buttons:[{label:"Resist Condition",verb:"attempts to resist Condition",defaultDC:"lastSaveDC",automation:[{type:"target",target:"self",effects:[{type:"save",stat:"dex",success:[{type:"remove_ieffect",removeParent:"if_no_children"}],fail:[]}]}]}]}}generateBasicDOTPreset(){return{type:"ieffect2",name:"On Fire",desc:"Target takes 1d4 fire damage at the start of their turn\n - Can spend an action to douse the flames",buttons:[{label:"On Fire",verb:"is burned by the fire",style:"4",automation:[{type:"target",target:"self",effects:[{type:"damage",damage:"1d4 [fire]"}]}]},{label:"Douse Flame",verb:"spends their action putting out the fire",style:"3",automation:[{type:"remove_ieffect"}]}]}}generateAllResistancePreset(){return{type:"ieffect2",name:"Generic Resistance Effect",effects:{resistances:["bludgeoning","piercing","slashing","thunder","necrotic","fire","force","lightning","cold","poison","radiant","acid","psychic"]}}}doSaveForHalfPreset(){this.context.parentArray.push({type:"roll",dice:"8d6[fire]",name:"damage"},{type:"target",target:"all",effects:[{type:"save",stat:"dex",fail:[{type:"damage",damage:"{damage}"}],success:[{type:"damage",damage:"({damage})/2"}]}]}),this.created.emit()}doGrapplePreset(){this.context.parentArray.push({type:"target",target:1,effects:[{type:"check",ability:["acrobatics","athletics"],contestAbility:["athletics"],success:[],fail:[{type:"ieffect2",name:"Grappled",desc:"Grappled by {{caster.name}}",buttons:[{label:"Escape Grapple",verb:"attempts to break out of the grapple",style:"3",automation:[{type:"target",target:"children",effects:[{type:"check",ability:["athletics"],contestAbility:["acrobatics","athletics"],success:[],fail:[{type:"remove_ieffect"}],contestTie:"fail"}]}]}],save_as:"grapple"}],contestTie:"neither"}]},{type:"condition",condition:"not lastCheckDidPass",onTrue:[{type:"target",target:"self",effects:[{type:"ieffect2",name:"Grappling",desc:"Grappling {{targets[0].name if str(targets[0])!=targets[0] else targets[0]}}",buttons:[{label:"Release Grapple",verb:"lets go of their target",style:"1",automation:[{type:"remove_ieffect",removeParent:"always"}]}],parent:"grapple"}]}],onFalse:[],errorBehaviour:"false"}),this.created.emit()}doAuraPreset(){this.context.parentArray.push({type:"target",target:"self",effects:[{type:"ieffect2",name:"Aura",duration:"101",desc:"Affects allies within 30 feet of you",save_as:"aura",attacks:[{attack:{name:"Spread Aura",automation:[{type:"target",target:"each",effects:[{type:"ieffect2",name:"In the Aura",duration:"ieffect.remaining",desc:"Lasts while within 30 feet of {{caster.name}}",parent:"ieffect",buttons:[{label:"Leave Aura",verb:"leaves the range of the Aura",style:"4",automation:[{type:"remove_ieffect"}]}]}]}],_v:2,verb:"begins to",proper:!0}}]}]},{type:"target",target:"each",effects:[{type:"ieffect2",name:"In the Aura",duration:101,desc:"Lasts while within 30 feet of {{caster.name}}",parent:"aura",buttons:[{label:"Leave Aura",verb:"leaves the range of the Aura",style:"4",automation:[{type:"remove_ieffect"}]}]}]}),this.created.emit()}}On.\u0275fac=function(u){return new(u||On)},On.\u0275cmp=e.Xpm({type:On,selectors:[["avr-new-effect-button"]],inputs:{context:"context"},outputs:{created:"created"},decls:6,vars:2,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[3,"svgIcon",4,"ngIf"],[4,"ngIf"],[3,"svgIcon"]],template:function(u,l){if(1&u&&(e.TgZ(0,"button",0)(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"mat-menu",null,1),e.YNc(5,qo,5,2,"div",2),e.qZA()),2&u){const m=e.MAs(4);e.Q6J("matMenuTriggerFor",m),e.xp6(5),e.Q6J("ngForOf",l.satisfiedRules)}},directives:[It.lW,Kn.p6,ie.Hw,Kn.VK,Ce.sg,Kn.OP,Ce.O5],styles:[".ignore-theme{color:#fff}.editor-container.ignore-theme.hidden-tree{grid-template-columns:none}.editor-container{display:grid;grid-template-columns:auto 1fr;background:#182026;border-radius:4px;min-height:55vh}.editor-container>div{max-height:calc(100vh - 112px);overflow-y:scroll}.automation-tree{border-right:1px solid rgba(115,134,148,.3);padding:6px;min-width:200px}.tree-invisible{display:none}.tree-node{display:block;margin-top:4px}.tree-node-active{background:rgba(112,119,229,.2);border-radius:2px;padding-left:2px;margin-left:-2px}.tree-children-container{padding-left:12px;border-left:1px solid #738694}.automation-tree button[mat-icon-button]{font-size:20px;line-height:24px;width:24px;height:24px}.node-icon{font-size:16px;color:#738694}.node-editor{padding:6px}.edit-node{cursor:pointer;height:max}.editor-container div::-webkit-scrollbar{width:10px}.editor-container div::-webkit-scrollbar-thumb{background:rgba(102,102,102,.5);border-radius:20px}.editor-container div::-webkit-scrollbar-track{background:rgba(221,221,221,.1);border-radius:20px}\n"],encapsulation:2});var mi=Y(8595),Ri=Y(6269);function Ki(C,u){if(1&C&&(e.TgZ(0,"pre",6),e._uU(1),e.qZA()),2&C){const l=e.oxw(2);e.xp6(1),e.Oqu(l.error)}}function Yn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2," Good luck! Click the button below once you've edited the YAML to update the effect. "),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return e.CHM(l),e.oxw().updateEffectData()}),e._uU(4,"Update Effect Data"),e.qZA(),e.YNc(5,Ki,2,1,"pre",3),e.TgZ(6,"mat-form-field",4)(7,"textarea",5),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().editedYaml=b}),e._uU(8,"    "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(5),e.Q6J("ngIf",l.error),e.xp6(2),e.Q6J("ngModel",l.editedYaml)}}class jn extends Oe{constructor(){super(),this.userKnowsWhatTheyreDoing=!1}ngOnInit(){this.editedYaml=(0,Ri.Pz)(this.effect)}updateEffectData(){let u;this.error=null;try{u=(0,Ri.Qc)(this.editedYaml)}catch(m){return void(this.error=`Could not parse YAML: ${m}`)}const l=this.effectNode.context.parentArray.indexOf(this.effectNode.effect);this.effectNode.context.parentArray[l]=u,this.changed.emit(),this.treeChanged.emit(),this.deleted.emit()}}jn.\u0275fac=function(u){return new(u||jn)},jn.\u0275cmp=e.Xpm({type:jn,selectors:[["avr-unknown-effect"]],features:[e.qOj],decls:10,vars:2,consts:[[3,"ngModel","ngModelChange"],[4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["class","mat-error",4,"ngIf"],[1,"is-fullwidth","text-monospace"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"mat-error"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," This effect has not yet been implemented in the Automation Editor. Sorry about that!\n"),e.qZA(),e.TgZ(2,"p"),e._uU(3," If you know what you're doing, you can check below to edit this effect's YAML directly. "),e.TgZ(4,"em"),e._uU(5,"This can lead to automation corruption. Here be dragons."),e.qZA()(),e.TgZ(6,"p")(7,"mat-checkbox",0),e.NdJ("ngModelChange",function(b){return l.userKnowsWhatTheyreDoing=b}),e._uU(8,"I know what I'm doing"),e.qZA()(),e.YNc(9,Yn,9,2,"div",1)),2&u&&(e.xp6(7),e.Q6J("ngModel",l.userKnowsWhatTheyreDoing),e.xp6(2),e.Q6J("ngIf",l.userKnowsWhatTheyreDoing))},directives:[Le.oG,k.JJ,k.On,Ce.O5,It.lW,J.KE,re.Nt,k.Fj],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var _o=Y(9975);const Yi=function(C){return{"move-up":C}};function mo(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(l),e.oxw().moveUp()}),e.TgZ(1,"mat-icon",9),e._uU(2,"arrow_upward"),e.qZA()()}if(2&C){const l=e.oxw();e.Q6J("ngClass",e.VKq(1,Yi,l.isLast))}}function ji(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(l),e.oxw().moveDown()}),e.TgZ(1,"mat-icon",11),e._uU(2,"arrow_downward"),e.qZA()()}}function Fo(C,u){}function vo(C,u){if(1&C&&(e.TgZ(0,"div"),e._UZ(1,"mat-divider"),e.TgZ(2,"span",12),e._uU(3,"Debug Information"),e.qZA(),e._UZ(4,"pre",13),e.qZA()),2&C){const l=e.oxw();e.xp6(4),e.Q6J("innerHTML",l.effectYAML,e.oJD)}}class Mn{constructor(u){this.viewContainerRef=u}}Mn.\u0275fac=function(u){return new(u||Mn)(e.Y36(e.s_b))},Mn.\u0275dir=e.lG2({type:Mn,selectors:[["","effectHost",""]]});class Vt{constructor(){this.debugMode=!1,this.changed=new e.vpe,this.treeChanged=new e.vpe,this.deleted=new e.vpe}get isFirst(){return 0===this.effectNode.context.parentArray.indexOf(this.effectNode.effect)}get isLast(){return this.effectNode.context.parentArray.indexOf(this.effectNode.effect)===this.effectNode.context.parentArray.length-1}ngOnInit(){this.loadComponent()}ngOnChanges(u){this.loadComponent()}loadComponent(){var u,l;const m=null!==(l=null===(u=Zi[this.effectNode.effect.type])||void 0===u?void 0:u.component)&&void 0!==l?l:jn,b=this.effectEditorDirective.viewContainerRef;b.clear();const H=b.createComponent(m);H.instance.effectNode=this.effectNode,H.instance.spell=this.spell,H.instance.changed.subscribe(()=>{this.changed.emit()}),H.instance.treeChanged.subscribe(()=>{this.treeChanged.emit()}),H.instance.deleted.subscribe(()=>{this.deleted.emit()})}moveUp(){const u=this.effectNode.context.parentArray.indexOf(this.effectNode.effect),l=u-1;l>-1&&((0,mi.bA)(this.effectNode.context.parentArray,u,l),this.changed.emit(),this.treeChanged.emit())}moveDown(){const u=this.effectNode.context.parentArray.indexOf(this.effectNode.effect),l=u+1;l<this.effectNode.context.parentArray.length&&((0,mi.bA)(this.effectNode.context.parentArray,u,l),this.changed.emit(),this.treeChanged.emit())}delete(){const u=this.effectNode.context.parentArray.indexOf(this.effectNode.effect);u>-1&&(this.effectNode.context.parentArray.splice(u,1),this.changed.emit(),this.treeChanged.emit(),this.deleted.emit())}get effectYAML(){return(0,Ri.Pz)(this.effectNode.effect)}}function Pn(C,u){if(1&C&&e._UZ(0,"mat-icon",21),2&C){const l=e.oxw(2).$implicit;e.Q6J("svgIcon",l.icon)}}function Vn(C,u){if(1&C&&(e.TgZ(0,"mat-icon",22),e._uU(1),e.qZA()),2&C){const l=e.oxw(2).$implicit;e.xp6(1),e.Oqu(l.icon)}}function Vi(C,u){if(1&C&&(e.TgZ(0,"span")(1,"button",18),e.YNc(2,Pn,1,1,"mat-icon",19),e.YNc(3,Vn,2,1,"mat-icon",20),e.qZA()()),2&C){const l=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",l.icon.includes("ddb:")),e.xp6(1),e.Q6J("ngIf",!l.icon.includes("ddb:"))}}function vi(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span",23),e.NdJ("click",function(){e.CHM(l);const b=e.oxw().$implicit;return e.oxw(2).beginEditEffectNode(b)}),e._uU(1),e.TgZ(2,"button",24)(3,"mat-icon"),e._uU(4,"edit"),e.qZA()()()}if(2&C){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.label," ")}}function yo(C,u){if(1&C&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&C){const l=e.oxw().$implicit;e.xp6(1),e.hij(" ",l.label," ")}}function zi(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"avr-new-effect-button",25),e.NdJ("created",function(){e.CHM(l);const b=e.oxw().$implicit;return e.oxw(2).onNewEffectCreated(b)}),e.qZA()()}if(2&C){const l=e.oxw().$implicit;e.xp6(1),e.Q6J("context",l.context)}}function zn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"button",26),e.NdJ("click",function(b){e.CHM(l);const H=e.oxw().$implicit;return e.oxw(2).toggleNode(H,b)}),e.TgZ(2,"mat-icon"),e._uU(3),e.qZA()()()}if(2&C){const l=e.oxw().$implicit,m=e.oxw(2);e.xp6(3),e.hij(" ",m.treeControl.isExpanded(l)?"expand_more":"chevron_right"," ")}}function yi(C,u){if(1&C&&(e.TgZ(0,"cdk-nested-tree-node",13)(1,"span",14),e.YNc(2,Vi,4,2,"span",4),e.YNc(3,vi,5,1,"span",15),e.YNc(4,yo,2,1,"span",4),e.YNc(5,zi,2,1,"span",4),e.qZA(),e.YNc(6,zn,4,1,"span",4),e.TgZ(7,"div",16),e.GkF(8,17),e.qZA()()),2&C){const l=u.$implicit,m=e.oxw(2);e.ekj("tree-node-active",l===m.selectedEffectNode),e.xp6(1),e.Q6J("matTooltip",l.tooltip),e.xp6(1),e.Q6J("ngIf",l.icon),e.xp6(1),e.Q6J("ngIf",m.isEffectNode(l)),e.xp6(1),e.Q6J("ngIf",!m.isEffectNode(l)),e.xp6(1),e.Q6J("ngIf",m.isAddEffectNode(l)),e.xp6(1),e.Q6J("ngIf",m.hasChild(l)),e.xp6(1),e.ekj("tree-invisible",!m.treeControl.isExpanded(l))}}function Co(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"span",7),e._uU(3,"Effect Tree"),e.qZA(),e._UZ(4,"span",8),e.TgZ(5,"span")(6,"button",9),e.NdJ("click",function(){return e.CHM(l),e.oxw().treeControl.expandAll()}),e.TgZ(7,"mat-icon"),e._uU(8,"expand"),e.qZA()(),e.TgZ(9,"button",10),e.NdJ("click",function(){return e.CHM(l),e.oxw().treeControl.collapseAll()}),e.TgZ(10,"mat-icon"),e._uU(11,"compress"),e.qZA()()()(),e.TgZ(12,"cdk-tree",11),e.YNc(13,yi,9,10,"cdk-nested-tree-node",12),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(12),e.Q6J("dataSource",l.dataSource)("treeControl",l.treeControl)}}function bo(C,u){1&C&&(e.TgZ(0,"div")(1,"div",6)(2,"span",7),e._uU(3,"Node Editor"),e.qZA()(),e._uU(4," No node selected. Select an automation effect node from the Effect Tree to edit it! "),e.qZA())}function Bo(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"avr-effect-editor",27),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()})("treeChanged",function(){return e.CHM(l),e.oxw().refreshTree()})("deleted",function(){e.CHM(l);return e.oxw().selectedEffectNode=null}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("effectNode",l.selectedEffectNode)("spell",l.spell)("debugMode",l.debugMode)}}Vt.\u0275fac=function(u){return new(u||Vt)},Vt.\u0275cmp=e.Xpm({type:Vt,selectors:[["avr-effect-editor"]],viewQuery:function(u,l){if(1&u&&e.Gf(Mn,7),2&u){let m;e.iGM(m=e.CRH())&&(l.effectEditorDirective=m.first)}},inputs:{effectNode:"effectNode",spell:"spell",debugMode:"debugMode"},outputs:{changed:"changed",treeChanged:"treeChanged",deleted:"deleted"},features:[e.TTD],decls:10,vars:4,consts:[[1,"editor-header"],[1,"editor-header-text"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Move Up",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","matTooltip","Move Down",3,"click",4,"ngIf"],[3,"delete"],["effectHost",""],[4,"ngIf"],["mat-icon-button","","matTooltip","Move Up",3,"ngClass","click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"],[1,"auto-label"],[1,"text-monospace",3,"innerHTML"]],template:function(u,l){1&u&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.qZA(),e._UZ(3,"span",2),e.TgZ(4,"span"),e.YNc(5,mo,3,3,"button",3),e.YNc(6,ji,3,0,"button",4),e.TgZ(7,"avr-doubleclick-delete-button",5),e.NdJ("delete",function(){return l.delete()}),e.qZA()()(),e.YNc(8,Fo,0,0,"ng-template",6),e.YNc(9,vo,5,1,"div",7)),2&u&&(e.xp6(2),e.hij(" ",l.effectNode.label," "),e.xp6(3),e.Q6J("ngIf",!l.isFirst),e.xp6(1),e.Q6J("ngIf",!l.isLast),e.xp6(3),e.Q6J("ngIf",l.debugMode))},directives:[Ce.O5,It.lW,we.gM,Ce.mk,Wn.oO,ie.Hw,We,Mn,_o.d],styles:[".is-italics[_ngcontent-%COMP%]{font-style:italic}.move-up[_ngcontent-%COMP%]{margin-right:24px}\n/*# sourceMappingURL=effect-editor.component.css.map*/",".editor-header[_ngcontent-%COMP%]{display:flex;padding-bottom:6px;border-bottom:1px solid rgba(115,134,148,.3)}.editor-header[_ngcontent-%COMP%]   .editor-header-text[_ngcontent-%COMP%]{font-weight:700;margin-right:8px}.editor-header[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.editor-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}",".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});const wo=function(C){return{"hidden-tree":C}};class pn{constructor(){this.debugMode=!1,this.changed=new e.vpe,this.treeControl=new U.VY(u=>u.childrenSubject),this.dataSource=new K.WX,this.showEffectTree=!0,this.hasChild=u=>!!u.children&&u.children.length>0,this.isEffectNode=u=>u instanceof ki,this.isAddEffectNode=u=>u instanceof ci}ngOnInit(){this.nodeBuilder=new No(!!this.spell),this.refreshTree()}ngOnChanges(u){this.refreshTree()}onNewEffectCreated(u){var l;this.refreshTree(),this.changed.emit();const m=u.context.parentArray[u.context.parentArray.length-1];this.selectedEffectNode=null!==(l=this.nodeBuilder.effectTreeNodeMap.get(m))&&void 0!==l?l:this.selectedEffectNode}refreshTree(){var u;this.dataSource.data=null===(u=this.nodeBuilder)||void 0===u?void 0:u.effectsToNodes(this.automation),this.treeControl.dataNodes=this.dataSource.data}toggleNode(u,l){l.metaKey||l.ctrlKey?this.treeControl.toggleDescendants(u):this.treeControl.toggle(u)}beginEditEffectNode(u){this.selectedEffectNode=u}toggleEffectTree(){this.showEffectTree=!this.showEffectTree}}pn.\u0275fac=function(u){return new(u||pn)},pn.\u0275cmp=e.Xpm({type:pn,selectors:[["avr-automation-editor"]],inputs:{automation:"automation",spell:"spell",debugMode:"debugMode"},outputs:{changed:"changed"},features:[e.TTD],decls:7,vars:6,consts:[["checked","",3,"change"],[1,"editor-container","ignore-theme",3,"ngClass"],["class","automation-tree",4,"ngIf"],[1,"node-editor"],[4,"ngIf"],[1,"automation-tree"],[1,"editor-header"],[1,"editor-header-text"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Expand All",3,"click"],["mat-icon-button","","matTooltip","Collapse All",3,"click"],[3,"dataSource","treeControl"],["class","tree-node",3,"tree-node-active",4,"cdkTreeNodeDef"],[1,"tree-node"],[3,"matTooltip"],["class","edit-node",3,"click",4,"ngIf"],[1,"tree-children-container"],["cdkTreeNodeOutlet",""],["mat-icon-button","","disabled",""],["class","node-icon",3,"svgIcon",4,"ngIf"],["class","node-icon",4,"ngIf"],[1,"node-icon",3,"svgIcon"],[1,"node-icon"],[1,"edit-node",3,"click"],["mat-icon-button",""],[3,"context","created"],["mat-icon-button","",3,"click"],[3,"effectNode","spell","debugMode","changed","treeChanged","deleted"]],template:function(u,l){1&u&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(){return l.toggleEffectTree()}),e._uU(1,"Show Effect Tree"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Co,14,2,"div",2),e.TgZ(4,"div",3),e.YNc(5,bo,5,0,"div",4),e.YNc(6,Bo,2,3,"div",4),e.qZA()()),2&u&&(e.xp6(2),e.Q6J("ngClass",e.VKq(4,wo,!l.showEffectTree)),e.xp6(1),e.Q6J("ngIf",l.showEffectTree),e.xp6(2),e.Q6J("ngIf",!l.selectedEffectNode),e.xp6(1),e.Q6J("ngIf",l.selectedEffectNode))},directives:[Lo.Rr,Ce.mk,Wn.oO,Ce.O5,It.lW,we.gM,ie.Hw,U._0,U.rO,U.Xx,On,U.cu,Vt],styles:[".ignore-theme[_ngcontent-%COMP%]{color:#fff}.editor-container.ignore-theme.hidden-tree[_ngcontent-%COMP%]{grid-template-columns:none}.editor-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;background:#182026;border-radius:4px;min-height:55vh}.editor-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:calc(100vh - 112px);overflow-y:scroll}.automation-tree[_ngcontent-%COMP%]{border-right:1px solid rgba(115,134,148,.3);padding:6px;min-width:200px}.tree-invisible[_ngcontent-%COMP%]{display:none}.tree-node[_ngcontent-%COMP%]{display:block;margin-top:4px}.tree-node-active[_ngcontent-%COMP%]{background:rgba(112,119,229,.2);border-radius:2px;padding-left:2px;margin-left:-2px}.tree-children-container[_ngcontent-%COMP%]{padding-left:12px;border-left:1px solid #738694}.automation-tree[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}.node-icon[_ngcontent-%COMP%]{font-size:16px;color:#738694}.node-editor[_ngcontent-%COMP%]{padding:6px}.edit-node[_ngcontent-%COMP%]{cursor:pointer;height:max}.editor-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.editor-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(102,102,102,.5);border-radius:20px}.editor-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(221,221,221,.1);border-radius:20px}",".editor-header[_ngcontent-%COMP%]{display:flex;padding-bottom:6px;border-bottom:1px solid rgba(115,134,148,.3)}.editor-header[_ngcontent-%COMP%]   .editor-header-text[_ngcontent-%COMP%]{font-weight:700;margin-right:8px}.editor-header[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.editor-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}"]})},4936:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{m:()=>Le});var U=Y(5758),e=Y(6269),K=Y(3184),xe=Y(4770),Oe=Y(4683),ce=Y(7317),ee=Y(89),Ce=Y(5590);class Le{constructor(k){this.data=k,this.jsonOrYaml="JSON",k.yaml?(this.jsonOrYaml="YAML",this.jsonData=(0,e.Pz)(this.data.data)):(this.jsonOrYaml="JSON",this.jsonData=JSON.stringify(this.data.data))}ngOnInit(){}copy(k){k.select(),document.execCommand("copy"),k.setSelectionRange(0,0)}}Le.\u0275fac=function(k){return new(k||Le)(K.Y36(U.WI))},Le.\u0275cmp=K.Xpm({type:Le,selectors:[["avr-json-export-dialog"]],decls:13,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[1,"text-monospace"],["matInput","","readonly","","rows","10",3,"value","placeholder"],["jsonElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(k,J){if(1&k){const re=K.EpF();K.TgZ(0,"h2",0),K._uU(1),K.qZA(),K.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"mat-form-field",3),K._UZ(5,"textarea",4,5),K.TgZ(7,"button",6),K.NdJ("click",function(){K.CHM(re);const he=K.MAs(6);return J.copy(he)}),K.TgZ(8,"mat-icon"),K._uU(9,"file_copy"),K.qZA()()()()(),K.TgZ(10,"mat-dialog-actions")(11,"button",7),K._uU(12,"Done"),K.qZA()()}2&k&&(K.xp6(1),K.AsE("",J.jsonOrYaml," - ",J.data.name,""),K.xp6(4),K.Q6J("value",J.jsonData)("placeholder",J.jsonOrYaml))},directives:[U.uh,U.xY,xe.KE,Oe.Nt,ce.lW,xe.R9,ee.gM,Ce.Hw,U.H8,U.ZT],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=json-export-dialog.component.css.map*/"]})},3538:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{Q:()=>J});var U=Y(5758),e=Y(6269),K=Y(3184),xe=Y(4770),Oe=Y(4683),ce=Y(587),ee=Y(6362),Ce=Y(7317),Le=Y(4742);function we(re,ie){if(1&re&&(K.TgZ(0,"mat-error"),K._UZ(1,"div",10),K.qZA()),2&re){const he=K.oxw();K.xp6(1),K.Q6J("innerHTML",he.error,K.oJD)}}function k(re,ie){1&re&&K._UZ(0,"mat-spinner",11),2&re&&K.Q6J("diameter",18)}class J{constructor(ie,he){this.dialogRef=ie,this.input=he,this.loading=!1,this.jsonOrYaml="JSON"}ngOnInit(){this.jsonOrYaml=this.input.yaml?"YAML":"JSON"}validateAndExit(){let ie;this.loading=!0,this.error=null;try{ie=this.input.yaml?(0,e.Qc)(this.data):JSON.parse(this.data)}catch(he){return this.error="Invalid data format",void(this.loading=!1)}this.input.validator?this.input.validator(ie):this.dialogRef.close(ie)}}J.\u0275fac=function(ie){return new(ie||J)(K.Y36(U.so),K.Y36(U.WI))},J.\u0275cmp=K.Xpm({type:J,selectors:[["avr-json-import-dialog"]],decls:20,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography",3,"keydown.control.enter","keydown.meta.enter"],[1,"mat-small"],[1,"form-container"],[1,"text-monospace"],["matInput","","rows","10",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],[3,"diameter",4,"ngIf"],[3,"innerHTML"],[3,"diameter"]],template:function(ie,he){1&ie&&(K.TgZ(0,"h2",0),K._uU(1),K.qZA(),K.TgZ(2,"mat-dialog-content",1),K.NdJ("keydown.control.enter",function(){return he.validateAndExit()})("keydown.meta.enter",function(){return he.validateAndExit()}),K.TgZ(3,"p"),K._uU(4),K.qZA(),K.TgZ(5,"span",2),K._uU(6,"You can use "),K.TgZ(7,"kbd"),K._uU(8,"Ctrl-Enter"),K.qZA(),K._uU(9," to save changes."),K.qZA(),K.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"textarea",5),K.NdJ("ngModelChange",function(lt){return he.data=lt}),K.qZA()()(),K.YNc(13,we,2,1,"mat-error",6),K.qZA(),K.TgZ(14,"mat-dialog-actions")(15,"button",7),K._uU(16,"Cancel"),K.qZA(),K.TgZ(17,"button",8),K.NdJ("click",function(){return he.validateAndExit()}),K._uU(18," Import "),K.qZA(),K.YNc(19,k,1,1,"mat-spinner",9),K.qZA()),2&ie&&(K.xp6(1),K.hij("Importing from ",he.jsonOrYaml,"..."),K.xp6(3),K.hij(" Paste your ",he.jsonOrYaml," here. This should be either an object or list exported from this site. "),K.xp6(8),K.Q6J("placeholder",he.jsonOrYaml)("ngModel",he.data),K.xp6(1),K.Q6J("ngIf",he.error),K.xp6(6),K.Q6J("ngIf",he.loading))},directives:[U.uh,U.xY,xe.KE,Oe.Nt,ce.Fj,ce.JJ,ce.On,ee.O5,xe.TO,U.H8,Ce.lW,U.ZT,Le.Ou],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}  .validation-error-header,   .validation-error-list{margin:0}  .validation-error-item{margin:12px 0 0!important}\n/*# sourceMappingURL=json-import-dialog.component.css.map*/"]})},7963:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{u:()=>we});var U=Y(4139),e=Y(6942),K=Y(4043),xe=Y(7418),Oe=Y(4766),ce=Y(6488),ee=Y(3184),Ce=Y(8784);const Le=`${Oe.N.apiURL}/gamedata`;class we{constructor(J){this.http=J}getEntitlements(){if(this.entitlements)return this.entitlements;const J=this.http.get(`${Le}/entitlements`,(0,ce.vC)()).pipe((0,e.U)(re=>(re.success&&(re.data=new Map(Object.entries(re.data))),re))).pipe((0,K.B)()).pipe((0,xe.K)(ce.Vm));return this.entitlements=J,J.subscribe(re=>this.entitlements=(0,U.of)(re)),J}getAllEntitlements(){if(this.allEntitlements)return this.allEntitlements;const J=this.http.get(`${Le}/entitlements?free=true`,(0,ce.vC)()).pipe((0,e.U)(re=>(re.success&&(re.data=new Map(Object.entries(re.data))),re))).pipe((0,K.B)()).pipe((0,xe.K)(ce.Vm));return this.allEntitlements=J,J.subscribe(re=>this.allEntitlements=(0,U.of)(re)),J}getLimitedUse(){if(this.limitedUse)return this.limitedUse;const J=this.http.get(`${Le}/limiteduse`,(0,ce.vC)()).pipe((0,K.B)()).pipe((0,xe.K)(ce.Vm));return this.limitedUse=J,J.subscribe(re=>this.limitedUse=(0,U.of)(re)),J}getDescribableEntities(){if(this.describableEntities)return this.describableEntities;const J=this.http.get(`${Le}/describable`,(0,ce.vC)()).pipe((0,K.B)()).pipe((0,xe.K)(ce.Vm));return this.describableEntities=J,J.subscribe(re=>this.describableEntities=(0,U.of)(re)),J}entityFromEntitlement(J,re,ie=!1){return(ie?this.getAllEntitlements():this.getEntitlements()).pipe((0,e.U)(Me=>{if(Me.success){const lt=Me.data.get(`${J}-${re.toString()}`);if(lt)return lt}return null}))}}we.\u0275fac=function(J){return new(J||we)(ee.LFG(Ce.eN))},we.\u0275prov=ee.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"})},2938:function(fn,Ot,Y){var U;fn=Y.nmd(fn),function(){var e,ce="Expected a function",Ce="__lodash_hash_undefined__",we="__lodash_placeholder__",ft=128,Gt=1/0,le=9007199254740991,Ve=4294967295,qn=[["ary",ft],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ut="[object Arguments]",Tn="[object Array]",bt="[object Boolean]",ze="[object Date]",Dt="[object Error]",Fn="[object Function]",kt="[object GeneratorFunction]",dt="[object Map]",ht="[object Number]",$e="[object Object]",ii="[object Promise]",Xe="[object RegExp]",Re="[object Set]",pt="[object String]",qt="[object Symbol]",Ke="[object WeakMap]",We="[object ArrayBuffer]",Wt="[object DataView]",Jn="[object Float32Array]",Kt="[object Float64Array]",oi="[object Int8Array]",ri="[object Int16Array]",nt="[object Int32Array]",Hn="[object Uint8Array]",gt="[object Uint8ClampedArray]",Zt="[object Uint16Array]",Ye="[object Uint32Array]",Ii=/\b__p \+= '';/g,Ft=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,it=/&(?:amp|lt|gt|quot|#39);/g,Sn=/[&<>"']/g,Qe=RegExp(it.source),on=RegExp(Sn.source),N=/<%-([\s\S]+?)%>/g,d=/<%([\s\S]+?)%>/g,_=/<%=([\s\S]+?)%>/g,w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,$=RegExp(Z.source),te=/^\s+/,ge=/\s/,Ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,wt=/,? & /,xt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/[()=,{}\[\]\/\s]/,Qn=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Di=/\w*$/,si=/^[-+]0x[0-9a-f]+$/i,ai=/^0b[01]+$/i,_i=/^\[object .+?Constructor\]$/,$n=/^0o[0-7]+$/i,li=/^(?:0|[1-9]\d*)$/,Gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rt=/($^)/,ki=/['\n\r\u2028\u2029\\]/g,ci="\\ud800-\\udfff",Wn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kn="\\u2700-\\u27bf",Ni="a-z\\xdf-\\xf6\\xf8-\\xff",jt="A-Z\\xc0-\\xd6\\xd8-\\xde",Li="\\ufe0e\\ufe0f",On="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mi="['\u2019]",Ri="["+ci+"]",Ki="["+On+"]",Yn="["+Wn+"]",jn="\\d+",_o="["+Kn+"]",Yi="["+Ni+"]",mo="[^"+ci+On+jn+Kn+Ni+jt+"]",ji="\\ud83c[\\udffb-\\udfff]",vo="[^"+ci+"]",Mn="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+jt+"]",Vi="(?:"+Yi+"|"+mo+")",vi="(?:"+Pn+"|"+mo+")",yo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",zi="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",zn="(?:"+Yn+"|"+ji+")"+"?",yi="["+Li+"]?",wo=yi+zn+("(?:\\u200d(?:"+[vo,Mn,Vt].join("|")+")"+yi+zn+")*"),pn="(?:"+[_o,Mn,Vt].join("|")+")"+wo,C="(?:"+[vo+Yn+"?",Yn,Mn,Vt,Ri].join("|")+")",u=RegExp(mi,"g"),l=RegExp(Yn,"g"),m=RegExp(ji+"(?="+ji+")|"+C+wo,"g"),b=RegExp([Pn+"?"+Yi+"+"+yo+"(?="+[Ki,Pn,"$"].join("|")+")",vi+"+"+zi+"(?="+[Ki,Pn+Vi,"$"].join("|")+")",Pn+"?"+Vi+"+"+yo,Pn+"+"+zi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jn,pn].join("|"),"g"),H=RegExp("[\\u200d"+ci+Wn+Li+"]"),ue=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ue=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Et=-1,be={};be[Jn]=be[Kt]=be[oi]=be[ri]=be[nt]=be[Hn]=be[gt]=be[Zt]=be[Ye]=!0,be[Ut]=be[Tn]=be[We]=be[bt]=be[Wt]=be[ze]=be[Dt]=be[Fn]=be[dt]=be[ht]=be[$e]=be[Xe]=be[Re]=be[pt]=be[Ke]=!1;var _e={};_e[Ut]=_e[Tn]=_e[We]=_e[Wt]=_e[bt]=_e[ze]=_e[Jn]=_e[Kt]=_e[oi]=_e[ri]=_e[nt]=_e[dt]=_e[ht]=_e[$e]=_e[Xe]=_e[Re]=_e[pt]=_e[qt]=_e[Hn]=_e[gt]=_e[Zt]=_e[Ye]=!0,_e[Dt]=_e[Fn]=_e[Ke]=!1;var to={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},no=parseFloat,es=parseInt,ur="object"==typeof global&&global&&global.Object===Object&&global,ts="object"==typeof self&&self&&self.Object===Object&&self,mt=ur||ts||Function("return this")(),Jo=Ot&&!Ot.nodeType&&Ot,Ui=Jo&&fn&&!fn.nodeType&&fn,dr=Ui&&Ui.exports===Jo,Ho=dr&&ur.process,At=function(){try{return Ui&&Ui.require&&Ui.require("util").types||Ho&&Ho.binding&&Ho.binding("util")}catch(R){}}(),Qo=At&&At.isArrayBuffer,hr=At&&At.isDate,ns=At&&At.isMap,is=At&&At.isRegExp,os=At&&At.isSet,pr=At&&At.isTypedArray;function Bt(O,R,D){switch(D.length){case 0:return O.call(R);case 1:return O.call(R,D[0]);case 2:return O.call(R,D[0],D[1]);case 3:return O.call(R,D[0],D[1],D[2])}return O.apply(R,D)}function $o(O,R,D,ne){for(var Te=-1,Ne=null==O?0:O.length;++Te<Ne;){var vt=O[Te];R(ne,vt,D(vt),O)}return ne}function Jt(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne&&!1!==R(O[D],D,O););return O}function rs(O,R){for(var D=null==O?0:O.length;D--&&!1!==R(O[D],D,O););return O}function Go(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne;)if(!R(O[D],D,O))return!1;return!0}function zt(O,R){for(var D=-1,ne=null==O?0:O.length,Te=0,Ne=[];++D<ne;){var vt=O[D];R(vt,D,O)&&(Ne[Te++]=vt)}return Ne}function io(O,R){return!!(null==O?0:O.length)&&fi(O,R,0)>-1}function oo(O,R,D){for(var ne=-1,Te=null==O?0:O.length;++ne<Te;)if(D(R,O[ne]))return!0;return!1}function Je(O,R){for(var D=-1,ne=null==O?0:O.length,Te=Array(ne);++D<ne;)Te[D]=R(O[D],D,O);return Te}function In(O,R){for(var D=-1,ne=R.length,Te=O.length;++D<ne;)O[Te+D]=R[D];return O}function qi(O,R,D,ne){var Te=-1,Ne=null==O?0:O.length;for(ne&&Ne&&(D=O[++Te]);++Te<Ne;)D=R(D,O[Te],Te,O);return D}function oa(O,R,D,ne){var Te=null==O?0:O.length;for(ne&&Te&&(D=O[--Te]);Te--;)D=R(D,O[Te],Te,O);return D}function gr(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne;)if(R(O[D],D,O))return!0;return!1}var ra=Eo("length");function Wo(O,R,D){var ne;return D(O,function(Te,Ne,vt){if(R(Te,Ne,vt))return ne=Ne,!1}),ne}function xo(O,R,D,ne){for(var Te=O.length,Ne=D+(ne?1:-1);ne?Ne--:++Ne<Te;)if(R(O[Ne],Ne,O))return Ne;return-1}function fi(O,R,D){return R==R?function pe(O,R,D){for(var ne=D-1,Te=O.length;++ne<Te;)if(O[ne]===R)return ne;return-1}(O,R,D):xo(O,gn,D)}function as(O,R,D,ne){for(var Te=D-1,Ne=O.length;++Te<Ne;)if(ne(O[Te],R))return Te;return-1}function gn(O){return O!=O}function To(O,R){var D=null==O?0:O.length;return D?Ko(O,R)/D:NaN}function Eo(O){return function(R){return null==R?e:R[O]}}function Fi(O){return function(R){return null==O?e:O[R]}}function Bi(O,R,D,ne,Te){return Te(O,function(Ne,vt,He){D=ne?(ne=!1,Ne):R(D,Ne,vt,He)}),D}function Ko(O,R){for(var D,ne=-1,Te=O.length;++ne<Te;){var Ne=R(O[ne]);Ne!==e&&(D=D===e?Ne:D+Ne)}return D}function Yo(O,R){for(var D=-1,ne=Array(O);++D<O;)ne[D]=R(D);return ne}function ls(O){return O&&O.slice(0,fe(O)+1).replace(te,"")}function Xt(O){return function(R){return O(R)}}function jo(O,R){return Je(R,function(D){return O[D]})}function ro(O,R){return O.has(R)}function cs(O,R){for(var D=-1,ne=O.length;++D<ne&&fi(R,O[D],0)>-1;);return D}function s(O,R){for(var D=O.length;D--&&fi(R,O[D],0)>-1;);return D}function i(O,R){for(var D=O.length,ne=0;D--;)O[D]===R&&++ne;return ne}var r=Fi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),a=Fi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function c(O){return"\\"+to[O]}function g(O){return H.test(O)}function I(O){var R=-1,D=Array(O.size);return O.forEach(function(ne,Te){D[++R]=[Te,ne]}),D}function L(O,R){return function(D){return O(R(D))}}function Q(O,R){for(var D=-1,ne=O.length,Te=0,Ne=[];++D<ne;){var vt=O[D];(vt===R||vt===we)&&(O[D]=we,Ne[Te++]=D)}return Ne}function F(O){var R=-1,D=Array(O.size);return O.forEach(function(ne){D[++R]=ne}),D}function z(O){return g(O)?function se(O){for(var R=m.lastIndex=0;m.test(O);)++R;return R}(O):ra(O)}function V(O){return g(O)?function oe(O){return O.match(m)||[]}(O):function ss(O){return O.split("")}(O)}function fe(O){for(var R=O.length;R--&&ge.test(O.charAt(R)););return R}var de=Fi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Nt=function O(R){var t,D=(R=null==R?mt:Nt.defaults(mt.Object(),R,Nt.pick(mt,Ue))).Array,ne=R.Date,Te=R.Error,Ne=R.Function,vt=R.Math,He=R.Object,fs=R.RegExp,Yl=R.String,Dn=R.TypeError,vr=D.prototype,jl=Ne.prototype,Ao=He.prototype,yr=R["__core-js_shared__"],Cr=jl.toString,Be=Ao.hasOwnProperty,Vl=0,sa=(t=/[^.]+$/.exec(yr&&yr.keys&&yr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",br=Ao.toString,zl=Cr.call(He),Xl=mt._,ec=fs("^"+Cr.call(Be).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wr=dr?R.Buffer:e,Ji=R.Symbol,xr=R.Uint8Array,aa=wr?wr.allocUnsafe:e,Tr=L(He.getPrototypeOf,He),la=He.create,ca=Ao.propertyIsEnumerable,Er=vr.splice,fa=Ji?Ji.isConcatSpreadable:e,Vo=Ji?Ji.iterator:e,so=Ji?Ji.toStringTag:e,Ar=function(){try{var t=uo(He,"defineProperty");return t({},"",{}),t}catch(n){}}(),tc=R.clearTimeout!==mt.clearTimeout&&R.clearTimeout,nc=ne&&ne.now!==mt.Date.now&&ne.now,ic=R.setTimeout!==mt.setTimeout&&R.setTimeout,Sr=vt.ceil,Or=vt.floor,us=He.getOwnPropertySymbols,oc=wr?wr.isBuffer:e,ua=R.isFinite,rc=vr.join,sc=L(He.keys,He),yt=vt.max,Ht=vt.min,ac=ne.now,lc=R.parseInt,da=vt.random,cc=vr.reverse,ds=uo(R,"DataView"),zo=uo(R,"Map"),hs=uo(R,"Promise"),So=uo(R,"Set"),Xo=uo(R,"WeakMap"),er=uo(He,"create"),Mr=Xo&&new Xo,Oo={},fc=ho(ds),uc=ho(zo),dc=ho(hs),hc=ho(So),pc=ho(Xo),Pr=Ji?Ji.prototype:e,tr=Pr?Pr.valueOf:e,ha=Pr?Pr.toString:e;function v(t){if(et(t)&&!Ee(t)&&!(t instanceof De)){if(t instanceof kn)return t;if(Be.call(t,"__wrapped__"))return pl(t)}return new kn(t)}var Mo=function(){function t(){}return function(n){if(!je(n))return{};if(la)return la(n);t.prototype=n;var o=new t;return t.prototype=e,o}}();function Ir(){}function kn(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function De(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function ao(t){var n=-1,o=null==t?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function bi(t){var n=-1,o=null==t?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function wi(t){var n=-1,o=null==t?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function lo(t){var n=-1,o=null==t?0:t.length;for(this.__data__=new wi;++n<o;)this.add(t[n])}function Xn(t){var n=this.__data__=new bi(t);this.size=n.size}function pa(t,n){var o=Ee(t),f=!o&&po(t),p=!o&&!f&&Wi(t),y=!o&&!f&&!p&&ko(t),T=o||f||p||y,S=T?Yo(t.length,Yl):[],M=S.length;for(var q in t)(n||Be.call(t,q))&&(!T||!("length"==q||p&&("offset"==q||"parent"==q)||y&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||Ai(q,M)))&&S.push(q);return S}function ga(t){var n=t.length;return n?t[Ts(0,n-1)]:e}function Fc(t,n){return $r(sn(t),co(n,0,t.length))}function Bc(t){return $r(sn(t))}function ps(t,n,o){(o!==e&&!ei(t[n],o)||o===e&&!(n in t))&&xi(t,n,o)}function nr(t,n,o){var f=t[n];(!Be.call(t,n)||!ei(f,o)||o===e&&!(n in t))&&xi(t,n,o)}function Dr(t,n){for(var o=t.length;o--;)if(ei(t[o][0],n))return o;return-1}function Jc(t,n,o,f){return Hi(t,function(p,y,T){n(f,p,o(p),T)}),f}function _a(t,n){return t&&hi(n,St(n),t)}function xi(t,n,o){"__proto__"==n&&Ar?Ar(t,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[n]=o}function gs(t,n){for(var o=-1,f=n.length,p=D(f),y=null==t;++o<f;)p[o]=y?e:Ys(t,n[o]);return p}function co(t,n,o){return t==t&&(o!==e&&(t=t<=o?t:o),n!==e&&(t=t>=n?t:n)),t}function Zn(t,n,o,f,p,y){var T,S=1&n,M=2&n,q=4&n;if(o&&(T=p?o(t,f,p,y):o(t)),T!==e)return T;if(!je(t))return t;var B=Ee(t);if(B){if(T=function Df(t){var n=t.length,o=new t.constructor(n);return n&&"string"==typeof t[0]&&Be.call(t,"index")&&(o.index=t.index,o.input=t.input),o}(t),!S)return sn(t,T)}else{var W=Qt(t),X=W==Fn||W==kt;if(Wi(t))return Fa(t,S);if(W==$e||W==Ut||X&&!p){if(T=M||X?{}:rl(t),!S)return M?function bf(t,n){return hi(t,il(t),n)}(t,function Hc(t,n){return t&&hi(n,ln(n),t)}(T,t)):function Cf(t,n){return hi(t,Us(t),n)}(t,_a(T,t))}else{if(!_e[W])return p?t:{};T=function kf(t,n,o){var f=t.constructor;switch(n){case We:return Is(t);case bt:case ze:return new f(+t);case Wt:return function _f(t,n){var o=n?Is(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}(t,o);case Jn:case Kt:case oi:case ri:case nt:case Hn:case gt:case Zt:case Ye:return Ba(t,o);case dt:return new f;case ht:case pt:return new f(t);case Xe:return function mf(t){var n=new t.constructor(t.source,Di.exec(t));return n.lastIndex=t.lastIndex,n}(t);case Re:return new f;case qt:return function vf(t){return tr?He(tr.call(t)):{}}(t)}}(t,W,S)}}y||(y=new Xn);var ae=y.get(t);if(ae)return ae;y.set(t,T),Zl(t)?t.forEach(function(ye){T.add(Zn(ye,n,o,ye,t,y))}):Dl(t)&&t.forEach(function(ye,Ie){T.set(Ie,Zn(ye,n,o,Ie,t,y))});var Se=B?e:(q?M?Ns:Zs:M?ln:St)(t);return Jt(Se||t,function(ye,Ie){Se&&(ye=t[Ie=ye]),nr(T,Ie,Zn(ye,n,o,Ie,t,y))}),T}function ma(t,n,o){var f=o.length;if(null==t)return!f;for(t=He(t);f--;){var p=o[f],y=n[p],T=t[p];if(T===e&&!(p in t)||!y(T))return!1}return!0}function va(t,n,o){if("function"!=typeof t)throw new Dn(ce);return cr(function(){t.apply(e,o)},n)}function ir(t,n,o,f){var p=-1,y=io,T=!0,S=t.length,M=[],q=n.length;if(!S)return M;o&&(n=Je(n,Xt(o))),f?(y=oo,T=!1):n.length>=200&&(y=ro,T=!1,n=new lo(n));e:for(;++p<S;){var B=t[p],W=null==o?B:o(B);if(B=f||0!==B?B:0,T&&W==W){for(var X=q;X--;)if(n[X]===W)continue e;M.push(B)}else y(n,W,f)||M.push(B)}return M}v.templateSettings={escape:N,evaluate:d,interpolate:_,variable:"",imports:{_:v}},v.prototype=Ir.prototype,v.prototype.constructor=v,kn.prototype=Mo(Ir.prototype),kn.prototype.constructor=kn,De.prototype=Mo(Ir.prototype),De.prototype.constructor=De,ao.prototype.clear=function vc(){this.__data__=er?er(null):{},this.size=0},ao.prototype.delete=function yc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},ao.prototype.get=function Cc(t){var n=this.__data__;if(er){var o=n[t];return o===Ce?e:o}return Be.call(n,t)?n[t]:e},ao.prototype.has=function bc(t){var n=this.__data__;return er?n[t]!==e:Be.call(n,t)},ao.prototype.set=function wc(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=er&&n===e?Ce:n,this},bi.prototype.clear=function xc(){this.__data__=[],this.size=0},bi.prototype.delete=function Tc(t){var n=this.__data__,o=Dr(n,t);return!(o<0)&&(o==n.length-1?n.pop():Er.call(n,o,1),--this.size,!0)},bi.prototype.get=function Ec(t){var n=this.__data__,o=Dr(n,t);return o<0?e:n[o][1]},bi.prototype.has=function Ac(t){return Dr(this.__data__,t)>-1},bi.prototype.set=function Sc(t,n){var o=this.__data__,f=Dr(o,t);return f<0?(++this.size,o.push([t,n])):o[f][1]=n,this},wi.prototype.clear=function Oc(){this.size=0,this.__data__={hash:new ao,map:new(zo||bi),string:new ao}},wi.prototype.delete=function Mc(t){var n=Qr(this,t).delete(t);return this.size-=n?1:0,n},wi.prototype.get=function Pc(t){return Qr(this,t).get(t)},wi.prototype.has=function Ic(t){return Qr(this,t).has(t)},wi.prototype.set=function Dc(t,n){var o=Qr(this,t),f=o.size;return o.set(t,n),this.size+=o.size==f?0:1,this},lo.prototype.add=lo.prototype.push=function kc(t){return this.__data__.set(t,Ce),this},lo.prototype.has=function Zc(t){return this.__data__.has(t)},Xn.prototype.clear=function Nc(){this.__data__=new bi,this.size=0},Xn.prototype.delete=function Lc(t){var n=this.__data__,o=n.delete(t);return this.size=n.size,o},Xn.prototype.get=function Rc(t){return this.__data__.get(t)},Xn.prototype.has=function Uc(t){return this.__data__.has(t)},Xn.prototype.set=function qc(t,n){var o=this.__data__;if(o instanceof bi){var f=o.__data__;if(!zo||f.length<199)return f.push([t,n]),this.size=++o.size,this;o=this.__data__=new wi(f)}return o.set(t,n),this.size=o.size,this};var Hi=$a(di),ya=$a(ms,!0);function $c(t,n){var o=!0;return Hi(t,function(f,p,y){return o=!!n(f,p,y)}),o}function kr(t,n,o){for(var f=-1,p=t.length;++f<p;){var y=t[f],T=n(y);if(null!=T&&(S===e?T==T&&!mn(T):o(T,S)))var S=T,M=y}return M}function Ca(t,n){var o=[];return Hi(t,function(f,p,y){n(f,p,y)&&o.push(f)}),o}function Lt(t,n,o,f,p){var y=-1,T=t.length;for(o||(o=Nf),p||(p=[]);++y<T;){var S=t[y];n>0&&o(S)?n>1?Lt(S,n-1,o,f,p):In(p,S):f||(p[p.length]=S)}return p}var _s=Ga(),ba=Ga(!0);function di(t,n){return t&&_s(t,n,St)}function ms(t,n){return t&&ba(t,n,St)}function Zr(t,n){return zt(n,function(o){return Si(t[o])})}function fo(t,n){for(var o=0,f=(n=$i(n,t)).length;null!=t&&o<f;)t=t[pi(n[o++])];return o&&o==f?t:e}function wa(t,n,o){var f=n(t);return Ee(t)?f:In(f,o(t))}function en(t){return null==t?t===e?"[object Undefined]":"[object Null]":so&&so in He(t)?function Mf(t){var n=Be.call(t,so),o=t[so];try{t[so]=e;var f=!0}catch(y){}var p=br.call(t);return f&&(n?t[so]=o:delete t[so]),p}(t):function Jf(t){return br.call(t)}(t)}function vs(t,n){return t>n}function Wc(t,n){return null!=t&&Be.call(t,n)}function Kc(t,n){return null!=t&&n in He(t)}function ys(t,n,o){for(var f=o?oo:io,p=t[0].length,y=t.length,T=y,S=D(y),M=1/0,q=[];T--;){var B=t[T];T&&n&&(B=Je(B,Xt(n))),M=Ht(B.length,M),S[T]=!o&&(n||p>=120&&B.length>=120)?new lo(T&&B):e}B=t[0];var W=-1,X=S[0];e:for(;++W<p&&q.length<M;){var ae=B[W],ve=n?n(ae):ae;if(ae=o||0!==ae?ae:0,!(X?ro(X,ve):f(q,ve,o))){for(T=y;--T;){var Se=S[T];if(!(Se?ro(Se,ve):f(t[T],ve,o)))continue e}X&&X.push(ve),q.push(ae)}}return q}function or(t,n,o){var f=null==(t=cl(t,n=$i(n,t)))?t:t[pi(Ln(n))];return null==f?e:Bt(f,t,o)}function xa(t){return et(t)&&en(t)==Ut}function rr(t,n,o,f,p){return t===n||(null==t||null==n||!et(t)&&!et(n)?t!=t&&n!=n:function Xc(t,n,o,f,p,y){var T=Ee(t),S=Ee(n),M=T?Tn:Qt(t),q=S?Tn:Qt(n),B=(M=M==Ut?$e:M)==$e,W=(q=q==Ut?$e:q)==$e,X=M==q;if(X&&Wi(t)){if(!Wi(n))return!1;T=!0,B=!1}if(X&&!B)return y||(y=new Xn),T||ko(t)?nl(t,n,o,f,p,y):function Sf(t,n,o,f,p,y,T){switch(o){case Wt:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case We:return!(t.byteLength!=n.byteLength||!y(new xr(t),new xr(n)));case bt:case ze:case ht:return ei(+t,+n);case Dt:return t.name==n.name&&t.message==n.message;case Xe:case pt:return t==n+"";case dt:var S=I;case Re:var M=1&f;if(S||(S=F),t.size!=n.size&&!M)return!1;var q=T.get(t);if(q)return q==n;f|=2,T.set(t,n);var B=nl(S(t),S(n),f,p,y,T);return T.delete(t),B;case qt:if(tr)return tr.call(t)==tr.call(n)}return!1}(t,n,M,o,f,p,y);if(!(1&o)){var ae=B&&Be.call(t,"__wrapped__"),ve=W&&Be.call(n,"__wrapped__");if(ae||ve){var Se=ae?t.value():t,ye=ve?n.value():n;return y||(y=new Xn),p(Se,ye,o,f,y)}}return!!X&&(y||(y=new Xn),function Of(t,n,o,f,p,y){var T=1&o,S=Zs(t),M=S.length,B=Zs(n).length;if(M!=B&&!T)return!1;for(var W=M;W--;){var X=S[W];if(!(T?X in n:Be.call(n,X)))return!1}var ae=y.get(t),ve=y.get(n);if(ae&&ve)return ae==n&&ve==t;var Se=!0;y.set(t,n),y.set(n,t);for(var ye=T;++W<M;){var Ie=t[X=S[W]],ke=n[X];if(f)var vn=T?f(ke,Ie,X,n,t,y):f(Ie,ke,X,t,n,y);if(!(vn===e?Ie===ke||p(Ie,ke,o,f,y):vn)){Se=!1;break}ye||(ye="constructor"==X)}if(Se&&!ye){var nn=t.constructor,yn=n.constructor;nn!=yn&&"constructor"in t&&"constructor"in n&&!("function"==typeof nn&&nn instanceof nn&&"function"==typeof yn&&yn instanceof yn)&&(Se=!1)}return y.delete(t),y.delete(n),Se}(t,n,o,f,p,y))}(t,n,o,f,rr,p))}function Cs(t,n,o,f){var p=o.length,y=p,T=!f;if(null==t)return!y;for(t=He(t);p--;){var S=o[p];if(T&&S[2]?S[1]!==t[S[0]]:!(S[0]in t))return!1}for(;++p<y;){var M=(S=o[p])[0],q=t[M],B=S[1];if(T&&S[2]){if(q===e&&!(M in t))return!1}else{var W=new Xn;if(f)var X=f(q,B,M,t,n,W);if(!(X===e?rr(B,q,3,f,W):X))return!1}}return!0}function Ta(t){return!(!je(t)||function Rf(t){return!!sa&&sa in t}(t))&&(Si(t)?ec:_i).test(ho(t))}function Ea(t){return"function"==typeof t?t:null==t?cn:"object"==typeof t?Ee(t)?Oa(t[0],t[1]):Sa(t):Wl(t)}function bs(t){if(!lr(t))return sc(t);var n=[];for(var o in He(t))Be.call(t,o)&&"constructor"!=o&&n.push(o);return n}function rf(t){if(!je(t))return function Bf(t){var n=[];if(null!=t)for(var o in He(t))n.push(o);return n}(t);var n=lr(t),o=[];for(var f in t)"constructor"==f&&(n||!Be.call(t,f))||o.push(f);return o}function ws(t,n){return t<n}function Aa(t,n){var o=-1,f=an(t)?D(t.length):[];return Hi(t,function(p,y,T){f[++o]=n(p,y,T)}),f}function Sa(t){var n=Rs(t);return 1==n.length&&n[0][2]?al(n[0][0],n[0][1]):function(o){return o===t||Cs(o,t,n)}}function Oa(t,n){return qs(t)&&sl(n)?al(pi(t),n):function(o){var f=Ys(o,t);return f===e&&f===n?js(o,t):rr(n,f,3)}}function Nr(t,n,o,f,p){t!==n&&_s(n,function(y,T){if(p||(p=new Xn),je(y))!function sf(t,n,o,f,p,y,T){var S=Bs(t,o),M=Bs(n,o),q=T.get(M);if(q)return void ps(t,o,q);var B=y?y(S,M,o+"",t,n,T):e,W=B===e;if(W){var X=Ee(M),ae=!X&&Wi(M),ve=!X&&!ae&&ko(M);B=M,X||ae||ve?Ee(S)?B=S:st(S)?B=sn(S):ae?(W=!1,B=Fa(M,!0)):ve?(W=!1,B=Ba(M,!0)):B=[]:fr(M)||po(M)?(B=S,po(S)?B=Rl(S):(!je(S)||Si(S))&&(B=rl(M))):W=!1}W&&(T.set(M,B),p(B,M,f,y,T),T.delete(M)),ps(t,o,B)}(t,n,T,o,Nr,f,p);else{var S=f?f(Bs(t,T),y,T+"",t,n,p):e;S===e&&(S=y),ps(t,T,S)}},ln)}function Ma(t,n){var o=t.length;if(o)return Ai(n+=n<0?o:0,o)?t[n]:e}function Pa(t,n,o){n=n.length?Je(n,function(y){return Ee(y)?function(T){return fo(T,1===y.length?y[0]:y)}:y}):[cn];var f=-1;return n=Je(n,Xt(me())),function _r(O,R){var D=O.length;for(O.sort(R);D--;)O[D]=O[D].value;return O}(Aa(t,function(y,T,S){return{criteria:Je(n,function(q){return q(y)}),index:++f,value:y}}),function(y,T){return function yf(t,n,o){for(var f=-1,p=t.criteria,y=n.criteria,T=p.length,S=o.length;++f<T;){var M=Ja(p[f],y[f]);if(M)return f>=S?M:M*("desc"==o[f]?-1:1)}return t.index-n.index}(y,T,o)})}function Ia(t,n,o){for(var f=-1,p=n.length,y={};++f<p;){var T=n[f],S=fo(t,T);o(S,T)&&sr(y,$i(T,t),S)}return y}function xs(t,n,o,f){var p=f?as:fi,y=-1,T=n.length,S=t;for(t===n&&(n=sn(n)),o&&(S=Je(t,Xt(o)));++y<T;)for(var M=0,q=n[y],B=o?o(q):q;(M=p(S,B,M,f))>-1;)S!==t&&Er.call(S,M,1),Er.call(t,M,1);return t}function Da(t,n){for(var o=t?n.length:0,f=o-1;o--;){var p=n[o];if(o==f||p!==y){var y=p;Ai(p)?Er.call(t,p,1):Ss(t,p)}}return t}function Ts(t,n){return t+Or(da()*(n-t+1))}function Es(t,n){var o="";if(!t||n<1||n>le)return o;do{n%2&&(o+=t),(n=Or(n/2))&&(t+=t)}while(n);return o}function Pe(t,n){return Js(ll(t,n,cn),t+"")}function ff(t){return ga(Zo(t))}function uf(t,n){var o=Zo(t);return $r(o,co(n,0,o.length))}function sr(t,n,o,f){if(!je(t))return t;for(var p=-1,y=(n=$i(n,t)).length,T=y-1,S=t;null!=S&&++p<y;){var M=pi(n[p]),q=o;if("__proto__"===M||"constructor"===M||"prototype"===M)return t;if(p!=T){var B=S[M];(q=f?f(B,M,S):e)===e&&(q=je(B)?B:Ai(n[p+1])?[]:{})}nr(S,M,q),S=S[M]}return t}var ka=Mr?function(t,n){return Mr.set(t,n),t}:cn,df=Ar?function(t,n){return Ar(t,"toString",{configurable:!0,enumerable:!1,value:zs(n),writable:!0})}:cn;function hf(t){return $r(Zo(t))}function Nn(t,n,o){var f=-1,p=t.length;n<0&&(n=-n>p?0:p+n),(o=o>p?p:o)<0&&(o+=p),p=n>o?0:o-n>>>0,n>>>=0;for(var y=D(p);++f<p;)y[f]=t[f+n];return y}function pf(t,n){var o;return Hi(t,function(f,p,y){return!(o=n(f,p,y))}),!!o}function Lr(t,n,o){var f=0,p=null==t?f:t.length;if("number"==typeof n&&n==n&&p<=2147483647){for(;f<p;){var y=f+p>>>1,T=t[y];null!==T&&!mn(T)&&(o?T<=n:T<n)?f=y+1:p=y}return p}return As(t,n,cn,o)}function As(t,n,o,f){var p=0,y=null==t?0:t.length;if(0===y)return 0;for(var T=(n=o(n))!=n,S=null===n,M=mn(n),q=n===e;p<y;){var B=Or((p+y)/2),W=o(t[B]),X=W!==e,ae=null===W,ve=W==W,Se=mn(W);if(T)var ye=f||ve;else ye=q?ve&&(f||X):S?ve&&X&&(f||!ae):M?ve&&X&&!ae&&(f||!Se):!ae&&!Se&&(f?W<=n:W<n);ye?p=B+1:y=B}return Ht(y,4294967294)}function Za(t,n){for(var o=-1,f=t.length,p=0,y=[];++o<f;){var T=t[o],S=n?n(T):T;if(!o||!ei(S,M)){var M=S;y[p++]=0===T?0:T}}return y}function Na(t){return"number"==typeof t?t:mn(t)?NaN:+t}function _n(t){if("string"==typeof t)return t;if(Ee(t))return Je(t,_n)+"";if(mn(t))return ha?ha.call(t):"";var n=t+"";return"0"==n&&1/t==-Gt?"-0":n}function Qi(t,n,o){var f=-1,p=io,y=t.length,T=!0,S=[],M=S;if(o)T=!1,p=oo;else if(y>=200){var q=n?null:Ef(t);if(q)return F(q);T=!1,p=ro,M=new lo}else M=n?[]:S;e:for(;++f<y;){var B=t[f],W=n?n(B):B;if(B=o||0!==B?B:0,T&&W==W){for(var X=M.length;X--;)if(M[X]===W)continue e;n&&M.push(W),S.push(B)}else p(M,W,o)||(M!==S&&M.push(W),S.push(B))}return S}function Ss(t,n){return null==(t=cl(t,n=$i(n,t)))||delete t[pi(Ln(n))]}function La(t,n,o,f){return sr(t,n,o(fo(t,n)),f)}function Rr(t,n,o,f){for(var p=t.length,y=f?p:-1;(f?y--:++y<p)&&n(t[y],y,t););return o?Nn(t,f?0:y,f?y+1:p):Nn(t,f?y+1:0,f?p:y)}function Ra(t,n){var o=t;return o instanceof De&&(o=o.value()),qi(n,function(f,p){return p.func.apply(p.thisArg,In([f],p.args))},o)}function Os(t,n,o){var f=t.length;if(f<2)return f?Qi(t[0]):[];for(var p=-1,y=D(f);++p<f;)for(var T=t[p],S=-1;++S<f;)S!=p&&(y[p]=ir(y[p]||T,t[S],n,o));return Qi(Lt(y,1),n,o)}function Ua(t,n,o){for(var f=-1,p=t.length,y=n.length,T={};++f<p;){var S=f<y?n[f]:e;o(T,t[f],S)}return T}function Ms(t){return st(t)?t:[]}function Ps(t){return"function"==typeof t?t:cn}function $i(t,n){return Ee(t)?t:qs(t,n)?[t]:hl(qe(t))}var gf=Pe;function Gi(t,n,o){var f=t.length;return o=o===e?f:o,!n&&o>=f?t:Nn(t,n,o)}var qa=tc||function(t){return mt.clearTimeout(t)};function Fa(t,n){if(n)return t.slice();var o=t.length,f=aa?aa(o):new t.constructor(o);return t.copy(f),f}function Is(t){var n=new t.constructor(t.byteLength);return new xr(n).set(new xr(t)),n}function Ba(t,n){var o=n?Is(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Ja(t,n){if(t!==n){var o=t!==e,f=null===t,p=t==t,y=mn(t),T=n!==e,S=null===n,M=n==n,q=mn(n);if(!S&&!q&&!y&&t>n||y&&T&&M&&!S&&!q||f&&T&&M||!o&&M||!p)return 1;if(!f&&!y&&!q&&t<n||q&&o&&p&&!f&&!y||S&&o&&p||!T&&p||!M)return-1}return 0}function Ha(t,n,o,f){for(var p=-1,y=t.length,T=o.length,S=-1,M=n.length,q=yt(y-T,0),B=D(M+q),W=!f;++S<M;)B[S]=n[S];for(;++p<T;)(W||p<y)&&(B[o[p]]=t[p]);for(;q--;)B[S++]=t[p++];return B}function Qa(t,n,o,f){for(var p=-1,y=t.length,T=-1,S=o.length,M=-1,q=n.length,B=yt(y-S,0),W=D(B+q),X=!f;++p<B;)W[p]=t[p];for(var ae=p;++M<q;)W[ae+M]=n[M];for(;++T<S;)(X||p<y)&&(W[ae+o[T]]=t[p++]);return W}function sn(t,n){var o=-1,f=t.length;for(n||(n=D(f));++o<f;)n[o]=t[o];return n}function hi(t,n,o,f){var p=!o;o||(o={});for(var y=-1,T=n.length;++y<T;){var S=n[y],M=f?f(o[S],t[S],S,o,t):e;M===e&&(M=t[S]),p?xi(o,S,M):nr(o,S,M)}return o}function Ur(t,n){return function(o,f){var p=Ee(o)?$o:Jc,y=n?n():{};return p(o,t,me(f,2),y)}}function Po(t){return Pe(function(n,o){var f=-1,p=o.length,y=p>1?o[p-1]:e,T=p>2?o[2]:e;for(y=t.length>3&&"function"==typeof y?(p--,y):e,T&&tn(o[0],o[1],T)&&(y=p<3?e:y,p=1),n=He(n);++f<p;){var S=o[f];S&&t(n,S,f,y)}return n})}function $a(t,n){return function(o,f){if(null==o)return o;if(!an(o))return t(o,f);for(var p=o.length,y=n?p:-1,T=He(o);(n?y--:++y<p)&&!1!==f(T[y],y,T););return o}}function Ga(t){return function(n,o,f){for(var p=-1,y=He(n),T=f(n),S=T.length;S--;){var M=T[t?S:++p];if(!1===o(y[M],M,y))break}return n}}function Wa(t){return function(n){var o=g(n=qe(n))?V(n):e,f=o?o[0]:n.charAt(0),p=o?Gi(o,1).join(""):n.slice(1);return f[t]()+p}}function Io(t){return function(n){return qi($l(Ql(n).replace(u,"")),t,"")}}function ar(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=Mo(t.prototype),f=t.apply(o,n);return je(f)?f:o}}function Ka(t){return function(n,o,f){var p=He(n);if(!an(n)){var y=me(o,3);n=St(n),o=function(S){return y(p[S],S,p)}}var T=t(n,o,f);return T>-1?p[y?n[T]:T]:e}}function Ya(t){return Ei(function(n){var o=n.length,f=o,p=kn.prototype.thru;for(t&&n.reverse();f--;){var y=n[f];if("function"!=typeof y)throw new Dn(ce);if(p&&!T&&"wrapper"==Hr(y))var T=new kn([],!0)}for(f=T?f:o;++f<o;){var S=Hr(y=n[f]),M="wrapper"==S?Ls(y):e;T=M&&Fs(M[0])&&424==M[1]&&!M[4].length&&1==M[9]?T[Hr(M[0])].apply(T,M[3]):1==y.length&&Fs(y)?T[S]():T.thru(y)}return function(){var q=arguments,B=q[0];if(T&&1==q.length&&Ee(B))return T.plant(B).value();for(var W=0,X=o?n[W].apply(this,q):B;++W<o;)X=n[W].call(this,X);return X}})}function qr(t,n,o,f,p,y,T,S,M,q){var B=n&ft,W=1&n,X=2&n,ae=24&n,ve=512&n,Se=X?e:ar(t);return function ye(){for(var Ie=arguments.length,ke=D(Ie),vn=Ie;vn--;)ke[vn]=arguments[vn];if(ae)var nn=Do(ye),yn=i(ke,nn);if(f&&(ke=Ha(ke,f,p,ae)),y&&(ke=Qa(ke,y,T,ae)),Ie-=yn,ae&&Ie<q){var at=Q(ke,nn);return za(t,n,qr,ye.placeholder,o,ke,at,S,M,q-Ie)}var ti=W?o:this,Mi=X?ti[t]:t;return Ie=ke.length,S?ke=Hf(ke,S):ve&&Ie>1&&ke.reverse(),B&&M<Ie&&(ke.length=M),this&&this!==mt&&this instanceof ye&&(Mi=Se||ar(Mi)),Mi.apply(ti,ke)}}function ja(t,n){return function(o,f){return function jc(t,n,o,f){return di(t,function(p,y,T){n(f,o(p),y,T)}),f}(o,t,n(f),{})}}function Fr(t,n){return function(o,f){var p;if(o===e&&f===e)return n;if(o!==e&&(p=o),f!==e){if(p===e)return f;"string"==typeof o||"string"==typeof f?(o=_n(o),f=_n(f)):(o=Na(o),f=Na(f)),p=t(o,f)}return p}}function Ds(t){return Ei(function(n){return n=Je(n,Xt(me())),Pe(function(o){var f=this;return t(n,function(p){return Bt(p,f,o)})})})}function Br(t,n){var o=(n=n===e?" ":_n(n)).length;if(o<2)return o?Es(n,t):n;var f=Es(n,Sr(t/z(n)));return g(n)?Gi(V(f),0,t).join(""):f.slice(0,t)}function Va(t){return function(n,o,f){return f&&"number"!=typeof f&&tn(n,o,f)&&(o=f=e),n=Oi(n),o===e?(o=n,n=0):o=Oi(o),function cf(t,n,o,f){for(var p=-1,y=yt(Sr((n-t)/(o||1)),0),T=D(y);y--;)T[f?y:++p]=t,t+=o;return T}(n,o,f=f===e?n<o?1:-1:Oi(f),t)}}function Jr(t){return function(n,o){return"string"==typeof n&&"string"==typeof o||(n=Rn(n),o=Rn(o)),t(n,o)}}function za(t,n,o,f,p,y,T,S,M,q){var B=8&n;n|=B?32:64,4&(n&=~(B?64:32))||(n&=-4);var Se=[t,n,p,B?y:e,B?T:e,B?e:y,B?e:T,S,M,q],ye=o.apply(e,Se);return Fs(t)&&fl(ye,Se),ye.placeholder=f,ul(ye,t,n)}function ks(t){var n=vt[t];return function(o,f){if(o=Rn(o),(f=null==f?0:Ht(Ae(f),292))&&ua(o)){var p=(qe(o)+"e").split("e");return+((p=(qe(n(p[0]+"e"+(+p[1]+f)))+"e").split("e"))[0]+"e"+(+p[1]-f))}return n(o)}}var Ef=So&&1/F(new So([,-0]))[1]==Gt?function(t){return new So(t)}:ta;function Xa(t){return function(n){var o=Qt(n);return o==dt?I(n):o==Re?function j(O){var R=-1,D=Array(O.size);return O.forEach(function(ne){D[++R]=[ne,ne]}),D}(n):function mr(O,R){return Je(R,function(D){return[D,O[D]]})}(n,t(n))}}function Ti(t,n,o,f,p,y,T,S){var M=2&n;if(!M&&"function"!=typeof t)throw new Dn(ce);var q=f?f.length:0;if(q||(n&=-97,f=p=e),T=T===e?T:yt(Ae(T),0),S=S===e?S:Ae(S),q-=p?p.length:0,64&n){var B=f,W=p;f=p=e}var X=M?e:Ls(t),ae=[t,n,o,f,p,B,W,y,T,S];if(X&&function Ff(t,n){var o=t[1],f=n[1],p=o|f,y=p<131,T=f==ft&&8==o||f==ft&&256==o&&t[7].length<=n[8]||384==f&&n[7].length<=n[8]&&8==o;if(!y&&!T)return t;1&f&&(t[2]=n[2],p|=1&o?0:4);var S=n[3];if(S){var M=t[3];t[3]=M?Ha(M,S,n[4]):S,t[4]=M?Q(t[3],we):n[4]}return(S=n[5])&&(M=t[5],t[5]=M?Qa(M,S,n[6]):S,t[6]=M?Q(t[5],we):n[6]),(S=n[7])&&(t[7]=S),f&ft&&(t[8]=null==t[8]?n[8]:Ht(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=p,t}(ae,X),t=ae[0],n=ae[1],o=ae[2],f=ae[3],p=ae[4],!(S=ae[9]=ae[9]===e?M?0:t.length:yt(ae[9]-q,0))&&24&n&&(n&=-25),n&&1!=n)ve=8==n||16==n?function xf(t,n,o){var f=ar(t);return function p(){for(var y=arguments.length,T=D(y),S=y,M=Do(p);S--;)T[S]=arguments[S];var q=y<3&&T[0]!==M&&T[y-1]!==M?[]:Q(T,M);return(y-=q.length)<o?za(t,n,qr,p.placeholder,e,T,q,e,e,o-y):Bt(this&&this!==mt&&this instanceof p?f:t,this,T)}}(t,n,S):32!=n&&33!=n||p.length?qr.apply(e,ae):function Tf(t,n,o,f){var p=1&n,y=ar(t);return function T(){for(var S=-1,M=arguments.length,q=-1,B=f.length,W=D(B+M),X=this&&this!==mt&&this instanceof T?y:t;++q<B;)W[q]=f[q];for(;M--;)W[q++]=arguments[++S];return Bt(X,p?o:this,W)}}(t,n,o,f);else var ve=function wf(t,n,o){var f=1&n,p=ar(t);return function y(){return(this&&this!==mt&&this instanceof y?p:t).apply(f?o:this,arguments)}}(t,n,o);return ul((X?ka:fl)(ve,ae),t,n)}function el(t,n,o,f){return t===e||ei(t,Ao[o])&&!Be.call(f,o)?n:t}function tl(t,n,o,f,p,y){return je(t)&&je(n)&&(y.set(n,t),Nr(t,n,e,tl,y),y.delete(n)),t}function Af(t){return fr(t)?e:t}function nl(t,n,o,f,p,y){var T=1&o,S=t.length,M=n.length;if(S!=M&&!(T&&M>S))return!1;var q=y.get(t),B=y.get(n);if(q&&B)return q==n&&B==t;var W=-1,X=!0,ae=2&o?new lo:e;for(y.set(t,n),y.set(n,t);++W<S;){var ve=t[W],Se=n[W];if(f)var ye=T?f(Se,ve,W,n,t,y):f(ve,Se,W,t,n,y);if(ye!==e){if(ye)continue;X=!1;break}if(ae){if(!gr(n,function(Ie,ke){if(!ro(ae,ke)&&(ve===Ie||p(ve,Ie,o,f,y)))return ae.push(ke)})){X=!1;break}}else if(ve!==Se&&!p(ve,Se,o,f,y)){X=!1;break}}return y.delete(t),y.delete(n),X}function Ei(t){return Js(ll(t,e,ml),t+"")}function Zs(t){return wa(t,St,Us)}function Ns(t){return wa(t,ln,il)}var Ls=Mr?function(t){return Mr.get(t)}:ta;function Hr(t){for(var n=t.name+"",o=Oo[n],f=Be.call(Oo,n)?o.length:0;f--;){var p=o[f],y=p.func;if(null==y||y==t)return p.name}return n}function Do(t){return(Be.call(v,"placeholder")?v:t).placeholder}function me(){var t=v.iteratee||Xs;return t=t===Xs?Ea:t,arguments.length?t(arguments[0],arguments[1]):t}function Qr(t,n){var o=t.__data__;return function Lf(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?o["string"==typeof n?"string":"hash"]:o.map}function Rs(t){for(var n=St(t),o=n.length;o--;){var f=n[o],p=t[f];n[o]=[f,p,sl(p)]}return n}function uo(t,n){var o=function h(O,R){return null==O?e:O[R]}(t,n);return Ta(o)?o:e}var Us=us?function(t){return null==t?[]:(t=He(t),zt(us(t),function(n){return ca.call(t,n)}))}:na,il=us?function(t){for(var n=[];t;)In(n,Us(t)),t=Tr(t);return n}:na,Qt=en;function ol(t,n,o){for(var f=-1,p=(n=$i(n,t)).length,y=!1;++f<p;){var T=pi(n[f]);if(!(y=null!=t&&o(t,T)))break;t=t[T]}return y||++f!=p?y:!!(p=null==t?0:t.length)&&Vr(p)&&Ai(T,p)&&(Ee(t)||po(t))}function rl(t){return"function"!=typeof t.constructor||lr(t)?{}:Mo(Tr(t))}function Nf(t){return Ee(t)||po(t)||!!(fa&&t&&t[fa])}function Ai(t,n){var o=typeof t;return!!(n=null==n?le:n)&&("number"==o||"symbol"!=o&&li.test(t))&&t>-1&&t%1==0&&t<n}function tn(t,n,o){if(!je(o))return!1;var f=typeof n;return!!("number"==f?an(o)&&Ai(n,o.length):"string"==f&&n in o)&&ei(o[n],t)}function qs(t,n){if(Ee(t))return!1;var o=typeof t;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=t&&!mn(t))||(E.test(t)||!w.test(t)||null!=n&&t in He(n))}function Fs(t){var n=Hr(t),o=v[n];if("function"!=typeof o||!(n in De.prototype))return!1;if(t===o)return!0;var f=Ls(o);return!!f&&t===f[0]}(ds&&Qt(new ds(new ArrayBuffer(1)))!=Wt||zo&&Qt(new zo)!=dt||hs&&Qt(hs.resolve())!=ii||So&&Qt(new So)!=Re||Xo&&Qt(new Xo)!=Ke)&&(Qt=function(t){var n=en(t),o=n==$e?t.constructor:e,f=o?ho(o):"";if(f)switch(f){case fc:return Wt;case uc:return dt;case dc:return ii;case hc:return Re;case pc:return Ke}return n});var Uf=yr?Si:ia;function lr(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Ao)}function sl(t){return t==t&&!je(t)}function al(t,n){return function(o){return null!=o&&(o[t]===n&&(n!==e||t in He(o)))}}function ll(t,n,o){return n=yt(n===e?t.length-1:n,0),function(){for(var f=arguments,p=-1,y=yt(f.length-n,0),T=D(y);++p<y;)T[p]=f[n+p];p=-1;for(var S=D(n+1);++p<n;)S[p]=f[p];return S[n]=o(T),Bt(t,this,S)}}function cl(t,n){return n.length<2?t:fo(t,Nn(n,0,-1))}function Hf(t,n){for(var o=t.length,f=Ht(n.length,o),p=sn(t);f--;){var y=n[f];t[f]=Ai(y,o)?p[y]:e}return t}function Bs(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}var fl=dl(ka),cr=ic||function(t,n){return mt.setTimeout(t,n)},Js=dl(df);function ul(t,n,o){var f=n+"";return Js(t,function Zf(t,n){var o=n.length;if(!o)return t;var f=o-1;return n[f]=(o>1?"& ":"")+n[f],n=n.join(o>2?", ":" "),t.replace(Ze,"{\n/* [wrapped with "+n+"] */\n")}(f,function Qf(t,n){return Jt(qn,function(o){var f="_."+o[0];n&o[1]&&!io(t,f)&&t.push(f)}),t.sort()}(function If(t){var n=t.match(ot);return n?n[1].split(wt):[]}(f),o)))}function dl(t){var n=0,o=0;return function(){var f=ac(),p=16-(f-o);if(o=f,p>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function $r(t,n){var o=-1,f=t.length,p=f-1;for(n=n===e?f:n;++o<n;){var y=Ts(o,p),T=t[y];t[y]=t[o],t[o]=T}return t.length=n,t}var hl=function qf(t){var n=Yr(t,function(f){return 500===o.size&&o.clear(),f}),o=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(P,function(o,f,p,y){n.push(p?y.replace(Qn,"$1"):f||o)}),n});function pi(t){if("string"==typeof t||mn(t))return t;var n=t+"";return"0"==n&&1/t==-Gt?"-0":n}function ho(t){if(null!=t){try{return Cr.call(t)}catch(n){}try{return t+""}catch(n){}}return""}function pl(t){if(t instanceof De)return t.clone();var n=new kn(t.__wrapped__,t.__chain__);return n.__actions__=sn(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var Kf=Pe(function(t,n){return st(t)?ir(t,Lt(n,1,st,!0)):[]}),Yf=Pe(function(t,n){var o=Ln(n);return st(o)&&(o=e),st(t)?ir(t,Lt(n,1,st,!0),me(o,2)):[]}),jf=Pe(function(t,n){var o=Ln(n);return st(o)&&(o=e),st(t)?ir(t,Lt(n,1,st,!0),e,o):[]});function gl(t,n,o){var f=null==t?0:t.length;if(!f)return-1;var p=null==o?0:Ae(o);return p<0&&(p=yt(f+p,0)),xo(t,me(n,3),p)}function _l(t,n,o){var f=null==t?0:t.length;if(!f)return-1;var p=f-1;return o!==e&&(p=Ae(o),p=o<0?yt(f+p,0):Ht(p,f-1)),xo(t,me(n,3),p,!0)}function ml(t){return(null==t?0:t.length)?Lt(t,1):[]}function vl(t){return t&&t.length?t[0]:e}var au=Pe(function(t){var n=Je(t,Ms);return n.length&&n[0]===t[0]?ys(n):[]}),lu=Pe(function(t){var n=Ln(t),o=Je(t,Ms);return n===Ln(o)?n=e:o.pop(),o.length&&o[0]===t[0]?ys(o,me(n,2)):[]}),cu=Pe(function(t){var n=Ln(t),o=Je(t,Ms);return(n="function"==typeof n?n:e)&&o.pop(),o.length&&o[0]===t[0]?ys(o,e,n):[]});function Ln(t){var n=null==t?0:t.length;return n?t[n-1]:e}var hu=Pe(yl);function yl(t,n){return t&&t.length&&n&&n.length?xs(t,n):t}var _u=Ei(function(t,n){var o=null==t?0:t.length,f=gs(t,n);return Da(t,Je(n,function(p){return Ai(p,o)?+p:p}).sort(Ja)),f});function Hs(t){return null==t?t:cc.call(t)}var Du=Pe(function(t){return Qi(Lt(t,1,st,!0))}),ku=Pe(function(t){var n=Ln(t);return st(n)&&(n=e),Qi(Lt(t,1,st,!0),me(n,2))}),Zu=Pe(function(t){var n=Ln(t);return n="function"==typeof n?n:e,Qi(Lt(t,1,st,!0),e,n)});function Qs(t){if(!t||!t.length)return[];var n=0;return t=zt(t,function(o){if(st(o))return n=yt(o.length,n),!0}),Yo(n,function(o){return Je(t,Eo(o))})}function Cl(t,n){if(!t||!t.length)return[];var o=Qs(t);return null==n?o:Je(o,function(f){return Bt(n,e,f)})}var Uu=Pe(function(t,n){return st(t)?ir(t,n):[]}),qu=Pe(function(t){return Os(zt(t,st))}),Fu=Pe(function(t){var n=Ln(t);return st(n)&&(n=e),Os(zt(t,st),me(n,2))}),Bu=Pe(function(t){var n=Ln(t);return n="function"==typeof n?n:e,Os(zt(t,st),e,n)}),Ju=Pe(Qs);var $u=Pe(function(t){var n=t.length,o=n>1?t[n-1]:e;return o="function"==typeof o?(t.pop(),o):e,Cl(t,o)});function bl(t){var n=v(t);return n.__chain__=!0,n}function Gr(t,n){return n(t)}var Wu=Ei(function(t){var n=t.length,o=n?t[0]:0,f=this.__wrapped__,p=function(y){return gs(y,t)};return!(n>1||this.__actions__.length)&&f instanceof De&&Ai(o)?((f=f.slice(o,+o+(n?1:0))).__actions__.push({func:Gr,args:[p],thisArg:e}),new kn(f,this.__chain__).thru(function(y){return n&&!y.length&&y.push(e),y})):this.thru(p)});var td=Ur(function(t,n,o){Be.call(t,o)?++t[o]:xi(t,o,1)});var od=Ka(gl),rd=Ka(_l);function wl(t,n){return(Ee(t)?Jt:Hi)(t,me(n,3))}function xl(t,n){return(Ee(t)?rs:ya)(t,me(n,3))}var cd=Ur(function(t,n,o){Be.call(t,o)?t[o].push(n):xi(t,o,[n])});var ud=Pe(function(t,n,o){var f=-1,p="function"==typeof n,y=an(t)?D(t.length):[];return Hi(t,function(T){y[++f]=p?Bt(n,T,o):or(T,n,o)}),y}),dd=Ur(function(t,n,o){xi(t,o,n)});function Wr(t,n){return(Ee(t)?Je:Aa)(t,me(n,3))}var pd=Ur(function(t,n,o){t[o?0:1].push(n)},function(){return[[],[]]});var xd=Pe(function(t,n){if(null==t)return[];var o=n.length;return o>1&&tn(t,n[0],n[1])?n=[]:o>2&&tn(n[0],n[1],n[2])&&(n=[n[0]]),Pa(t,Lt(n,1),[])}),Kr=nc||function(){return mt.Date.now()};function Tl(t,n,o){return n=o?e:n,n=t&&null==n?t.length:n,Ti(t,ft,e,e,e,e,n)}function El(t,n){var o;if("function"!=typeof n)throw new Dn(ce);return t=Ae(t),function(){return--t>0&&(o=n.apply(this,arguments)),t<=1&&(n=e),o}}var $s=Pe(function(t,n,o){var f=1;if(o.length){var p=Q(o,Do($s));f|=32}return Ti(t,f,n,o,p)}),Al=Pe(function(t,n,o){var f=3;if(o.length){var p=Q(o,Do(Al));f|=32}return Ti(n,f,t,o,p)});function Ml(t,n,o){var f,p,y,T,S,M,q=0,B=!1,W=!1,X=!0;if("function"!=typeof t)throw new Dn(ce);function ae(at){var ti=f,Mi=p;return f=p=e,q=at,T=t.apply(Mi,ti)}function ve(at){return q=at,S=cr(Ie,n),B?ae(at):T}function ye(at){var ti=at-M;return M===e||ti>=n||ti<0||W&&at-q>=y}function Ie(){var at=Kr();if(ye(at))return ke(at);S=cr(Ie,function Se(at){var Kl=n-(at-M);return W?Ht(Kl,y-(at-q)):Kl}(at))}function ke(at){return S=e,X&&f?ae(at):(f=p=e,T)}function yn(){var at=Kr(),ti=ye(at);if(f=arguments,p=this,M=at,ti){if(S===e)return ve(M);if(W)return qa(S),S=cr(Ie,n),ae(M)}return S===e&&(S=cr(Ie,n)),T}return n=Rn(n)||0,je(o)&&(B=!!o.leading,y=(W="maxWait"in o)?yt(Rn(o.maxWait)||0,n):y,X="trailing"in o?!!o.trailing:X),yn.cancel=function vn(){S!==e&&qa(S),q=0,f=M=p=S=e},yn.flush=function nn(){return S===e?T:ke(Kr())},yn}var Ed=Pe(function(t,n){return va(t,1,n)}),Ad=Pe(function(t,n,o){return va(t,Rn(n)||0,o)});function Yr(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Dn(ce);var o=function(){var f=arguments,p=n?n.apply(this,f):f[0],y=o.cache;if(y.has(p))return y.get(p);var T=t.apply(this,f);return o.cache=y.set(p,T)||y,T};return o.cache=new(Yr.Cache||wi),o}function jr(t){if("function"!=typeof t)throw new Dn(ce);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}Yr.Cache=wi;var Md=gf(function(t,n){var o=(n=1==n.length&&Ee(n[0])?Je(n[0],Xt(me())):Je(Lt(n,1),Xt(me()))).length;return Pe(function(f){for(var p=-1,y=Ht(f.length,o);++p<y;)f[p]=n[p].call(this,f[p]);return Bt(t,this,f)})}),Gs=Pe(function(t,n){var o=Q(n,Do(Gs));return Ti(t,32,e,n,o)}),Pl=Pe(function(t,n){var o=Q(n,Do(Pl));return Ti(t,64,e,n,o)}),Pd=Ei(function(t,n){return Ti(t,256,e,e,e,n)});function ei(t,n){return t===n||t!=t&&n!=n}var Jd=Jr(vs),Hd=Jr(function(t,n){return t>=n}),po=xa(function(){return arguments}())?xa:function(t){return et(t)&&Be.call(t,"callee")&&!ca.call(t,"callee")},Ee=D.isArray,Qd=Qo?Xt(Qo):function Vc(t){return et(t)&&en(t)==We};function an(t){return null!=t&&Vr(t.length)&&!Si(t)}function st(t){return et(t)&&an(t)}var Wi=oc||ia,Gd=hr?Xt(hr):function zc(t){return et(t)&&en(t)==ze};function Ws(t){if(!et(t))return!1;var n=en(t);return n==Dt||"[object DOMException]"==n||"string"==typeof t.message&&"string"==typeof t.name&&!fr(t)}function Si(t){if(!je(t))return!1;var n=en(t);return n==Fn||n==kt||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Il(t){return"number"==typeof t&&t==Ae(t)}function Vr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=le}function je(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function et(t){return null!=t&&"object"==typeof t}var Dl=ns?Xt(ns):function ef(t){return et(t)&&Qt(t)==dt};function kl(t){return"number"==typeof t||et(t)&&en(t)==ht}function fr(t){if(!et(t)||en(t)!=$e)return!1;var n=Tr(t);if(null===n)return!0;var o=Be.call(n,"constructor")&&n.constructor;return"function"==typeof o&&o instanceof o&&Cr.call(o)==zl}var Ks=is?Xt(is):function tf(t){return et(t)&&en(t)==Xe};var Zl=os?Xt(os):function nf(t){return et(t)&&Qt(t)==Re};function zr(t){return"string"==typeof t||!Ee(t)&&et(t)&&en(t)==pt}function mn(t){return"symbol"==typeof t||et(t)&&en(t)==qt}var ko=pr?Xt(pr):function of(t){return et(t)&&Vr(t.length)&&!!be[en(t)]};var lh=Jr(ws),ch=Jr(function(t,n){return t<=n});function Nl(t){if(!t)return[];if(an(t))return zr(t)?V(t):sn(t);if(Vo&&t[Vo])return function A(O){for(var R,D=[];!(R=O.next()).done;)D.push(R.value);return D}(t[Vo]());var n=Qt(t);return(n==dt?I:n==Re?F:Zo)(t)}function Oi(t){return t?(t=Rn(t))===Gt||t===-Gt?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Ae(t){var n=Oi(t),o=n%1;return n==n?o?n-o:n:0}function Ll(t){return t?co(Ae(t),0,Ve):0}function Rn(t){if("number"==typeof t)return t;if(mn(t))return NaN;if(je(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=je(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=ls(t);var o=ai.test(t);return o||$n.test(t)?es(t.slice(2),o?2:8):si.test(t)?NaN:+t}function Rl(t){return hi(t,ln(t))}function qe(t){return null==t?"":_n(t)}var uh=Po(function(t,n){if(lr(n)||an(n))hi(n,St(n),t);else for(var o in n)Be.call(n,o)&&nr(t,o,n[o])}),Ul=Po(function(t,n){hi(n,ln(n),t)}),Xr=Po(function(t,n,o,f){hi(n,ln(n),t,f)}),dh=Po(function(t,n,o,f){hi(n,St(n),t,f)}),hh=Ei(gs);var gh=Pe(function(t,n){t=He(t);var o=-1,f=n.length,p=f>2?n[2]:e;for(p&&tn(n[0],n[1],p)&&(f=1);++o<f;)for(var y=n[o],T=ln(y),S=-1,M=T.length;++S<M;){var q=T[S],B=t[q];(B===e||ei(B,Ao[q])&&!Be.call(t,q))&&(t[q]=y[q])}return t}),_h=Pe(function(t){return t.push(e,tl),Bt(ql,e,t)});function Ys(t,n,o){var f=null==t?e:fo(t,n);return f===e?o:f}function js(t,n){return null!=t&&ol(t,n,Kc)}var Ah=ja(function(t,n,o){null!=n&&"function"!=typeof n.toString&&(n=br.call(n)),t[n]=o},zs(cn)),Sh=ja(function(t,n,o){null!=n&&"function"!=typeof n.toString&&(n=br.call(n)),Be.call(t,n)?t[n].push(o):t[n]=[o]},me),Oh=Pe(or);function St(t){return an(t)?pa(t):bs(t)}function ln(t){return an(t)?pa(t,!0):rf(t)}var Ih=Po(function(t,n,o){Nr(t,n,o)}),ql=Po(function(t,n,o,f){Nr(t,n,o,f)}),Dh=Ei(function(t,n){var o={};if(null==t)return o;var f=!1;n=Je(n,function(y){return y=$i(y,t),f||(f=y.length>1),y}),hi(t,Ns(t),o),f&&(o=Zn(o,7,Af));for(var p=n.length;p--;)Ss(o,n[p]);return o});var Zh=Ei(function(t,n){return null==t?{}:function af(t,n){return Ia(t,n,function(o,f){return js(t,f)})}(t,n)});function Fl(t,n){if(null==t)return{};var o=Je(Ns(t),function(f){return[f]});return n=me(n),Ia(t,o,function(f,p){return n(f,p[0])})}var Bl=Xa(St),Jl=Xa(ln);function Zo(t){return null==t?[]:jo(t,St(t))}var Gh=Io(function(t,n,o){return n=n.toLowerCase(),t+(o?Hl(n):n)});function Hl(t){return Vs(qe(t).toLowerCase())}function Ql(t){return(t=qe(t))&&t.replace(Gn,r).replace(l,"")}var jh=Io(function(t,n,o){return t+(o?"-":"")+n.toLowerCase()}),Vh=Io(function(t,n,o){return t+(o?" ":"")+n.toLowerCase()}),zh=Wa("toLowerCase");var rp=Io(function(t,n,o){return t+(o?"_":"")+n.toLowerCase()});var ap=Io(function(t,n,o){return t+(o?" ":"")+Vs(n)});var mp=Io(function(t,n,o){return t+(o?" ":"")+n.toUpperCase()}),Vs=Wa("toUpperCase");function $l(t,n,o){return t=qe(t),(n=o?e:n)===e?function x(O){return ue.test(O)}(t)?function Fe(O){return O.match(b)||[]}(t):function rn(O){return O.match(xt)||[]}(t):t.match(n)||[]}var Gl=Pe(function(t,n){try{return Bt(t,e,n)}catch(o){return Ws(o)?o:new Te(o)}}),vp=Ei(function(t,n){return Jt(n,function(o){o=pi(o),xi(t,o,$s(t[o],t))}),t});function zs(t){return function(){return t}}var wp=Ya(),xp=Ya(!0);function cn(t){return t}function Xs(t){return Ea("function"==typeof t?t:Zn(t,1))}var Ap=Pe(function(t,n){return function(o){return or(o,t,n)}}),Sp=Pe(function(t,n){return function(o){return or(t,o,n)}});function ea(t,n,o){var f=St(n),p=Zr(n,f);null==o&&(!je(n)||!p.length&&f.length)&&(o=n,n=t,t=this,p=Zr(n,St(n)));var y=!(je(o)&&"chain"in o&&!o.chain),T=Si(t);return Jt(p,function(S){var M=n[S];t[S]=M,T&&(t.prototype[S]=function(){var q=this.__chain__;if(y||q){var B=t(this.__wrapped__),W=B.__actions__=sn(this.__actions__);return W.push({func:M,args:arguments,thisArg:t}),B.__chain__=q,B}return M.apply(t,In([this.value()],arguments))})}),t}function ta(){}var Pp=Ds(Je),Ip=Ds(Go),Dp=Ds(gr);function Wl(t){return qs(t)?Eo(pi(t)):function lf(t){return function(n){return fo(n,t)}}(t)}var Zp=Va(),Np=Va(!0);function na(){return[]}function ia(){return!1}var Jp=Fr(function(t,n){return t+n},0),Hp=ks("ceil"),Qp=Fr(function(t,n){return t/n},1),$p=ks("floor");var zp=Fr(function(t,n){return t*n},1),Xp=ks("round"),eg=Fr(function(t,n){return t-n},0);return v.after=function Td(t,n){if("function"!=typeof n)throw new Dn(ce);return t=Ae(t),function(){if(--t<1)return n.apply(this,arguments)}},v.ary=Tl,v.assign=uh,v.assignIn=Ul,v.assignInWith=Xr,v.assignWith=dh,v.at=hh,v.before=El,v.bind=$s,v.bindAll=vp,v.bindKey=Al,v.castArray=function Ld(){if(!arguments.length)return[];var t=arguments[0];return Ee(t)?t:[t]},v.chain=bl,v.chunk=function $f(t,n,o){n=(o?tn(t,n,o):n===e)?1:yt(Ae(n),0);var f=null==t?0:t.length;if(!f||n<1)return[];for(var p=0,y=0,T=D(Sr(f/n));p<f;)T[y++]=Nn(t,p,p+=n);return T},v.compact=function Gf(t){for(var n=-1,o=null==t?0:t.length,f=0,p=[];++n<o;){var y=t[n];y&&(p[f++]=y)}return p},v.concat=function Wf(){var t=arguments.length;if(!t)return[];for(var n=D(t-1),o=arguments[0],f=t;f--;)n[f-1]=arguments[f];return In(Ee(o)?sn(o):[o],Lt(n,1))},v.cond=function yp(t){var n=null==t?0:t.length,o=me();return t=n?Je(t,function(f){if("function"!=typeof f[1])throw new Dn(ce);return[o(f[0]),f[1]]}):[],Pe(function(f){for(var p=-1;++p<n;){var y=t[p];if(Bt(y[0],this,f))return Bt(y[1],this,f)}})},v.conforms=function Cp(t){return function Qc(t){var n=St(t);return function(o){return ma(o,t,n)}}(Zn(t,1))},v.constant=zs,v.countBy=td,v.create=function ph(t,n){var o=Mo(t);return null==n?o:_a(o,n)},v.curry=function Sl(t,n,o){var f=Ti(t,8,e,e,e,e,e,n=o?e:n);return f.placeholder=Sl.placeholder,f},v.curryRight=function Ol(t,n,o){var f=Ti(t,16,e,e,e,e,e,n=o?e:n);return f.placeholder=Ol.placeholder,f},v.debounce=Ml,v.defaults=gh,v.defaultsDeep=_h,v.defer=Ed,v.delay=Ad,v.difference=Kf,v.differenceBy=Yf,v.differenceWith=jf,v.drop=function Vf(t,n,o){var f=null==t?0:t.length;return f?Nn(t,(n=o||n===e?1:Ae(n))<0?0:n,f):[]},v.dropRight=function zf(t,n,o){var f=null==t?0:t.length;return f?Nn(t,0,(n=f-(n=o||n===e?1:Ae(n)))<0?0:n):[]},v.dropRightWhile=function Xf(t,n){return t&&t.length?Rr(t,me(n,3),!0,!0):[]},v.dropWhile=function eu(t,n){return t&&t.length?Rr(t,me(n,3),!0):[]},v.fill=function tu(t,n,o,f){var p=null==t?0:t.length;return p?(o&&"number"!=typeof o&&tn(t,n,o)&&(o=0,f=p),function Gc(t,n,o,f){var p=t.length;for((o=Ae(o))<0&&(o=-o>p?0:p+o),(f=f===e||f>p?p:Ae(f))<0&&(f+=p),f=o>f?0:Ll(f);o<f;)t[o++]=n;return t}(t,n,o,f)):[]},v.filter=function id(t,n){return(Ee(t)?zt:Ca)(t,me(n,3))},v.flatMap=function sd(t,n){return Lt(Wr(t,n),1)},v.flatMapDeep=function ad(t,n){return Lt(Wr(t,n),Gt)},v.flatMapDepth=function ld(t,n,o){return o=o===e?1:Ae(o),Lt(Wr(t,n),o)},v.flatten=ml,v.flattenDeep=function nu(t){return(null==t?0:t.length)?Lt(t,Gt):[]},v.flattenDepth=function iu(t,n){return(null==t?0:t.length)?Lt(t,n=n===e?1:Ae(n)):[]},v.flip=function Sd(t){return Ti(t,512)},v.flow=wp,v.flowRight=xp,v.fromPairs=function ou(t){for(var n=-1,o=null==t?0:t.length,f={};++n<o;){var p=t[n];f[p[0]]=p[1]}return f},v.functions=function xh(t){return null==t?[]:Zr(t,St(t))},v.functionsIn=function Th(t){return null==t?[]:Zr(t,ln(t))},v.groupBy=cd,v.initial=function su(t){return(null==t?0:t.length)?Nn(t,0,-1):[]},v.intersection=au,v.intersectionBy=lu,v.intersectionWith=cu,v.invert=Ah,v.invertBy=Sh,v.invokeMap=ud,v.iteratee=Xs,v.keyBy=dd,v.keys=St,v.keysIn=ln,v.map=Wr,v.mapKeys=function Mh(t,n){var o={};return n=me(n,3),di(t,function(f,p,y){xi(o,n(f,p,y),f)}),o},v.mapValues=function Ph(t,n){var o={};return n=me(n,3),di(t,function(f,p,y){xi(o,p,n(f,p,y))}),o},v.matches=function Tp(t){return Sa(Zn(t,1))},v.matchesProperty=function Ep(t,n){return Oa(t,Zn(n,1))},v.memoize=Yr,v.merge=Ih,v.mergeWith=ql,v.method=Ap,v.methodOf=Sp,v.mixin=ea,v.negate=jr,v.nthArg=function Mp(t){return t=Ae(t),Pe(function(n){return Ma(n,t)})},v.omit=Dh,v.omitBy=function kh(t,n){return Fl(t,jr(me(n)))},v.once=function Od(t){return El(2,t)},v.orderBy=function hd(t,n,o,f){return null==t?[]:(Ee(n)||(n=null==n?[]:[n]),Ee(o=f?e:o)||(o=null==o?[]:[o]),Pa(t,n,o))},v.over=Pp,v.overArgs=Md,v.overEvery=Ip,v.overSome=Dp,v.partial=Gs,v.partialRight=Pl,v.partition=pd,v.pick=Zh,v.pickBy=Fl,v.property=Wl,v.propertyOf=function kp(t){return function(n){return null==t?e:fo(t,n)}},v.pull=hu,v.pullAll=yl,v.pullAllBy=function pu(t,n,o){return t&&t.length&&n&&n.length?xs(t,n,me(o,2)):t},v.pullAllWith=function gu(t,n,o){return t&&t.length&&n&&n.length?xs(t,n,e,o):t},v.pullAt=_u,v.range=Zp,v.rangeRight=Np,v.rearg=Pd,v.reject=function md(t,n){return(Ee(t)?zt:Ca)(t,jr(me(n,3)))},v.remove=function mu(t,n){var o=[];if(!t||!t.length)return o;var f=-1,p=[],y=t.length;for(n=me(n,3);++f<y;){var T=t[f];n(T,f,t)&&(o.push(T),p.push(f))}return Da(t,p),o},v.rest=function Id(t,n){if("function"!=typeof t)throw new Dn(ce);return Pe(t,n=n===e?n:Ae(n))},v.reverse=Hs,v.sampleSize=function yd(t,n,o){return n=(o?tn(t,n,o):n===e)?1:Ae(n),(Ee(t)?Fc:uf)(t,n)},v.set=function Lh(t,n,o){return null==t?t:sr(t,n,o)},v.setWith=function Rh(t,n,o,f){return f="function"==typeof f?f:e,null==t?t:sr(t,n,o,f)},v.shuffle=function Cd(t){return(Ee(t)?Bc:hf)(t)},v.slice=function vu(t,n,o){var f=null==t?0:t.length;return f?(o&&"number"!=typeof o&&tn(t,n,o)?(n=0,o=f):(n=null==n?0:Ae(n),o=o===e?f:Ae(o)),Nn(t,n,o)):[]},v.sortBy=xd,v.sortedUniq=function Eu(t){return t&&t.length?Za(t):[]},v.sortedUniqBy=function Au(t,n){return t&&t.length?Za(t,me(n,2)):[]},v.split=function sp(t,n,o){return o&&"number"!=typeof o&&tn(t,n,o)&&(n=o=e),(o=o===e?Ve:o>>>0)?(t=qe(t))&&("string"==typeof n||null!=n&&!Ks(n))&&(!(n=_n(n))&&g(t))?Gi(V(t),0,o):t.split(n,o):[]},v.spread=function Dd(t,n){if("function"!=typeof t)throw new Dn(ce);return n=null==n?0:yt(Ae(n),0),Pe(function(o){var f=o[n],p=Gi(o,0,n);return f&&In(p,f),Bt(t,this,p)})},v.tail=function Su(t){var n=null==t?0:t.length;return n?Nn(t,1,n):[]},v.take=function Ou(t,n,o){return t&&t.length?Nn(t,0,(n=o||n===e?1:Ae(n))<0?0:n):[]},v.takeRight=function Mu(t,n,o){var f=null==t?0:t.length;return f?Nn(t,(n=f-(n=o||n===e?1:Ae(n)))<0?0:n,f):[]},v.takeRightWhile=function Pu(t,n){return t&&t.length?Rr(t,me(n,3),!1,!0):[]},v.takeWhile=function Iu(t,n){return t&&t.length?Rr(t,me(n,3)):[]},v.tap=function Gu(t,n){return n(t),t},v.throttle=function kd(t,n,o){var f=!0,p=!0;if("function"!=typeof t)throw new Dn(ce);return je(o)&&(f="leading"in o?!!o.leading:f,p="trailing"in o?!!o.trailing:p),Ml(t,n,{leading:f,maxWait:n,trailing:p})},v.thru=Gr,v.toArray=Nl,v.toPairs=Bl,v.toPairsIn=Jl,v.toPath=function Fp(t){return Ee(t)?Je(t,pi):mn(t)?[t]:sn(hl(qe(t)))},v.toPlainObject=Rl,v.transform=function Uh(t,n,o){var f=Ee(t),p=f||Wi(t)||ko(t);if(n=me(n,4),null==o){var y=t&&t.constructor;o=p?f?new y:[]:je(t)&&Si(y)?Mo(Tr(t)):{}}return(p?Jt:di)(t,function(T,S,M){return n(o,T,S,M)}),o},v.unary=function Zd(t){return Tl(t,1)},v.union=Du,v.unionBy=ku,v.unionWith=Zu,v.uniq=function Nu(t){return t&&t.length?Qi(t):[]},v.uniqBy=function Lu(t,n){return t&&t.length?Qi(t,me(n,2)):[]},v.uniqWith=function Ru(t,n){return n="function"==typeof n?n:e,t&&t.length?Qi(t,e,n):[]},v.unset=function qh(t,n){return null==t||Ss(t,n)},v.unzip=Qs,v.unzipWith=Cl,v.update=function Fh(t,n,o){return null==t?t:La(t,n,Ps(o))},v.updateWith=function Bh(t,n,o,f){return f="function"==typeof f?f:e,null==t?t:La(t,n,Ps(o),f)},v.values=Zo,v.valuesIn=function Jh(t){return null==t?[]:jo(t,ln(t))},v.without=Uu,v.words=$l,v.wrap=function Nd(t,n){return Gs(Ps(n),t)},v.xor=qu,v.xorBy=Fu,v.xorWith=Bu,v.zip=Ju,v.zipObject=function Hu(t,n){return Ua(t||[],n||[],nr)},v.zipObjectDeep=function Qu(t,n){return Ua(t||[],n||[],sr)},v.zipWith=$u,v.entries=Bl,v.entriesIn=Jl,v.extend=Ul,v.extendWith=Xr,ea(v,v),v.add=Jp,v.attempt=Gl,v.camelCase=Gh,v.capitalize=Hl,v.ceil=Hp,v.clamp=function Hh(t,n,o){return o===e&&(o=n,n=e),o!==e&&(o=(o=Rn(o))==o?o:0),n!==e&&(n=(n=Rn(n))==n?n:0),co(Rn(t),n,o)},v.clone=function Rd(t){return Zn(t,4)},v.cloneDeep=function qd(t){return Zn(t,5)},v.cloneDeepWith=function Fd(t,n){return Zn(t,5,n="function"==typeof n?n:e)},v.cloneWith=function Ud(t,n){return Zn(t,4,n="function"==typeof n?n:e)},v.conformsTo=function Bd(t,n){return null==n||ma(t,n,St(n))},v.deburr=Ql,v.defaultTo=function bp(t,n){return null==t||t!=t?n:t},v.divide=Qp,v.endsWith=function Wh(t,n,o){t=qe(t),n=_n(n);var f=t.length,p=o=o===e?f:co(Ae(o),0,f);return(o-=n.length)>=0&&t.slice(o,p)==n},v.eq=ei,v.escape=function Kh(t){return(t=qe(t))&&on.test(t)?t.replace(Sn,a):t},v.escapeRegExp=function Yh(t){return(t=qe(t))&&$.test(t)?t.replace(Z,"\\$&"):t},v.every=function nd(t,n,o){var f=Ee(t)?Go:$c;return o&&tn(t,n,o)&&(n=e),f(t,me(n,3))},v.find=od,v.findIndex=gl,v.findKey=function mh(t,n){return Wo(t,me(n,3),di)},v.findLast=rd,v.findLastIndex=_l,v.findLastKey=function vh(t,n){return Wo(t,me(n,3),ms)},v.floor=$p,v.forEach=wl,v.forEachRight=xl,v.forIn=function yh(t,n){return null==t?t:_s(t,me(n,3),ln)},v.forInRight=function Ch(t,n){return null==t?t:ba(t,me(n,3),ln)},v.forOwn=function bh(t,n){return t&&di(t,me(n,3))},v.forOwnRight=function wh(t,n){return t&&ms(t,me(n,3))},v.get=Ys,v.gt=Jd,v.gte=Hd,v.has=function Eh(t,n){return null!=t&&ol(t,n,Wc)},v.hasIn=js,v.head=vl,v.identity=cn,v.includes=function fd(t,n,o,f){t=an(t)?t:Zo(t),o=o&&!f?Ae(o):0;var p=t.length;return o<0&&(o=yt(p+o,0)),zr(t)?o<=p&&t.indexOf(n,o)>-1:!!p&&fi(t,n,o)>-1},v.indexOf=function ru(t,n,o){var f=null==t?0:t.length;if(!f)return-1;var p=null==o?0:Ae(o);return p<0&&(p=yt(f+p,0)),fi(t,n,p)},v.inRange=function Qh(t,n,o){return n=Oi(n),o===e?(o=n,n=0):o=Oi(o),function Yc(t,n,o){return t>=Ht(n,o)&&t<yt(n,o)}(t=Rn(t),n,o)},v.invoke=Oh,v.isArguments=po,v.isArray=Ee,v.isArrayBuffer=Qd,v.isArrayLike=an,v.isArrayLikeObject=st,v.isBoolean=function $d(t){return!0===t||!1===t||et(t)&&en(t)==bt},v.isBuffer=Wi,v.isDate=Gd,v.isElement=function Wd(t){return et(t)&&1===t.nodeType&&!fr(t)},v.isEmpty=function Kd(t){if(null==t)return!0;if(an(t)&&(Ee(t)||"string"==typeof t||"function"==typeof t.splice||Wi(t)||ko(t)||po(t)))return!t.length;var n=Qt(t);if(n==dt||n==Re)return!t.size;if(lr(t))return!bs(t).length;for(var o in t)if(Be.call(t,o))return!1;return!0},v.isEqual=function Yd(t,n){return rr(t,n)},v.isEqualWith=function jd(t,n,o){var f=(o="function"==typeof o?o:e)?o(t,n):e;return f===e?rr(t,n,e,o):!!f},v.isError=Ws,v.isFinite=function Vd(t){return"number"==typeof t&&ua(t)},v.isFunction=Si,v.isInteger=Il,v.isLength=Vr,v.isMap=Dl,v.isMatch=function zd(t,n){return t===n||Cs(t,n,Rs(n))},v.isMatchWith=function Xd(t,n,o){return o="function"==typeof o?o:e,Cs(t,n,Rs(n),o)},v.isNaN=function eh(t){return kl(t)&&t!=+t},v.isNative=function th(t){if(Uf(t))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ta(t)},v.isNil=function ih(t){return null==t},v.isNull=function nh(t){return null===t},v.isNumber=kl,v.isObject=je,v.isObjectLike=et,v.isPlainObject=fr,v.isRegExp=Ks,v.isSafeInteger=function oh(t){return Il(t)&&t>=-le&&t<=le},v.isSet=Zl,v.isString=zr,v.isSymbol=mn,v.isTypedArray=ko,v.isUndefined=function rh(t){return t===e},v.isWeakMap=function sh(t){return et(t)&&Qt(t)==Ke},v.isWeakSet=function ah(t){return et(t)&&"[object WeakSet]"==en(t)},v.join=function fu(t,n){return null==t?"":rc.call(t,n)},v.kebabCase=jh,v.last=Ln,v.lastIndexOf=function uu(t,n,o){var f=null==t?0:t.length;if(!f)return-1;var p=f;return o!==e&&(p=(p=Ae(o))<0?yt(f+p,0):Ht(p,f-1)),n==n?function G(O,R,D){for(var ne=D+1;ne--;)if(O[ne]===R)return ne;return ne}(t,n,p):xo(t,gn,p,!0)},v.lowerCase=Vh,v.lowerFirst=zh,v.lt=lh,v.lte=ch,v.max=function Gp(t){return t&&t.length?kr(t,cn,vs):e},v.maxBy=function Wp(t,n){return t&&t.length?kr(t,me(n,2),vs):e},v.mean=function Kp(t){return To(t,cn)},v.meanBy=function Yp(t,n){return To(t,me(n,2))},v.min=function jp(t){return t&&t.length?kr(t,cn,ws):e},v.minBy=function Vp(t,n){return t&&t.length?kr(t,me(n,2),ws):e},v.stubArray=na,v.stubFalse=ia,v.stubObject=function Lp(){return{}},v.stubString=function Rp(){return""},v.stubTrue=function Up(){return!0},v.multiply=zp,v.nth=function du(t,n){return t&&t.length?Ma(t,Ae(n)):e},v.noConflict=function Op(){return mt._===this&&(mt._=Xl),this},v.noop=ta,v.now=Kr,v.pad=function Xh(t,n,o){t=qe(t);var f=(n=Ae(n))?z(t):0;if(!n||f>=n)return t;var p=(n-f)/2;return Br(Or(p),o)+t+Br(Sr(p),o)},v.padEnd=function ep(t,n,o){t=qe(t);var f=(n=Ae(n))?z(t):0;return n&&f<n?t+Br(n-f,o):t},v.padStart=function tp(t,n,o){t=qe(t);var f=(n=Ae(n))?z(t):0;return n&&f<n?Br(n-f,o)+t:t},v.parseInt=function np(t,n,o){return o||null==n?n=0:n&&(n=+n),lc(qe(t).replace(te,""),n||0)},v.random=function $h(t,n,o){if(o&&"boolean"!=typeof o&&tn(t,n,o)&&(n=o=e),o===e&&("boolean"==typeof n?(o=n,n=e):"boolean"==typeof t&&(o=t,t=e)),t===e&&n===e?(t=0,n=1):(t=Oi(t),n===e?(n=t,t=0):n=Oi(n)),t>n){var f=t;t=n,n=f}if(o||t%1||n%1){var p=da();return Ht(t+p*(n-t+no("1e-"+((p+"").length-1))),n)}return Ts(t,n)},v.reduce=function gd(t,n,o){var f=Ee(t)?qi:Bi,p=arguments.length<3;return f(t,me(n,4),o,p,Hi)},v.reduceRight=function _d(t,n,o){var f=Ee(t)?oa:Bi,p=arguments.length<3;return f(t,me(n,4),o,p,ya)},v.repeat=function ip(t,n,o){return n=(o?tn(t,n,o):n===e)?1:Ae(n),Es(qe(t),n)},v.replace=function op(){var t=arguments,n=qe(t[0]);return t.length<3?n:n.replace(t[1],t[2])},v.result=function Nh(t,n,o){var f=-1,p=(n=$i(n,t)).length;for(p||(p=1,t=e);++f<p;){var y=null==t?e:t[pi(n[f])];y===e&&(f=p,y=o),t=Si(y)?y.call(t):y}return t},v.round=Xp,v.runInContext=O,v.sample=function vd(t){return(Ee(t)?ga:ff)(t)},v.size=function bd(t){if(null==t)return 0;if(an(t))return zr(t)?z(t):t.length;var n=Qt(t);return n==dt||n==Re?t.size:bs(t).length},v.snakeCase=rp,v.some=function wd(t,n,o){var f=Ee(t)?gr:pf;return o&&tn(t,n,o)&&(n=e),f(t,me(n,3))},v.sortedIndex=function yu(t,n){return Lr(t,n)},v.sortedIndexBy=function Cu(t,n,o){return As(t,n,me(o,2))},v.sortedIndexOf=function bu(t,n){var o=null==t?0:t.length;if(o){var f=Lr(t,n);if(f<o&&ei(t[f],n))return f}return-1},v.sortedLastIndex=function wu(t,n){return Lr(t,n,!0)},v.sortedLastIndexBy=function xu(t,n,o){return As(t,n,me(o,2),!0)},v.sortedLastIndexOf=function Tu(t,n){if(null==t?0:t.length){var f=Lr(t,n,!0)-1;if(ei(t[f],n))return f}return-1},v.startCase=ap,v.startsWith=function lp(t,n,o){return t=qe(t),o=null==o?0:co(Ae(o),0,t.length),n=_n(n),t.slice(o,o+n.length)==n},v.subtract=eg,v.sum=function tg(t){return t&&t.length?Ko(t,cn):0},v.sumBy=function ng(t,n){return t&&t.length?Ko(t,me(n,2)):0},v.template=function cp(t,n,o){var f=v.templateSettings;o&&tn(t,n,o)&&(n=e),t=qe(t),n=Xr({},n,f,el);var S,M,p=Xr({},n.imports,f.imports,el),y=St(p),T=jo(p,y),q=0,B=n.interpolate||rt,W="__p += '",X=fs((n.escape||rt).source+"|"+B.source+"|"+(B===_?Tt:rt).source+"|"+(n.evaluate||rt).source+"|$","g"),ae="//# sourceURL="+(Be.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Et+"]")+"\n";t.replace(X,function(ye,Ie,ke,vn,nn,yn){return ke||(ke=vn),W+=t.slice(q,yn).replace(ki,c),Ie&&(S=!0,W+="' +\n__e("+Ie+") +\n'"),nn&&(M=!0,W+="';\n"+nn+";\n__p += '"),ke&&(W+="' +\n((__t = ("+ke+")) == null ? '' : __t) +\n'"),q=yn+ye.length,ye}),W+="';\n";var ve=Be.call(n,"variable")&&n.variable;if(ve){if(_t.test(ve))throw new Te("Invalid `variable` option passed into `_.template`")}else W="with (obj) {\n"+W+"\n}\n";W=(M?W.replace(Ii,""):W).replace(Ft,"$1").replace(hn,"$1;"),W="function("+(ve||"obj")+") {\n"+(ve?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(S?", __e = _.escape":"")+(M?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+W+"return __p\n}";var Se=Gl(function(){return Ne(y,ae+"return "+W).apply(e,T)});if(Se.source=W,Ws(Se))throw Se;return Se},v.times=function qp(t,n){if((t=Ae(t))<1||t>le)return[];var o=Ve,f=Ht(t,Ve);n=me(n),t-=Ve;for(var p=Yo(f,n);++o<t;)n(o);return p},v.toFinite=Oi,v.toInteger=Ae,v.toLength=Ll,v.toLower=function fp(t){return qe(t).toLowerCase()},v.toNumber=Rn,v.toSafeInteger=function fh(t){return t?co(Ae(t),-le,le):0===t?t:0},v.toString=qe,v.toUpper=function up(t){return qe(t).toUpperCase()},v.trim=function dp(t,n,o){if((t=qe(t))&&(o||n===e))return ls(t);if(!t||!(n=_n(n)))return t;var f=V(t),p=V(n);return Gi(f,cs(f,p),s(f,p)+1).join("")},v.trimEnd=function hp(t,n,o){if((t=qe(t))&&(o||n===e))return t.slice(0,fe(t)+1);if(!t||!(n=_n(n)))return t;var f=V(t);return Gi(f,0,s(f,V(n))+1).join("")},v.trimStart=function pp(t,n,o){if((t=qe(t))&&(o||n===e))return t.replace(te,"");if(!t||!(n=_n(n)))return t;var f=V(t);return Gi(f,cs(f,V(n))).join("")},v.truncate=function gp(t,n){var o=30,f="...";if(je(n)){var p="separator"in n?n.separator:p;o="length"in n?Ae(n.length):o,f="omission"in n?_n(n.omission):f}var y=(t=qe(t)).length;if(g(t)){var T=V(t);y=T.length}if(o>=y)return t;var S=o-z(f);if(S<1)return f;var M=T?Gi(T,0,S).join(""):t.slice(0,S);if(p===e)return M+f;if(T&&(S+=M.length-S),Ks(p)){if(t.slice(S).search(p)){var q,B=M;for(p.global||(p=fs(p.source,qe(Di.exec(p))+"g")),p.lastIndex=0;q=p.exec(B);)var W=q.index;M=M.slice(0,W===e?S:W)}}else if(t.indexOf(_n(p),S)!=S){var X=M.lastIndexOf(p);X>-1&&(M=M.slice(0,X))}return M+f},v.unescape=function _p(t){return(t=qe(t))&&Qe.test(t)?t.replace(it,de):t},v.uniqueId=function Bp(t){var n=++Vl;return qe(t)+n},v.upperCase=mp,v.upperFirst=Vs,v.each=wl,v.eachRight=xl,v.first=vl,ea(v,function(){var t={};return di(v,function(n,o){Be.call(v.prototype,o)||(t[o]=n)}),t}(),{chain:!1}),v.VERSION="4.17.21",Jt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){v[t].placeholder=v}),Jt(["drop","take"],function(t,n){De.prototype[t]=function(o){o=o===e?1:yt(Ae(o),0);var f=this.__filtered__&&!n?new De(this):this.clone();return f.__filtered__?f.__takeCount__=Ht(o,f.__takeCount__):f.__views__.push({size:Ht(o,Ve),type:t+(f.__dir__<0?"Right":"")}),f},De.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Jt(["filter","map","takeWhile"],function(t,n){var o=n+1,f=1==o||3==o;De.prototype[t]=function(p){var y=this.clone();return y.__iteratees__.push({iteratee:me(p,3),type:o}),y.__filtered__=y.__filtered__||f,y}}),Jt(["head","last"],function(t,n){var o="take"+(n?"Right":"");De.prototype[t]=function(){return this[o](1).value()[0]}}),Jt(["initial","tail"],function(t,n){var o="drop"+(n?"":"Right");De.prototype[t]=function(){return this.__filtered__?new De(this):this[o](1)}}),De.prototype.compact=function(){return this.filter(cn)},De.prototype.find=function(t){return this.filter(t).head()},De.prototype.findLast=function(t){return this.reverse().find(t)},De.prototype.invokeMap=Pe(function(t,n){return"function"==typeof t?new De(this):this.map(function(o){return or(o,t,n)})}),De.prototype.reject=function(t){return this.filter(jr(me(t)))},De.prototype.slice=function(t,n){t=Ae(t);var o=this;return o.__filtered__&&(t>0||n<0)?new De(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),n!==e&&(o=(n=Ae(n))<0?o.dropRight(-n):o.take(n-t)),o)},De.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},De.prototype.toArray=function(){return this.take(Ve)},di(De.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),f=/^(?:head|last)$/.test(n),p=v[f?"take"+("last"==n?"Right":""):n],y=f||/^find/.test(n);!p||(v.prototype[n]=function(){var T=this.__wrapped__,S=f?[1]:arguments,M=T instanceof De,q=S[0],B=M||Ee(T),W=function(Ie){var ke=p.apply(v,In([Ie],S));return f&&X?ke[0]:ke};B&&o&&"function"==typeof q&&1!=q.length&&(M=B=!1);var X=this.__chain__,ae=!!this.__actions__.length,ve=y&&!X,Se=M&&!ae;if(!y&&B){T=Se?T:new De(this);var ye=t.apply(T,S);return ye.__actions__.push({func:Gr,args:[W],thisArg:e}),new kn(ye,X)}return ve&&Se?t.apply(this,S):(ye=this.thru(W),ve?f?ye.value()[0]:ye.value():ye)})}),Jt(["pop","push","shift","sort","splice","unshift"],function(t){var n=vr[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",f=/^(?:pop|shift)$/.test(t);v.prototype[t]=function(){var p=arguments;if(f&&!this.__chain__){var y=this.value();return n.apply(Ee(y)?y:[],p)}return this[o](function(T){return n.apply(Ee(T)?T:[],p)})}}),di(De.prototype,function(t,n){var o=v[n];if(o){var f=o.name+"";Be.call(Oo,f)||(Oo[f]=[]),Oo[f].push({name:n,func:o})}}),Oo[qr(e,2).name]=[{name:"wrapper",func:e}],De.prototype.clone=function gc(){var t=new De(this.__wrapped__);return t.__actions__=sn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=sn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=sn(this.__views__),t},De.prototype.reverse=function _c(){if(this.__filtered__){var t=new De(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},De.prototype.value=function mc(){var t=this.__wrapped__.value(),n=this.__dir__,o=Ee(t),f=n<0,p=o?t.length:0,y=function Pf(t,n,o){for(var f=-1,p=o.length;++f<p;){var y=o[f],T=y.size;switch(y.type){case"drop":t+=T;break;case"dropRight":n-=T;break;case"take":n=Ht(n,t+T);break;case"takeRight":t=yt(t,n-T)}}return{start:t,end:n}}(0,p,this.__views__),T=y.start,S=y.end,M=S-T,q=f?S:T-1,B=this.__iteratees__,W=B.length,X=0,ae=Ht(M,this.__takeCount__);if(!o||!f&&p==M&&ae==M)return Ra(t,this.__actions__);var ve=[];e:for(;M--&&X<ae;){for(var Se=-1,ye=t[q+=n];++Se<W;){var Ie=B[Se],ke=Ie.iteratee,vn=Ie.type,nn=ke(ye);if(2==vn)ye=nn;else if(!nn){if(1==vn)continue e;break e}}ve[X++]=ye}return ve},v.prototype.at=Wu,v.prototype.chain=function Ku(){return bl(this)},v.prototype.commit=function Yu(){return new kn(this.value(),this.__chain__)},v.prototype.next=function ju(){this.__values__===e&&(this.__values__=Nl(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},v.prototype.plant=function zu(t){for(var n,o=this;o instanceof Ir;){var f=pl(o);f.__index__=0,f.__values__=e,n?p.__wrapped__=f:n=f;var p=f;o=o.__wrapped__}return p.__wrapped__=t,n},v.prototype.reverse=function Xu(){var t=this.__wrapped__;if(t instanceof De){var n=t;return this.__actions__.length&&(n=new De(this)),(n=n.reverse()).__actions__.push({func:Gr,args:[Hs],thisArg:e}),new kn(n,this.__chain__)}return this.thru(Hs)},v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=function ed(){return Ra(this.__wrapped__,this.__actions__)},v.prototype.first=v.prototype.head,Vo&&(v.prototype[Vo]=function Vu(){return this}),v}();mt._=Nt,(U=function(){return Nt}.call(Ot,Y,Ot,fn))!==e&&(fn.exports=U)}.call(this)},8595:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{bA:()=>dt});var U=Y(3184),e=Y(6362),K=Y(4390),xe=Y(6484),Oe=Y(4128),ce=Y(5901),ee=Y(328),Ce=Y(7269);function we(N){const{subscriber:d,counter:_,period:w}=N;d.next(_),this.schedule({subscriber:d,counter:_+1,period:w},w)}var k=Y(2218),J=Y(6957),re=Y(8310),ie=Y(8623),he=Y(5921),Me=Y(5722),lt=Y(6942),$t=Y(3910),Rt=Y(2692),ct=Y(9095),Ge=Y(1317),Ct=Y(1588);function ft(N,d,_){for(let w in d)if(d.hasOwnProperty(w)){const E=d[w];E?N.setProperty(w,E,(null==_?void 0:_.has(w))?"important":""):N.removeProperty(w)}return N}function Mt(N,d){const _=d?"":"none";ft(N.style,{"touch-action":d?"":"none","-webkit-user-drag":d?"":"none","-webkit-tap-highlight-color":d?"":"transparent","user-select":_,"-ms-user-select":_,"-webkit-user-select":_,"-moz-user-select":_})}function tt(N,d,_){ft(N.style,{position:d?"":"fixed",top:d?"":"0",opacity:d?"":"0",left:d?"":"-999em"},_)}function Un(N,d){return d&&"none"!=d?N+" "+d:N}function gi(N){const d=N.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(N)*d}function un(N,d){return N.getPropertyValue(d).split(",").map(w=>w.trim())}function Cn(N){const d=N.getBoundingClientRect();return{top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.width,height:d.height,x:d.x,y:d.y}}function bn(N,d,_){const{top:w,bottom:E,left:P,right:Z}=N;return _>=w&&_<=E&&d>=P&&d<=Z}function ut(N,d,_){N.top+=d,N.bottom=N.top+N.height,N.left+=_,N.right=N.left+N.width}function Gt(N,d,_,w){const{top:E,right:P,bottom:Z,left:$,width:te,height:ge}=N,Ze=te*d,ot=ge*d;return w>E-ot&&w<Z+ot&&_>$-Ze&&_<P+Ze}class le{constructor(d){this._document=d,this.positions=new Map}clear(){this.positions.clear()}cache(d){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),d.forEach(_=>{this.positions.set(_,{scrollPosition:{top:_.scrollTop,left:_.scrollLeft},clientRect:Cn(_)})})}handleScroll(d){const _=(0,K.sA)(d),w=this.positions.get(_);if(!w)return null;const E=w.scrollPosition;let P,Z;if(_===this._document){const ge=this.getViewportScrollPosition();P=ge.top,Z=ge.left}else P=_.scrollTop,Z=_.scrollLeft;const $=E.top-P,te=E.left-Z;return this.positions.forEach((ge,Ze)=>{ge.clientRect&&_!==Ze&&_.contains(Ze)&&ut(ge.clientRect,$,te)}),E.top=P,E.left=Z,{top:$,left:te}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function wn(N){const d=N.cloneNode(!0),_=d.querySelectorAll("[id]"),w=N.nodeName.toLowerCase();d.removeAttribute("id");for(let E=0;E<_.length;E++)_[E].removeAttribute("id");return"canvas"===w?xn(N,d):("input"===w||"select"===w||"textarea"===w)&&dn(N,d),Pt("canvas",N,d,xn),Pt("input, textarea, select",N,d,dn),d}function Pt(N,d,_,w){const E=d.querySelectorAll(N);if(E.length){const P=_.querySelectorAll(N);for(let Z=0;Z<E.length;Z++)w(E[Z],P[Z])}}let Ve=0;function dn(N,d){"file"!==d.type&&(d.value=N.value),"radio"===d.type&&d.name&&(d.name=`mat-clone-${d.name}-${Ve++}`)}function xn(N,d){const _=d.getContext("2d");if(_)try{_.drawImage(N,0,0)}catch(w){}}const qn=(0,K.i$)({passive:!0}),Ut=(0,K.i$)({passive:!1}),En=new Set(["position"]);class bt{constructor(d,_,w,E,P,Z){this._config=_,this._document=w,this._ngZone=E,this._viewportRuler=P,this._dragDropRegistry=Z,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new k.xQ,this._pointerMoveSubscription=J.w.EMPTY,this._pointerUpSubscription=J.w.EMPTY,this._scrollSubscription=J.w.EMPTY,this._resizeSubscription=J.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new k.xQ,this.started=new k.xQ,this.released=new k.xQ,this.ended=new k.xQ,this.entered=new k.xQ,this.exited=new k.xQ,this.dropped=new k.xQ,this.moved=this._moveEvents,this._pointerDown=$=>{if(this.beforeStarted.next(),this._handles.length){const te=this._getTargetHandle($);te&&!this._disabledHandles.has(te)&&!this.disabled&&this._initializeDragSequence(te,$)}else this.disabled||this._initializeDragSequence(this._rootElement,$)},this._pointerMove=$=>{const te=this._getPointerPositionOnPage($);if(!this._hasStartedDragging){if(Math.abs(te.x-this._pickupPositionOnPage.x)+Math.abs(te.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const xt=Date.now()>=this._dragStartTime+this._getDragStartDelay($),_t=this._dropContainer;if(!xt)return void this._endDragSequence($);(!_t||!_t.isDragging()&&!_t.isReceiving())&&($.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence($)))}return}$.preventDefault();const ge=this._getConstrainedPointerPosition(te);if(this._hasMoved=!0,this._lastKnownPointerPosition=te,this._updatePointerDirectionDelta(ge),this._dropContainer)this._updateActiveDropContainer(ge,te);else{const Ze=this._activeTransform;Ze.x=ge.x-this._pickupPositionOnPage.x+this._passiveTransform.x,Ze.y=ge.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(Ze.x,Ze.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:ge,event:$,distance:this._getDragDistance(ge),delta:this._pointerDirectionDelta})})},this._pointerUp=$=>{this._endDragSequence($)},this._nativeDragStart=$=>{if(this._handles.length){const te=this._getTargetHandle($);te&&!this._disabledHandles.has(te)&&!this.disabled&&$.preventDefault()}else this.disabled||$.preventDefault()},this.withRootElement(d).withParent(_.parentDragRef||null),this._parentPositions=new le(w),Z.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(d){const _=(0,xe.Ig)(d);_!==this._disabled&&(this._disabled=_,this._toggleNativeDragInteractions(),this._handles.forEach(w=>Mt(w,_)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(d){this._handles=d.map(w=>(0,xe.fI)(w)),this._handles.forEach(w=>Mt(w,this.disabled)),this._toggleNativeDragInteractions();const _=new Set;return this._disabledHandles.forEach(w=>{this._handles.indexOf(w)>-1&&_.add(w)}),this._disabledHandles=_,this}withPreviewTemplate(d){return this._previewTemplate=d,this}withPlaceholderTemplate(d){return this._placeholderTemplate=d,this}withRootElement(d){const _=(0,xe.fI)(d);return _!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{_.addEventListener("mousedown",this._pointerDown,Ut),_.addEventListener("touchstart",this._pointerDown,qn),_.addEventListener("dragstart",this._nativeDragStart,Ut)}),this._initialTransform=void 0,this._rootElement=_),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(d){return this._boundaryElement=d?(0,xe.fI)(d):null,this._resizeSubscription.unsubscribe(),d&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(d){return this._parentDragRef=d,this}dispose(){var d,_;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(d=this._rootElement)||void 0===d||d.remove()),null===(_=this._anchor)||void 0===_||_.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(d){!this._disabledHandles.has(d)&&this._handles.indexOf(d)>-1&&(this._disabledHandles.add(d),Mt(d,!0))}enableHandle(d){this._disabledHandles.has(d)&&(this._disabledHandles.delete(d),Mt(d,this.disabled))}withDirection(d){return this._direction=d,this}_withDropContainer(d){this._dropContainer=d}getFreeDragPosition(){const d=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:d.x,y:d.y}}setFreeDragPosition(d){return this._activeTransform={x:0,y:0},this._passiveTransform.x=d.x,this._passiveTransform.y=d.y,this._dropContainer||this._applyRootElementTransform(d.x,d.y),this}withPreviewContainer(d){return this._previewContainer=d,this}_sortFromLastPointerPosition(){const d=this._lastKnownPointerPosition;d&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(d),d)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var d,_;null===(d=this._preview)||void 0===d||d.remove(),null===(_=this._previewRef)||void 0===_||_.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var d,_;null===(d=this._placeholder)||void 0===d||d.remove(),null===(_=this._placeholderRef)||void 0===_||_.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(d){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(d),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const _=this._getPointerPositionOnPage(d);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(_),dropPoint:_})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(d){Dt(d)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const _=this._dropContainer;if(_){const w=this._rootElement,E=w.parentNode,P=this._placeholder=this._createPlaceholderElement(),Z=this._anchor=this._anchor||this._document.createComment(""),$=this._getShadowRoot();E.insertBefore(Z,w),this._initialTransform=w.style.transform||"",this._preview=this._createPreviewElement(),tt(w,!1,En),this._document.body.appendChild(E.replaceChild(P,w)),this._getPreviewInsertionPoint(E,$).appendChild(this._preview),this.started.next({source:this}),_.start(),this._initialContainer=_,this._initialIndex=_.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(_?_.getScrollableParents():[])}_initializeDragSequence(d,_){this._parentDragRef&&_.stopPropagation();const w=this.isDragging(),E=Dt(_),P=!E&&0!==_.button,Z=this._rootElement,$=(0,K.sA)(_),te=!E&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),ge=E?(0,Oe.yG)(_):(0,Oe.X6)(_);if($&&$.draggable&&"mousedown"===_.type&&_.preventDefault(),w||P||te||ge)return;if(this._handles.length){const wt=Z.style;this._rootElementTapHighlight=wt.webkitTapHighlightColor||"",wt.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(wt=>this._updateOnScroll(wt)),this._boundaryElement&&(this._boundaryRect=Cn(this._boundaryElement));const Ze=this._previewTemplate;this._pickupPositionInElement=Ze&&Ze.template&&!Ze.matchSize?{x:0,y:0}:this._getPointerPositionInElement(d,_);const ot=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(_);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:ot.x,y:ot.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,_)}_cleanupDragArtifacts(d){tt(this._rootElement,!0,En),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const _=this._dropContainer,w=_.getItemIndex(this),E=this._getPointerPositionOnPage(d),P=this._getDragDistance(E),Z=_._isOverContainer(E.x,E.y);this.ended.next({source:this,distance:P,dropPoint:E}),this.dropped.next({item:this,currentIndex:w,previousIndex:this._initialIndex,container:_,previousContainer:this._initialContainer,isPointerOverContainer:Z,distance:P,dropPoint:E}),_.drop(this,w,this._initialIndex,this._initialContainer,Z,P,E),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:d,y:_},{x:w,y:E}){let P=this._initialContainer._getSiblingContainerFromPosition(this,d,_);!P&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(d,_)&&(P=this._initialContainer),P&&P!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=P,this._dropContainer.enter(this,d,_,P===this._initialContainer&&P.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:P,currentIndex:P.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(w,E),this._dropContainer._sortItem(this,d,_,this._pointerDirectionDelta),this._applyPreviewTransform(d-this._pickupPositionInElement.x,_-this._pickupPositionInElement.y))}_createPreviewElement(){const d=this._previewTemplate,_=this.previewClass,w=d?d.template:null;let E;if(w&&d){const P=d.matchSize?this._rootElement.getBoundingClientRect():null,Z=d.viewContainer.createEmbeddedView(w,d.context);Z.detectChanges(),E=Fn(Z,this._document),this._previewRef=Z,d.matchSize?kt(E,P):E.style.transform=ze(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const P=this._rootElement;E=wn(P),kt(E,P.getBoundingClientRect()),this._initialTransform&&(E.style.transform=this._initialTransform)}return ft(E.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},En),Mt(E,!1),E.classList.add("cdk-drag-preview"),E.setAttribute("dir",this._direction),_&&(Array.isArray(_)?_.forEach(P=>E.classList.add(P)):E.classList.add(_)),E}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const d=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(d.left,d.top);const _=function ni(N){const d=getComputedStyle(N),_=un(d,"transition-property"),w=_.find($=>"transform"===$||"all"===$);if(!w)return 0;const E=_.indexOf(w),P=un(d,"transition-duration"),Z=un(d,"transition-delay");return gi(P[E])+gi(Z[E])}(this._preview);return 0===_?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(w=>{const E=Z=>{var $;(!Z||(0,K.sA)(Z)===this._preview&&"transform"===Z.propertyName)&&(null===($=this._preview)||void 0===$||$.removeEventListener("transitionend",E),w(),clearTimeout(P))},P=setTimeout(E,1.5*_);this._preview.addEventListener("transitionend",E)}))}_createPlaceholderElement(){const d=this._placeholderTemplate,_=d?d.template:null;let w;return _?(this._placeholderRef=d.viewContainer.createEmbeddedView(_,d.context),this._placeholderRef.detectChanges(),w=Fn(this._placeholderRef,this._document)):w=wn(this._rootElement),w.style.pointerEvents="none",w.classList.add("cdk-drag-placeholder"),w}_getPointerPositionInElement(d,_){const w=this._rootElement.getBoundingClientRect(),E=d===this._rootElement?null:d,P=E?E.getBoundingClientRect():w,Z=Dt(_)?_.targetTouches[0]:_,$=this._getViewportScrollPosition(),te=Z.pageX-P.left-$.left,ge=Z.pageY-P.top-$.top;return{x:P.left-w.left+te,y:P.top-w.top+ge}}_getPointerPositionOnPage(d){const _=this._getViewportScrollPosition(),w=Dt(d)?d.touches[0]||d.changedTouches[0]||{pageX:0,pageY:0}:d,E=w.pageX-_.left,P=w.pageY-_.top;if(this._ownerSVGElement){const Z=this._ownerSVGElement.getScreenCTM();if(Z){const $=this._ownerSVGElement.createSVGPoint();return $.x=E,$.y=P,$.matrixTransform(Z.inverse())}}return{x:E,y:P}}_getConstrainedPointerPosition(d){const _=this._dropContainer?this._dropContainer.lockAxis:null;let{x:w,y:E}=this.constrainPosition?this.constrainPosition(d,this):d;if("x"===this.lockAxis||"x"===_?E=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===_)&&(w=this._pickupPositionOnPage.x),this._boundaryRect){const{x:P,y:Z}=this._pickupPositionInElement,$=this._boundaryRect,{width:te,height:ge}=this._getPreviewRect(),Ze=$.top+Z,ot=$.bottom-(ge-Z);w=It(w,$.left+P,$.right-(te-P)),E=It(E,Ze,ot)}return{x:w,y:E}}_updatePointerDirectionDelta(d){const{x:_,y:w}=d,E=this._pointerDirectionDelta,P=this._pointerPositionAtLastDirectionChange,Z=Math.abs(_-P.x),$=Math.abs(w-P.y);return Z>this._config.pointerDirectionChangeThreshold&&(E.x=_>P.x?1:-1,P.x=_),$>this._config.pointerDirectionChangeThreshold&&(E.y=w>P.y?1:-1,P.y=w),E}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const d=this._handles.length>0||!this.isDragging();d!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=d,Mt(this._rootElement,d))}_removeRootElementListeners(d){d.removeEventListener("mousedown",this._pointerDown,Ut),d.removeEventListener("touchstart",this._pointerDown,qn),d.removeEventListener("dragstart",this._nativeDragStart,Ut)}_applyRootElementTransform(d,_){const w=ze(d,_),E=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=E.transform&&"none"!=E.transform?E.transform:""),E.transform=Un(w,this._initialTransform)}_applyPreviewTransform(d,_){var w;const E=(null===(w=this._previewTemplate)||void 0===w?void 0:w.template)?void 0:this._initialTransform,P=ze(d,_);this._preview.style.transform=Un(P,E)}_getDragDistance(d){const _=this._pickupPositionOnPage;return _?{x:d.x-_.x,y:d.y-_.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:d,y:_}=this._passiveTransform;if(0===d&&0===_||this.isDragging()||!this._boundaryElement)return;const w=this._boundaryElement.getBoundingClientRect(),E=this._rootElement.getBoundingClientRect();if(0===w.width&&0===w.height||0===E.width&&0===E.height)return;const P=w.left-E.left,Z=E.right-w.right,$=w.top-E.top,te=E.bottom-w.bottom;w.width>E.width?(P>0&&(d+=P),Z>0&&(d-=Z)):d=0,w.height>E.height?($>0&&(_+=$),te>0&&(_-=te)):_=0,(d!==this._passiveTransform.x||_!==this._passiveTransform.y)&&this.setFreeDragPosition({y:_,x:d})}_getDragStartDelay(d){const _=this.dragStartDelay;return"number"==typeof _?_:Dt(d)?_.touch:_?_.mouse:0}_updateOnScroll(d){const _=this._parentPositions.handleScroll(d);if(_){const w=(0,K.sA)(d);this._boundaryRect&&w!==this._boundaryElement&&w.contains(this._boundaryElement)&&ut(this._boundaryRect,_.top,_.left),this._pickupPositionOnPage.x+=_.left,this._pickupPositionOnPage.y+=_.top,this._dropContainer||(this._activeTransform.x-=_.left,this._activeTransform.y-=_.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var d;return(null===(d=this._parentPositions.positions.get(this._document))||void 0===d?void 0:d.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,K.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(d,_){const w=this._previewContainer||"global";if("parent"===w)return d;if("global"===w){const E=this._document;return _||E.fullscreenElement||E.webkitFullscreenElement||E.mozFullScreenElement||E.msFullscreenElement||E.body}return(0,xe.fI)(w)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(d){return this._handles.find(_=>d.target&&(d.target===_||_.contains(d.target)))}}function ze(N,d){return`translate3d(${Math.round(N)}px, ${Math.round(d)}px, 0)`}function It(N,d,_){return Math.max(d,Math.min(_,N))}function Dt(N){return"t"===N.type[0]}function Fn(N,d){const _=N.rootNodes;if(1===_.length&&_[0].nodeType===d.ELEMENT_NODE)return _[0];const w=d.createElement("div");return _.forEach(E=>w.appendChild(E)),w}function kt(N,d){N.style.width=`${d.width}px`,N.style.height=`${d.height}px`,N.style.transform=ze(d.left,d.top)}function dt(N,d,_){const w=$e(d,N.length-1),E=$e(_,N.length-1);if(w===E)return;const P=N[w],Z=E<w?-1:1;for(let $=w;$!==E;$+=Z)N[$]=N[$+Z];N[E]=P}function $e(N,d){return Math.max(0,Math.min(d,N))}class Xe{constructor(d,_,w,E,P){this._dragDropRegistry=_,this._ngZone=E,this._viewportRuler=P,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new k.xQ,this.entered=new k.xQ,this.exited=new k.xQ,this.dropped=new k.xQ,this.sorted=new k.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=J.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new k.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Le(N=0,d=ee.P){return(!(0,Ce.k)(N)||N<0)&&(N=0),(!d||"function"!=typeof d.schedule)&&(d=ee.P),new ce.y(_=>(_.add(d.schedule(we,N,{subscriber:_,counter:0,period:N})),_))}(0,re.Z).pipe((0,he.R)(this._stopScrollTimers)).subscribe(()=>{const Z=this._scrollNode,$=this.autoScrollStep;1===this._verticalScrollDirection?Z.scrollBy(0,-$):2===this._verticalScrollDirection&&Z.scrollBy(0,$),1===this._horizontalScrollDirection?Z.scrollBy(-$,0):2===this._horizontalScrollDirection&&Z.scrollBy($,0)})},this.element=(0,xe.fI)(d),this._document=w,this.withScrollableParents([this.element]),_.registerDropContainer(this),this._parentPositions=new le(w)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(d,_,w,E){let P;this._draggingStarted(),null==E?(P=this.sortingDisabled?this._draggables.indexOf(d):-1,-1===P&&(P=this._getItemIndexFromPointerPosition(d,_,w))):P=E;const Z=this._activeDraggables,$=Z.indexOf(d),te=d.getPlaceholderElement();let ge=Z[P];if(ge===d&&(ge=Z[P+1]),!ge&&(null==P||-1===P||P<Z.length-1)&&this._shouldEnterAsFirstChild(_,w)&&(ge=Z[0]),$>-1&&Z.splice($,1),ge&&!this._dragDropRegistry.isDragging(ge)){const Ze=ge.getRootElement();Ze.parentElement.insertBefore(te,Ze),Z.splice(P,0,d)}else(0,xe.fI)(this.element).appendChild(te),Z.push(d);te.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:d,container:this,currentIndex:this.getItemIndex(d)})}exit(d){this._reset(),this.exited.next({item:d,container:this})}drop(d,_,w,E,P,Z,$){this._reset(),this.dropped.next({item:d,currentIndex:_,previousIndex:w,container:this,previousContainer:E,isPointerOverContainer:P,distance:Z,dropPoint:$})}withItems(d){const _=this._draggables;return this._draggables=d,d.forEach(w=>w._withDropContainer(this)),this.isDragging()&&(_.filter(E=>E.isDragging()).every(E=>-1===d.indexOf(E))?this._reset():this._cacheItems()),this}withDirection(d){return this._direction=d,this}connectedTo(d){return this._siblings=d.slice(),this}withOrientation(d){return this._orientation=d,this}withScrollableParents(d){const _=(0,xe.fI)(this.element);return this._scrollableElements=-1===d.indexOf(_)?[_,...d]:d.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(d){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(w=>w.drag===d):this._draggables.indexOf(d)}isReceiving(){return this._activeSiblings.size>0}_sortItem(d,_,w,E){if(this.sortingDisabled||!this._clientRect||!Gt(this._clientRect,.05,_,w))return;const P=this._itemPositions,Z=this._getItemIndexFromPointerPosition(d,_,w,E);if(-1===Z&&P.length>0)return;const $="horizontal"===this._orientation,te=P.findIndex(Tt=>Tt.drag===d),ge=P[Z],Ze=P[te].clientRect,ot=ge.clientRect,wt=te>Z?1:-1,xt=this._getItemOffsetPx(Ze,ot,wt),_t=this._getSiblingOffsetPx(te,P,wt),Qn=P.slice();dt(P,te,Z),this.sorted.next({previousIndex:te,currentIndex:Z,container:this,item:d}),P.forEach((Tt,Di)=>{if(Qn[Di]===Tt)return;const si=Tt.drag===d,ai=si?xt:_t,_i=si?d.getPlaceholderElement():Tt.drag.getRootElement();Tt.offset+=ai,$?(_i.style.transform=Un(`translate3d(${Math.round(Tt.offset)}px, 0, 0)`,Tt.initialTransform),ut(Tt.clientRect,0,ai)):(_i.style.transform=Un(`translate3d(0, ${Math.round(Tt.offset)}px, 0)`,Tt.initialTransform),ut(Tt.clientRect,ai,0))}),this._previousSwap.overlaps=bn(ot,_,w),this._previousSwap.drag=ge.drag,this._previousSwap.delta=$?E.x:E.y}_startScrollingIfNecessary(d,_){if(this.autoScrollDisabled)return;let w,E=0,P=0;if(this._parentPositions.positions.forEach((Z,$)=>{$===this._document||!Z.clientRect||w||Gt(Z.clientRect,.05,d,_)&&([E,P]=function qt(N,d,_,w){const E=Re(d,w),P=pt(d,_);let Z=0,$=0;if(E){const te=N.scrollTop;1===E?te>0&&(Z=1):N.scrollHeight-te>N.clientHeight&&(Z=2)}if(P){const te=N.scrollLeft;1===P?te>0&&($=1):N.scrollWidth-te>N.clientWidth&&($=2)}return[Z,$]}($,Z.clientRect,d,_),(E||P)&&(w=$))}),!E&&!P){const{width:Z,height:$}=this._viewportRuler.getViewportSize(),te={width:Z,height:$,top:0,right:Z,bottom:$,left:0};E=Re(te,_),P=pt(te,d),w=window}w&&(E!==this._verticalScrollDirection||P!==this._horizontalScrollDirection||w!==this._scrollNode)&&(this._verticalScrollDirection=E,this._horizontalScrollDirection=P,this._scrollNode=w,(E||P)&&w?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const d=(0,xe.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=d.msScrollSnapType||d.scrollSnapType||"",d.scrollSnapType=d.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const d=(0,xe.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(d).clientRect}_cacheItemPositions(){const d="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(_=>{const w=_.getVisibleElement();return{drag:_,offset:0,initialTransform:w.style.transform||"",clientRect:Cn(w)}}).sort((_,w)=>d?_.clientRect.left-w.clientRect.left:_.clientRect.top-w.clientRect.top)}_reset(){this._isDragging=!1;const d=(0,xe.fI)(this.element).style;d.scrollSnapType=d.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(_=>{var w;const E=_.getRootElement();if(E){const P=null===(w=this._itemPositions.find(Z=>Z.drag===_))||void 0===w?void 0:w.initialTransform;E.style.transform=P||""}}),this._siblings.forEach(_=>_._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(d,_,w){const E="horizontal"===this._orientation,P=_[d].clientRect,Z=_[d+-1*w];let $=P[E?"width":"height"]*w;if(Z){const te=E?"left":"top",ge=E?"right":"bottom";-1===w?$-=Z.clientRect[te]-P[ge]:$+=P[te]-Z.clientRect[ge]}return $}_getItemOffsetPx(d,_,w){const E="horizontal"===this._orientation;let P=E?_.left-d.left:_.top-d.top;return-1===w&&(P+=E?_.width-d.width:_.height-d.height),P}_shouldEnterAsFirstChild(d,_){if(!this._activeDraggables.length)return!1;const w=this._itemPositions,E="horizontal"===this._orientation;if(w[0].drag!==this._activeDraggables[0]){const Z=w[w.length-1].clientRect;return E?d>=Z.right:_>=Z.bottom}{const Z=w[0].clientRect;return E?d<=Z.left:_<=Z.top}}_getItemIndexFromPointerPosition(d,_,w,E){const P="horizontal"===this._orientation,Z=this._itemPositions.findIndex(({drag:$,clientRect:te})=>{if($===d)return!1;if(E){const ge=P?E.x:E.y;if($===this._previousSwap.drag&&this._previousSwap.overlaps&&ge===this._previousSwap.delta)return!1}return P?_>=Math.floor(te.left)&&_<Math.floor(te.right):w>=Math.floor(te.top)&&w<Math.floor(te.bottom)});return-1!==Z&&this.sortPredicate(Z,d,this)?Z:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(d,_){return null!=this._clientRect&&bn(this._clientRect,d,_)}_getSiblingContainerFromPosition(d,_,w){return this._siblings.find(E=>E._canReceive(d,_,w))}_canReceive(d,_,w){if(!this._clientRect||!bn(this._clientRect,_,w)||!this.enterPredicate(d,this))return!1;const E=this._getShadowRoot().elementFromPoint(_,w);if(!E)return!1;const P=(0,xe.fI)(this.element);return E===P||P.contains(E)}_startReceiving(d,_){const w=this._activeSiblings;!w.has(d)&&_.every(E=>this.enterPredicate(E,this)||this._draggables.indexOf(E)>-1)&&(w.add(d),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(d){this._activeSiblings.delete(d),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(d=>{if(this.isDragging()){const _=this._parentPositions.handleScroll(d);_&&(this._itemPositions.forEach(({clientRect:w})=>{ut(w,_.top,_.left)}),this._itemPositions.forEach(({drag:w})=>{this._dragDropRegistry.isDragging(w)&&w._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const d=(0,K.kV)((0,xe.fI)(this.element));this._cachedShadowRoot=d||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const d=this._activeDraggables.filter(_=>_.isDragging());this._siblings.forEach(_=>_._startReceiving(this,d))}}function Re(N,d){const{top:_,bottom:w,height:E}=N,P=.05*E;return d>=_-P&&d<=_+P?1:d>=w-P&&d<=w+P?2:0}function pt(N,d){const{left:_,right:w,width:E}=N,P=.05*E;return d>=_-P&&d<=_+P?1:d>=w-P&&d<=w+P?2:0}const Bn=(0,K.i$)({passive:!1,capture:!0});class Ke{constructor(d,_){this._ngZone=d,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=w=>w.isDragging(),this.pointerMove=new k.xQ,this.pointerUp=new k.xQ,this.scroll=new k.xQ,this._preventDefaultWhileDragging=w=>{this._activeDragInstances.length>0&&w.preventDefault()},this._persistentTouchmoveListener=w=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&w.preventDefault(),this.pointerMove.next(w))},this._document=_}registerDropContainer(d){this._dropInstances.has(d)||this._dropInstances.add(d)}registerDragItem(d){this._dragInstances.add(d),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Bn)})}removeDropContainer(d){this._dropInstances.delete(d)}removeDragItem(d){this._dragInstances.delete(d),this.stopDragging(d),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Bn)}startDragging(d,_){if(!(this._activeDragInstances.indexOf(d)>-1)&&(this._activeDragInstances.push(d),1===this._activeDragInstances.length)){const w=_.type.startsWith("touch");this._globalListeners.set(w?"touchend":"mouseup",{handler:E=>this.pointerUp.next(E),options:!0}).set("scroll",{handler:E=>this.scroll.next(E),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Bn}),w||this._globalListeners.set("mousemove",{handler:E=>this.pointerMove.next(E),options:Bn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((E,P)=>{this._document.addEventListener(P,E.handler,E.options)})})}}stopDragging(d){const _=this._activeDragInstances.indexOf(d);_>-1&&(this._activeDragInstances.splice(_,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(d){return this._activeDragInstances.indexOf(d)>-1}scrolled(d){const _=[this.scroll];return d&&d!==this._document&&_.push(new ce.y(w=>this._ngZone.runOutsideAngular(()=>{const P=Z=>{this._activeDragInstances.length&&w.next(Z)};return d.addEventListener("scroll",P,!0),()=>{d.removeEventListener("scroll",P,!0)}}))),(0,ie.T)(..._)}ngOnDestroy(){this._dragInstances.forEach(d=>this.removeDragItem(d)),this._dropInstances.forEach(d=>this.removeDropContainer(d)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((d,_)=>{this._document.removeEventListener(_,d.handler,d.options)}),this._globalListeners.clear()}}Ke.\u0275fac=function(d){return new(d||Ke)(U.LFG(U.R0b),U.LFG(e.K0))},Ke.\u0275prov=U.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"});const Pi={dragStartThreshold:5,pointerDirectionChangeThreshold:5};class We{constructor(d,_,w,E){this._document=d,this._ngZone=_,this._viewportRuler=w,this._dragDropRegistry=E}createDrag(d,_=Pi){return new bt(d,_,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(d){return new Xe(d,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}We.\u0275fac=function(d){return new(d||We)(U.LFG(e.K0),U.LFG(U.R0b),U.LFG(Ge.rL),U.LFG(Ke))},We.\u0275prov=U.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"});const Wt=new U.OlP("CDK_DRAG_PARENT"),Jn=new U.OlP("CdkDropListGroup");class Kt{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(d){this._disabled=(0,xe.Ig)(d)}ngOnDestroy(){this._items.clear()}}Kt.\u0275fac=function(d){return new(d||Kt)},Kt.\u0275dir=U.lG2({type:Kt,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[U._Bn([{provide:Jn,useExisting:Kt}])]});const oi=new U.OlP("CDK_DRAG_CONFIG");let nt=0;const Hn=new U.OlP("CdkDropList");class gt{constructor(d,_,w,E,P,Z,$){this.element=d,this._changeDetectorRef=w,this._scrollDispatcher=E,this._dir=P,this._group=Z,this._destroyed=new k.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+nt++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new U.vpe,this.entered=new U.vpe,this.exited=new U.vpe,this.sorted=new U.vpe,this._unsortedItems=new Set,this._dropListRef=_.createDropList(d),this._dropListRef.data=this,$&&this._assignDefaults($),this._dropListRef.enterPredicate=(te,ge)=>this.enterPredicate(te.data,ge.data),this._dropListRef.sortPredicate=(te,ge,Ze)=>this.sortPredicate(te,ge.data,Ze.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),gt._dropLists.push(this),Z&&Z._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(d){this._dropListRef.disabled=this._disabled=(0,xe.Ig)(d)}addItem(d){this._unsortedItems.add(d),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(d){this._unsortedItems.delete(d),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((d,_)=>d._dragRef.getVisibleElement().compareDocumentPosition(_._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const d=gt._dropLists.indexOf(this);d>-1&&gt._dropLists.splice(d,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(d){this._dir&&this._dir.change.pipe((0,Me.O)(this._dir.value),(0,he.R)(this._destroyed)).subscribe(_=>d.withDirection(_)),d.beforeStarted.subscribe(()=>{const _=(0,xe.Eq)(this.connectedTo).map(w=>{if("string"==typeof w){return gt._dropLists.find(P=>P.id===w)}return w});if(this._group&&this._group._items.forEach(w=>{-1===_.indexOf(w)&&_.push(w)}),!this._scrollableParentsResolved){const w=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(E=>E.getElementRef().nativeElement);this._dropListRef.withScrollableParents(w),this._scrollableParentsResolved=!0}d.disabled=this.disabled,d.lockAxis=this.lockAxis,d.sortingDisabled=(0,xe.Ig)(this.sortingDisabled),d.autoScrollDisabled=(0,xe.Ig)(this.autoScrollDisabled),d.autoScrollStep=(0,xe.su)(this.autoScrollStep,2),d.connectedTo(_.filter(w=>w&&w!==this).map(w=>w._dropListRef)).withOrientation(this.orientation)})}_handleEvents(d){d.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),d.entered.subscribe(_=>{this.entered.emit({container:this,item:_.item.data,currentIndex:_.currentIndex})}),d.exited.subscribe(_=>{this.exited.emit({container:this,item:_.item.data}),this._changeDetectorRef.markForCheck()}),d.sorted.subscribe(_=>{this.sorted.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,container:this,item:_.item.data})}),d.dropped.subscribe(_=>{this.dropped.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,previousContainer:_.previousContainer.data,container:_.container.data,item:_.item.data,isPointerOverContainer:_.isPointerOverContainer,distance:_.distance,dropPoint:_.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(d){const{lockAxis:_,draggingDisabled:w,sortingDisabled:E,listAutoScrollDisabled:P,listOrientation:Z}=d;this.disabled=null!=w&&w,this.sortingDisabled=null!=E&&E,this.autoScrollDisabled=null!=P&&P,this.orientation=Z||"vertical",_&&(this.lockAxis=_)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(d=>d._dragRef))}}gt._dropLists=[],gt.\u0275fac=function(d){return new(d||gt)(U.Y36(U.SBq),U.Y36(We),U.Y36(U.sBO),U.Y36(Ge.mF),U.Y36(Ct.Is,8),U.Y36(Jn,12),U.Y36(oi,8))},gt.\u0275dir=U.lG2({type:gt,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(d,_){2&d&&(U.uIk("id",_.id),U.ekj("cdk-drop-list-disabled",_.disabled)("cdk-drop-list-dragging",_._dropListRef.isDragging())("cdk-drop-list-receiving",_._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[U._Bn([{provide:Jn,useValue:void 0},{provide:Hn,useExisting:gt}])]});const Zt=new U.OlP("CdkDragHandle");class Ye{constructor(d,_){this.element=d,this._stateChanges=new k.xQ,this._disabled=!1,this._parentDrag=_}get disabled(){return this._disabled}set disabled(d){this._disabled=(0,xe.Ig)(d),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}Ye.\u0275fac=function(d){return new(d||Ye)(U.Y36(U.SBq),U.Y36(Wt,12))},Ye.\u0275dir=U.lG2({type:Ye,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[U._Bn([{provide:Zt,useExisting:Ye}])]});const Ii=new U.OlP("CdkDragPlaceholder");class Ft{constructor(d){this.templateRef=d}}Ft.\u0275fac=function(d){return new(d||Ft)(U.Y36(U.Rgc))},Ft.\u0275dir=U.lG2({type:Ft,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[U._Bn([{provide:Ii,useExisting:Ft}])]});const hn=new U.OlP("CdkDragPreview");class it{constructor(d){this.templateRef=d,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(d){this._matchSize=(0,xe.Ig)(d)}}it.\u0275fac=function(d){return new(d||it)(U.Y36(U.Rgc))},it.\u0275dir=U.lG2({type:it,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:"matchSize"},features:[U._Bn([{provide:hn,useExisting:it}])]});class Qe{constructor(d,_,w,E,P,Z,$,te,ge,Ze,ot){this.element=d,this.dropContainer=_,this._ngZone=E,this._viewContainerRef=P,this._dir=$,this._changeDetectorRef=ge,this._selfHandle=Ze,this._parentDrag=ot,this._destroyed=new k.xQ,this.started=new U.vpe,this.released=new U.vpe,this.ended=new U.vpe,this.entered=new U.vpe,this.exited=new U.vpe,this.dropped=new U.vpe,this.moved=new ce.y(wt=>{const xt=this._dragRef.moved.pipe((0,lt.U)(_t=>({source:this,pointerPosition:_t.pointerPosition,event:_t.event,delta:_t.delta,distance:_t.distance}))).subscribe(wt);return()=>{xt.unsubscribe()}}),this._dragRef=te.createDrag(d,{dragStartThreshold:Z&&null!=Z.dragStartThreshold?Z.dragStartThreshold:5,pointerDirectionChangeThreshold:Z&&null!=Z.pointerDirectionChangeThreshold?Z.pointerDirectionChangeThreshold:5,zIndex:null==Z?void 0:Z.zIndex}),this._dragRef.data=this,Qe._dragInstances.push(this),Z&&this._assignDefaults(Z),_&&(this._dragRef._withDropContainer(_._dropListRef),_.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(d){this._disabled=(0,xe.Ig)(d),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,$t.q)(1),(0,he.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(d){const _=d.rootElementSelector,w=d.freeDragPosition;_&&!_.firstChange&&this._updateRootElement(),w&&!w.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const d=Qe._dragInstances.indexOf(this);d>-1&&Qe._dragInstances.splice(d,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var d;const _=this.element.nativeElement;let w=_;this.rootElementSelector&&(w=void 0!==_.closest?_.closest(this.rootElementSelector):null===(d=_.parentElement)||void 0===d?void 0:d.closest(this.rootElementSelector)),this._dragRef.withRootElement(w||_)}_getBoundaryElement(){const d=this.boundaryElement;return d?"string"==typeof d?this.element.nativeElement.closest(d):(0,xe.fI)(d):null}_syncInputs(d){d.beforeStarted.subscribe(()=>{if(!d.isDragging()){const _=this._dir,w=this.dragStartDelay,E=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,P=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;d.disabled=this.disabled,d.lockAxis=this.lockAxis,d.dragStartDelay="object"==typeof w&&w?w:(0,xe.su)(w),d.constrainPosition=this.constrainPosition,d.previewClass=this.previewClass,d.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(E).withPreviewTemplate(P).withPreviewContainer(this.previewContainer||"global"),_&&d.withDirection(_.value)}}),d.beforeStarted.pipe((0,$t.q)(1)).subscribe(()=>{var _;if(this._parentDrag)return void d.withParent(this._parentDrag._dragRef);let w=this.element.nativeElement.parentElement;for(;w;){if(w.classList.contains("cdk-drag")){d.withParent((null===(_=Qe._dragInstances.find(E=>E.element.nativeElement===w))||void 0===_?void 0:_._dragRef)||null);break}w=w.parentElement}})}_handleEvents(d){d.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),d.released.subscribe(()=>{this.released.emit({source:this})}),d.ended.subscribe(_=>{this.ended.emit({source:this,distance:_.distance,dropPoint:_.dropPoint}),this._changeDetectorRef.markForCheck()}),d.entered.subscribe(_=>{this.entered.emit({container:_.container.data,item:this,currentIndex:_.currentIndex})}),d.exited.subscribe(_=>{this.exited.emit({container:_.container.data,item:this})}),d.dropped.subscribe(_=>{this.dropped.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,previousContainer:_.previousContainer.data,container:_.container.data,isPointerOverContainer:_.isPointerOverContainer,item:this,distance:_.distance,dropPoint:_.dropPoint})})}_assignDefaults(d){const{lockAxis:_,dragStartDelay:w,constrainPosition:E,previewClass:P,boundaryElement:Z,draggingDisabled:$,rootElementSelector:te,previewContainer:ge}=d;this.disabled=null!=$&&$,this.dragStartDelay=w||0,_&&(this.lockAxis=_),E&&(this.constrainPosition=E),P&&(this.previewClass=P),Z&&(this.boundaryElement=Z),te&&(this.rootElementSelector=te),ge&&(this.previewContainer=ge)}_setupHandlesListener(){this._handles.changes.pipe((0,Me.O)(this._handles),(0,Rt.b)(d=>{const _=d.filter(w=>w._parentDrag===this).map(w=>w.element);this._selfHandle&&this.rootElementSelector&&_.push(this.element),this._dragRef.withHandles(_)}),(0,ct.w)(d=>(0,ie.T)(...d.map(_=>_._stateChanges.pipe((0,Me.O)(_))))),(0,he.R)(this._destroyed)).subscribe(d=>{const _=this._dragRef,w=d.element.nativeElement;d.disabled?_.disableHandle(w):_.enableHandle(w)})}}Qe._dragInstances=[],Qe.\u0275fac=function(d){return new(d||Qe)(U.Y36(U.SBq),U.Y36(Hn,12),U.Y36(e.K0),U.Y36(U.R0b),U.Y36(U.s_b),U.Y36(oi,8),U.Y36(Ct.Is,8),U.Y36(We),U.Y36(U.sBO),U.Y36(Zt,10),U.Y36(Wt,12))},Qe.\u0275dir=U.lG2({type:Qe,selectors:[["","cdkDrag",""]],contentQueries:function(d,_,w){if(1&d&&(U.Suo(w,hn,5),U.Suo(w,Ii,5),U.Suo(w,Zt,5)),2&d){let E;U.iGM(E=U.CRH())&&(_._previewTemplate=E.first),U.iGM(E=U.CRH())&&(_._placeholderTemplate=E.first),U.iGM(E=U.CRH())&&(_._handles=E)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(d,_){2&d&&U.ekj("cdk-drag-disabled",_.disabled)("cdk-drag-dragging",_._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[U._Bn([{provide:Wt,useExisting:Qe}]),U.TTD]});class on{}on.\u0275fac=function(d){return new(d||on)},on.\u0275mod=U.oAB({type:on}),on.\u0275inj=U.cJS({providers:[We],imports:[Ge.ZD]})},6269:(fn,Ot,Y)=>{"use strict";Y.d(Ot,{Qc:()=>jo,Pz:()=>ro});const U=Symbol.for("yaml.alias"),e=Symbol.for("yaml.document"),K=Symbol.for("yaml.map"),xe=Symbol.for("yaml.pair"),Oe=Symbol.for("yaml.scalar"),ce=Symbol.for("yaml.seq"),ee=Symbol.for("yaml.node.type"),Ce=s=>!!s&&"object"==typeof s&&s[ee]===U,Le=s=>!!s&&"object"==typeof s&&s[ee]===e,we=s=>!!s&&"object"==typeof s&&s[ee]===K,k=s=>!!s&&"object"==typeof s&&s[ee]===xe,J=s=>!!s&&"object"==typeof s&&s[ee]===Oe,re=s=>!!s&&"object"==typeof s&&s[ee]===ce;function ie(s){if(s&&"object"==typeof s)switch(s[ee]){case K:case ce:return!0}return!1}function he(s){if(s&&"object"==typeof s)switch(s[ee]){case U:case K:case Oe:case ce:return!0}return!1}class lt{constructor(i){Object.defineProperty(this,ee,{value:i})}}const $t=Symbol("break visit"),Rt=Symbol("skip children"),ct=Symbol("remove node");function Ge(s,i){"object"==typeof i&&(i.Collection||i.Node||i.Value)&&(i=Object.assign({Alias:i.Node,Map:i.Node,Scalar:i.Node,Seq:i.Node},i.Value&&{Map:i.Value,Scalar:i.Value,Seq:i.Value},i.Collection&&{Map:i.Collection,Seq:i.Collection},i)),Le(s)?Ct(null,s.contents,i,Object.freeze([s]))===ct&&(s.contents=null):Ct(null,s,i,Object.freeze([]))}function Ct(s,i,r,a){let c;if("function"==typeof r?c=r(s,i,a):we(i)?r.Map&&(c=r.Map(s,i,a)):re(i)?r.Seq&&(c=r.Seq(s,i,a)):k(i)?r.Pair&&(c=r.Pair(s,i,a)):J(i)?r.Scalar&&(c=r.Scalar(s,i,a)):Ce(i)&&r.Alias&&(c=r.Alias(s,i,a)),he(c)||k(c)){const h=a[a.length-1];if(ie(h))h.items[s]=c;else if(k(h))"key"===s?h.key=c:h.value=c;else{if(!Le(h)){const g=Ce(h)?"alias":"scalar";throw new Error(`Cannot replace node with ${g} parent`)}h.contents=c}return Ct(s,c,r,a)}if("symbol"!=typeof c)if(ie(i)){a=Object.freeze(a.concat(i));for(let h=0;h<i.items.length;++h){const g=Ct(h,i.items[h],r,a);if("number"==typeof g)h=g-1;else{if(g===$t)return $t;g===ct&&(i.items.splice(h,1),h-=1)}}}else if(k(i)){a=Object.freeze(a.concat(i));const h=Ct("key",i.key,r,a);if(h===$t)return $t;h===ct&&(i.key=null);const g=Ct("value",i.value,r,a);if(g===$t)return $t;g===ct&&(i.value=null)}return c}Ge.BREAK=$t,Ge.SKIP=Rt,Ge.REMOVE=ct;const ft={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class tt{constructor(i,r){this.marker=null,this.yaml=Object.assign({},tt.defaultYaml,i),this.tags=Object.assign({},tt.defaultTags,r)}atDocument(){const i=new tt(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:tt.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},tt.defaultTags)}return i}add(i,r){this.atNextDocument&&(this.yaml={explicit:tt.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},tt.defaultTags),this.atNextDocument=!1);const a=i.trim().split(/[ \t]+/),c=a.shift();switch(c){case"%TAG":{if(2!==a.length&&(r(0,"%TAG directive should contain exactly two parts"),a.length<2))return!1;const[h,g]=a;return this.tags[h]=g,!0}case"%YAML":{if(this.yaml.explicit=!0,a.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;const[h]=a;return"1.1"===h||"1.2"===h?(this.yaml.version=h,!0):(r(6,`Unsupported YAML version ${h}`,!0),!1)}default:return r(0,`Unknown directive ${c}`,!0),!1}}tagName(i,r){if("!"===i)return"!";if("!"!==i[0])return r(`Not a valid tag: ${i}`),null;if("<"===i[1]){const g=i.slice(2,-1);return"!"===g||"!!"===g?(r(`Verbatim tags aren't resolved, so ${i} is invalid.`),null):(">"!==i[i.length-1]&&r("Verbatim tags must end with a >"),g)}const[,a,c]=i.match(/^(.*!)([^!]*)$/);c||r(`The ${i} tag has no suffix`);const h=this.tags[a];return h?h+decodeURIComponent(c):"!"===a?i:(r(`Could not resolve tag: ${i}`),null)}tagString(i){for(const[r,a]of Object.entries(this.tags))if(i.startsWith(a))return r+i.substring(a.length).replace(/[!,[\]{}]/g,i=>ft[i]);return"!"===i[0]?i:`!<${i}>`}toString(i){const r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],a=Object.entries(this.tags);let c;if(i&&a.length>0&&he(i.contents)){const h={};Ge(i.contents,(g,x)=>{he(x)&&x.tag&&(h[x.tag]=!0)}),c=Object.keys(h)}else c=[];for(const[h,g]of a)"!!"===h&&"tag:yaml.org,2002:"===g||(!i||c.some(x=>x.startsWith(g)))&&r.push(`%TAG ${h} ${g}`);return r.join("\n")}}function Un(s){if(/[\x00-\x19\s,[\]{}]/.test(s)){const r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(s)}`;throw new Error(r)}return!0}function gi(s){const i=new Set;return Ge(s,{Value(r,a){a.anchor&&i.add(a.anchor)}}),i}function ni(s,i){for(let r=1;;++r){const a=`${s}${r}`;if(!i.has(a))return a}}tt.defaultYaml={explicit:!1,version:"1.2"},tt.defaultTags={"!!":"tag:yaml.org,2002:"};class Cn extends lt{constructor(i){super(U),this.source=i,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(i){let r;return Ge(i,{Node:(a,c)=>{if(c===this)return Ge.BREAK;c.anchor===this.source&&(r=c)}}),r}toJSON(i,r){if(!r)return{source:this.source};const{anchors:a,doc:c,maxAliasCount:h}=r,g=this.resolve(c);if(!g){const A=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(A)}const x=a.get(g);if(!x||void 0===x.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(h>=0&&(x.count+=1,0===x.aliasCount&&(x.aliasCount=bn(c,g,a)),x.count*x.aliasCount>h)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return x.res}toString(i,r,a){const c=`*${this.source}`;if(i){if(Un(this.source),i.options.verifyAliasOrder&&!i.anchors.has(this.source)){const h=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(h)}if(i.implicitKey)return`${c} `}return c}}function bn(s,i,r){if(Ce(i)){const a=i.resolve(s),c=r&&a&&r.get(a);return c?c.count*c.aliasCount:0}if(ie(i)){let a=0;for(const c of i.items){const h=bn(s,c,r);h>a&&(a=h)}return a}if(k(i)){const a=bn(s,i.key,r),c=bn(s,i.value,r);return Math.max(a,c)}return 1}function ut(s,i,r){if(Array.isArray(s))return s.map((a,c)=>ut(a,String(c),r));if(s&&"function"==typeof s.toJSON){if(!r||!(s=>(J(s)||ie(s))&&!!s.anchor)(s))return s.toJSON(i,r);const a={aliasCount:0,count:1,res:void 0};r.anchors.set(s,a),r.onCreate=h=>{a.res=h,delete r.onCreate};const c=s.toJSON(i,r);return r.onCreate&&r.onCreate(c),c}return"bigint"!=typeof s||r&&r.keep?s:Number(s)}const Gt=s=>!s||"function"!=typeof s&&"object"!=typeof s;class le extends lt{constructor(i){super(Oe),this.value=i}toJSON(i,r){return r&&r.keep?this.value:ut(this.value,i,r)}toString(){return String(this.value)}}le.BLOCK_FOLDED="BLOCK_FOLDED",le.BLOCK_LITERAL="BLOCK_LITERAL",le.PLAIN="PLAIN",le.QUOTE_DOUBLE="QUOTE_DOUBLE",le.QUOTE_SINGLE="QUOTE_SINGLE";function Ve(s,i,r){var a,c;if(he(s))return s;if(k(s)){const F=null===(c=(a=r.schema[K]).createNode)||void 0===c?void 0:c.call(a,r.schema,null,r);return F.items.push(s),F}(s instanceof String||s instanceof Number||s instanceof Boolean||"function"==typeof BigInt&&s instanceof BigInt)&&(s=s.valueOf());const{onAnchor:h,onTagObj:g,schema:x,sourceObjects:A}=r;let I;if(s&&"object"==typeof s){if(I=A.get(s),I)return I.anchor||(I.anchor=h(s)),new Cn(I.anchor);I={anchor:null,node:null},A.set(s,I)}i&&i.startsWith("!!")&&(i="tag:yaml.org,2002:"+i.slice(2));let L=function Pt(s,i,r){if(i){const a=r.filter(h=>h.tag===i),c=a.find(h=>!h.format)||a[0];if(!c)throw new Error(`Tag ${i} not found`);return c}return r.find(a=>a.identify&&a.identify(s)&&!a.format)}(s,i,x.tags);if(!L){if(s&&"function"==typeof s.toJSON&&(s=s.toJSON()),!s||"object"!=typeof s)return new le(s);L=s instanceof Map?x[K]:Symbol.iterator in Object(s)?x[ce]:x[K]}g&&(g(L),delete r.onTagObj);const Q=(null==L?void 0:L.createNode)?L.createNode(r.schema,s,r):new le(s);return i&&(Q.tag=i),I&&(I.node=Q),Q}function dn(s,i,r){let a=r;for(let c=i.length-1;c>=0;--c){const h=i[c];if("number"==typeof h&&Number.isInteger(h)&&h>=0){const g=[];g[h]=a,a=g}else{const g={};Object.defineProperty(g,"symbol"==typeof h?h:String(h),{value:a,writable:!0,enumerable:!0,configurable:!0}),a=g}}return Ve(a,void 0,{onAnchor(){throw new Error("Repeated objects are not supported here")},schema:s,sourceObjects:new Map})}const xn=s=>null==s||"object"==typeof s&&!!s[Symbol.iterator]().next().done;class qn extends lt{constructor(i,r){super(i),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}addIn(i,r){if(xn(i))this.add(r);else{const[a,...c]=i,h=this.get(a,!0);if(ie(h))h.addIn(c,r);else{if(void 0!==h||!this.schema)throw new Error(`Expected YAML collection at ${a}. Remaining path: ${c}`);this.set(a,dn(this.schema,c,r))}}}deleteIn([i,...r]){if(0===r.length)return this.delete(i);const a=this.get(i,!0);if(ie(a))return a.deleteIn(r);throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`)}getIn([i,...r],a){const c=this.get(i,!0);return 0===r.length?!a&&J(c)?c.value:c:ie(c)?c.getIn(r,a):void 0}hasAllNullValues(i){return this.items.every(r=>{if(!k(r))return!1;const a=r.value;return null==a||i&&J(a)&&null==a.value&&!a.commentBefore&&!a.comment&&!a.tag})}hasIn([i,...r]){if(0===r.length)return this.has(i);const a=this.get(i,!0);return!!ie(a)&&a.hasIn(r)}setIn([i,...r],a){if(0===r.length)this.set(i,a);else{const c=this.get(i,!0);if(ie(c))c.setIn(r,a);else{if(void 0!==c||!this.schema)throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`);this.set(i,dn(this.schema,r,a))}}}}qn.maxFlowStringSingleLineLength=60;const Tn="block",En="quoted";function bt(s,i,r="flow",{indentAtStart:a,lineWidth:c=80,minContentWidth:h=20,onFold:g,onOverflow:x}={}){if(!c||c<0)return s;const A=Math.max(1+h,1+c-i.length);if(s.length<=A)return s;const I=[],L={};let Q=c-i.length;"number"==typeof a&&(a>c-Math.max(2,h)?I.push(0):Q=c-a);let F,j,de,pe=!1,G=-1,z=-1,V=-1;for(r===Tn&&(G=ze(s,G),-1!==G&&(Q=G+A));de=s[G+=1];){if(r===En&&"\\"===de){switch(z=G,s[G+1]){case"x":G+=3;break;case"u":G+=5;break;case"U":G+=9;break;default:G+=1}V=G}if("\n"===de)r===Tn&&(G=ze(s,G)),Q=G+A,F=void 0;else{if(" "===de&&j&&" "!==j&&"\n"!==j&&"\t"!==j){const se=s[G+1];se&&" "!==se&&"\n"!==se&&"\t"!==se&&(F=G)}if(G>=Q)if(F)I.push(F),Q=F+A,F=void 0;else if(r===En){for(;" "===j||"\t"===j;)j=de,de=s[G+=1],pe=!0;const se=G>V+1?G-2:z-1;if(L[se])return s;I.push(se),L[se]=!0,Q=se+A,F=void 0}else pe=!0}j=de}if(pe&&x&&x(),0===I.length)return s;g&&g();let fe=s.slice(0,I[0]);for(let de=0;de<I.length;++de){const se=I[de],oe=I[de+1]||s.length;0===se?fe=`\n${i}${s.slice(0,oe)}`:(r===En&&L[se]&&(fe+=`${s[se]}\\`),fe+=`\n${i}${s.slice(se+1,oe)}`)}return fe}function ze(s,i){let r=s[i+1];for(;" "===r||"\t"===r;){do{r=s[i+=1]}while(r&&"\n"!==r);r=s[i+1]}return i}const It=s=>({indentAtStart:s.indentAtStart,lineWidth:s.options.lineWidth,minContentWidth:s.options.minContentWidth}),Dt=s=>/^(%|---|\.\.\.)/m.test(s);function kt(s,i){const r=JSON.stringify(s);if(i.options.doubleQuotedAsJSON)return r;const{implicitKey:a}=i,c=i.options.doubleQuotedMinMultiLineLength,h=i.indent||(Dt(s)?"  ":"");let g="",x=0;for(let A=0,I=r[A];I;I=r[++A])if(" "===I&&"\\"===r[A+1]&&"n"===r[A+2]&&(g+=r.slice(x,A)+"\\ ",A+=1,x=A,I="\\"),"\\"===I)switch(r[A+1]){case"u":{g+=r.slice(x,A);const L=r.substr(A+2,4);switch(L){case"0000":g+="\\0";break;case"0007":g+="\\a";break;case"000b":g+="\\v";break;case"001b":g+="\\e";break;case"0085":g+="\\N";break;case"00a0":g+="\\_";break;case"2028":g+="\\L";break;case"2029":g+="\\P";break;default:"00"===L.substr(0,2)?g+="\\x"+L.substr(2):g+=r.substr(A,6)}A+=5,x=A+1}break;case"n":if(a||'"'===r[A+2]||r.length<c)A+=1;else{for(g+=r.slice(x,A)+"\n\n";"\\"===r[A+2]&&"n"===r[A+3]&&'"'!==r[A+4];)g+="\n",A+=2;g+=h," "===r[A+2]&&(g+="\\"),A+=1,x=A+1}break;default:A+=1}return g=x?g+r.slice(x):r,a?g:bt(g,h,En,It(i))}function dt(s,i){if(i.implicitKey){if(/\n/.test(s))return kt(s,i)}else if(/[ \t]\n|\n[ \t]/.test(s))return kt(s,i);const r=i.indent||(Dt(s)?"  ":""),a="'"+s.replace(/'/g,"''").replace(/\n+/g,`$&\n${r}`)+"'";return i.implicitKey?a:bt(a,r,"flow",It(i))}function ht({comment:s,type:i,value:r},a,c,h){if(/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return kt(r,a);const g=a.indent||(a.forceBlockIndent||Dt(r)?"  ":""),x=i!==le.BLOCK_FOLDED&&(i===le.BLOCK_LITERAL||!function Fn(s,i,r){if(!i||i<0)return!1;const a=i-r,c=s.length;if(c<=a)return!1;for(let h=0,g=0;h<c;++h)if("\n"===s[h]){if(h-g>a)return!0;if(g=h+1,c-g<=a)return!1}return!0}(r,a.options.lineWidth,g.length));if(!r)return x?"|\n":">\n";let A,I;for(I=r.length;I>0;--I){const de=r[I-1];if("\n"!==de&&"\t"!==de&&" "!==de)break}let L=r.substring(I);const Q=L.indexOf("\n");-1===Q?A="-":r===L||Q!==L.length-1?(A="+",h&&h()):A="",L&&(r=r.slice(0,-L.length),"\n"===L[L.length-1]&&(L=L.slice(0,-1)),L=L.replace(/\n+(?!\n|$)/g,`$&${g}`));let j,F=!1,pe=-1;for(j=0;j<r.length;++j){const de=r[j];if(" "===de)F=!0;else{if("\n"!==de)break;pe=j}}let G=r.substring(0,pe<j?pe+1:j);G&&(r=r.substring(G.length),G=G.replace(/\n+/g,`$&${g}`));let V=(x?"|":">")+(F?g?"2":"1":"")+A;if(s&&(V+=" #"+s.replace(/ ?[\r\n]+/g," "),c&&c()),x)return`${V}\n${g}${G}${r=r.replace(/\n+/g,`$&${g}`)}${L}`;return`${V}\n${g}${bt(`${G}${r=r.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${g}`)}${L}`,g,Tn,It(a))}`}function $e(s,i,r,a){const{implicitKey:c,inFlow:h}=i,g="string"==typeof s.value?s:Object.assign({},s,{value:String(s.value)});let{type:x}=s;x!==le.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(g.value)&&(x=le.QUOTE_DOUBLE);const A=L=>{switch(L){case le.BLOCK_FOLDED:case le.BLOCK_LITERAL:return c||h?kt(g.value,i):ht(g,i,r,a);case le.QUOTE_DOUBLE:return kt(g.value,i);case le.QUOTE_SINGLE:return dt(g.value,i);case le.PLAIN:return function go(s,i,r,a){var c;const{type:h,value:g}=s,{actualString:x,implicitKey:A,indent:I,inFlow:L}=i;if(A&&/[\n[\]{},]/.test(g)||L&&/[[\]{},]/.test(g))return kt(g,i);if(!g||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(g)){const F=-1!==g.indexOf('"'),j=-1!==g.indexOf("'");let pe;return pe=F&&!j?dt:j&&!F?kt:i.options.singleQuote?dt:kt,A||L||-1===g.indexOf("\n")?pe(g,i):ht(s,i,r,a)}if(!A&&!L&&h!==le.PLAIN&&-1!==g.indexOf("\n"))return ht(s,i,r,a);if(""===I&&Dt(g))return i.forceBlockIndent=!0,ht(s,i,r,a);const Q=g.replace(/\n+/g,`$&\n${I}`);if(x)for(const F of i.doc.schema.tags)if(F.default&&"tag:yaml.org,2002:str"!==F.tag&&(null===(c=F.test)||void 0===c?void 0:c.test(Q)))return kt(g,i);return A?Q:bt(Q,I,"flow",It(i))}(g,i,r,a);default:return null}};let I=A(x);if(null===I){const{defaultKeyType:L,defaultStringType:Q}=i.options,F=c&&L||Q;if(I=A(F),null===I)throw new Error(`Unsupported default string type ${F}`)}return I}const ii=(s,i)=>({anchors:new Set,doc:s,indent:"",indentStep:"number"==typeof i.indent?" ".repeat(i.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},i)});function Re(s,i,r,a){if(k(s))return s.toString(i,r,a);if(Ce(s))return s.toString(i);let c;const h=he(s)?s:i.doc.createNode(s,{onTagObj:A=>c=A});c||(c=function An(s,i){if(i.tag){const c=s.filter(h=>h.tag===i.tag);if(c.length>0)return c.find(h=>h.format===i.format)||c[0]}let r,a;if(J(i)){a=i.value;const c=s.filter(h=>h.identify&&h.identify(a));r=c.find(h=>h.format===i.format)||c.find(h=>!h.format)}else a=i,r=s.find(c=>c.nodeClass&&a instanceof c.nodeClass);if(!r){const c=a&&a.constructor?a.constructor.name:typeof a;throw new Error(`Tag not resolved for ${c} value`)}return r}(i.doc.schema.tags,h));const g=function Xe(s,i,{anchors:r,doc:a}){const c=[],h=(J(s)||ie(s))&&s.anchor;return h&&Un(h)&&(r.add(h),c.push(`&${h}`)),s.tag?c.push(a.directives.tagString(s.tag)):i.default||c.push(a.directives.tagString(i.tag)),c.join(" ")}(h,c,i);g.length>0&&(i.indentAtStart=(i.indentAtStart||0)+g.length+1);const x="function"==typeof c.stringify?c.stringify(h,i,r,a):J(h)?$e(h,i,r,a):h.toString(i,r,a);return g?J(h)||"{"===x[0]||"["===x[0]?`${g} ${x}`:`${g}\n${i.indent}${x}`:x}const pt=(s,i)=>/^\n+$/.test(s)?s.substring(1):s.replace(/^(?!$)(?: $)?/gm,`${i}#`);function qt(s,i,r){return r?r.includes("\n")?`${s}\n`+pt(r,i):s.endsWith(" ")?`${s}#${r}`:`${s} #${r}`:s}function Pi(s,i){("debug"===s||"warn"===s)&&("undefined"!=typeof process&&process.emitWarning?process.emitWarning(i):console.warn(i))}function Wt(s,i,{key:r,value:a}){if(s&&s.doc.schema.merge&&Jn(r))if(re(a))for(const c of a.items)Kt(s,i,c);else if(Array.isArray(a))for(const c of a)Kt(s,i,c);else Kt(s,i,a);else{const c=ut(r,"",s);if(i instanceof Map)i.set(c,ut(a,c,s));else if(i instanceof Set)i.add(c);else{const h=function oi(s,i,r){if(null===i)return"";if("object"!=typeof i)return String(i);if(he(s)&&r&&r.doc){const a=ii(r.doc,{});a.anchors=new Set;for(const h of r.anchors.keys())a.anchors.add(h.anchor);a.inFlow=!0,a.inStringifyKey=!0;const c=s.toString(a);if(!r.mapKeyWarned){let h=JSON.stringify(c);h.length>40&&(h=h.substring(0,36)+'..."'),Pi(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${h}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return c}return JSON.stringify(i)}(r,c,s),g=ut(a,h,s);h in i?Object.defineProperty(i,h,{value:g,writable:!0,enumerable:!0,configurable:!0}):i[h]=g}}return i}const Jn=s=>"<<"===s||J(s)&&"<<"===s.value&&(!s.type||s.type===le.PLAIN);function Kt(s,i,r){const a=s&&Ce(r)?r.resolve(s.doc):null;if(!we(a))throw new Error("Merge sources must be map aliases");const c=a.toJSON(null,s,Map);for(const[h,g]of c)i instanceof Map?i.has(h)||i.set(h,g):i instanceof Set?i.add(h):Object.prototype.hasOwnProperty.call(i,h)||Object.defineProperty(i,h,{value:g,writable:!0,enumerable:!0,configurable:!0});return i}function ri(s,i,r){const a=Ve(s,void 0,r),c=Ve(i,void 0,r);return new nt(a,c)}class nt{constructor(i,r=null){Object.defineProperty(this,ee,{value:xe}),this.key=i,this.value=r}toJSON(i,r){return Wt(r,r&&r.mapAsMap?new Map:{},this)}toString(i,r,a){return i&&i.doc?function Bn({key:s,value:i},r,a,c){const{allNullValues:h,doc:g,indent:x,indentStep:A,options:{indentSeq:I,simpleKeys:L}}=r;let Q=he(s)&&s.comment||null;if(L){if(Q)throw new Error("With simple keys, key nodes cannot have comments");if(ie(s))throw new Error("With simple keys, collection cannot be used as a key value")}let F=!L&&(!s||Q&&null==i&&!r.inFlow||ie(s)||(J(s)?s.type===le.BLOCK_FOLDED||s.type===le.BLOCK_LITERAL:"object"==typeof s));r=Object.assign({},r,{allNullValues:!1,implicitKey:!F&&(L||!h),indent:x+A});let j=!1,pe=!1,G=Re(s,r,()=>j=!0,()=>pe=!0);if(!F&&!r.inFlow&&G.length>1024){if(L)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");F=!0}if(r.inFlow){if(h||null==i)return j&&a&&a(),F?`? ${G}`:G}else if(h&&!L||null==i&&F)return j&&(Q=null),pe&&!Q&&c&&c(),qt(`? ${G}`,r.indent,Q);j&&(Q=null),G=F?`? ${qt(G,r.indent,Q)}\n${x}:`:qt(`${G}:`,r.indent,Q);let z="",V=null;he(i)?(i.spaceBefore&&(z="\n"),i.commentBefore&&(z+=`\n${pt(i.commentBefore,r.indent)}`),V=i.comment):i&&"object"==typeof i&&(i=g.createNode(i)),r.implicitKey=!1,!F&&!Q&&J(i)&&(r.indentAtStart=G.length+1),pe=!1,!I&&A.length>=2&&!r.inFlow&&!F&&re(i)&&!i.flow&&!i.tag&&!i.anchor&&(r.indent=r.indent.substr(2));let fe=!1;const de=Re(i,r,()=>fe=!0,()=>pe=!0);let se=" ";return z||Q?se=`${z}\n${r.indent}`:!F&&ie(i)?(!("["===de[0]||"{"===de[0])||de.includes("\n"))&&(se=`\n${r.indent}`):"\n"===de[0]&&(se=""),r.inFlow?(fe&&a&&a(),G+se+de):(fe&&(V=null),pe&&!V&&c&&c(),qt(G+se+de,r.indent,V))}(this,i,r,a):JSON.stringify(this)}}const Hn={intAsBigInt:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};function gt({comment:s,flow:i,items:r},a,{blockItem:c,flowChars:h,itemIndent:g,onChompKeep:x,onComment:A}){const{indent:I,indentStep:L}=a,Q=i||a.inFlow;Q&&(g+=L),a=Object.assign({},a,{indent:g,inFlow:Q,type:null});let F=!0,j=!1;const pe=r.reduce((z,V,fe)=>{let de=null;if(he(V)){!j&&V.spaceBefore&&z.push({comment:!0,str:""});let oe=V.commentBefore;if(oe&&j&&(oe=oe.replace(/^\n+/,"")),oe){/^\n+$/.test(oe)&&(oe=oe.substring(1));for(const Fe of oe.match(/^.*$/gm)){const ui=" "===Fe?"#":Fe?`#${Fe}`:"";z.push({comment:!0,str:ui})}}V.comment&&(de=V.comment,F=!1)}else if(k(V)){const oe=he(V.key)?V.key:null;if(oe){!j&&oe.spaceBefore&&z.push({comment:!0,str:""});let Fe=oe.commentBefore;if(Fe&&j&&(Fe=Fe.replace(/^\n+/,"")),Fe){/^\n+$/.test(Fe)&&(Fe=Fe.substring(1));for(const ui of Fe.match(/^.*$/gm)){const Nt=" "===ui?"#":ui?`#${ui}`:"";z.push({comment:!0,str:Nt})}}oe.comment&&(F=!1)}if(Q){const Fe=he(V.value)?V.value:null;Fe?(Fe.comment&&(de=Fe.comment),(Fe.comment||Fe.commentBefore)&&(F=!1)):null==V.value&&oe&&oe.comment&&(de=oe.comment)}}j=!1;let se=Re(V,a,()=>de=null,()=>j=!0);return Q&&fe<r.length-1&&(se+=","),se=qt(se,g,de),j&&(de||Q)&&(j=!1),z.push({comment:!1,str:se}),z},[]);let G;if(0===pe.length)G=h.start+h.end;else if(Q){const{start:z,end:V}=h,fe=pe.map(se=>se.str);let de=2;for(const se of pe){if(se.comment||se.str.includes("\n")){F=!1;break}de+=se.str.length+2}if(!F||de>qn.maxFlowStringSingleLineLength){G=z;for(const se of fe)G+=se?`\n${L}${I}${se}`:"\n";G+=`\n${I}${V}`}else G=`${z} ${fe.join(" ")} ${V}`}else{const z=pe.map(c);G=z.shift()||"";for(const V of z)G+=V?`\n${I}${V}`:"\n"}return s?(G+="\n"+pt(s,I),A&&A()):j&&x&&x(),G}function Zt(s,i){const r=J(i)?i.value:i;for(const a of s)if(k(a)&&(a.key===i||a.key===r||J(a.key)&&a.key.value===r))return a}class Ye extends qn{constructor(i){super(K,i),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(i,r){let a;a=k(i)?i:new nt(i&&"object"==typeof i&&"key"in i?i.key:i,i.value);const c=Zt(this.items,a.key),h=this.schema&&this.schema.sortMapEntries;if(c){if(!r)throw new Error(`Key ${a.key} already set`);J(c.value)&&Gt(a.value)?c.value.value=a.value:c.value=a.value}else if(h){const g=this.items.findIndex(x=>h(a,x)<0);-1===g?this.items.push(a):this.items.splice(g,0,a)}else this.items.push(a)}delete(i){const r=Zt(this.items,i);return!!r&&this.items.splice(this.items.indexOf(r),1).length>0}get(i,r){const a=Zt(this.items,i),c=a&&a.value;return!r&&J(c)?c.value:c}has(i){return!!Zt(this.items,i)}set(i,r){this.add(new nt(i,r),!0)}toJSON(i,r,a){const c=a?new a:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(c);for(const h of this.items)Wt(r,c,h);return c}toString(i,r,a){if(!i)return JSON.stringify(this);for(const c of this.items)if(!k(c))throw new Error(`Map items must all be pairs; found ${JSON.stringify(c)} instead`);return!i.allNullValues&&this.hasAllNullValues(!1)&&(i=Object.assign({},i,{allNullValues:!0})),gt(this,i,{blockItem:c=>c.str,flowChars:{start:"{",end:"}"},itemIndent:i.indent||"",onChompKeep:a,onComment:r})}}const Ft={collection:"map",createNode:function Ii(s,i,r){const{keepUndefined:a,replacer:c}=r,h=new Ye(s),g=(x,A)=>{if("function"==typeof c)A=c.call(i,x,A);else if(Array.isArray(c)&&!c.includes(x))return;(void 0!==A||a)&&h.items.push(ri(x,A,r))};if(i instanceof Map)for(const[x,A]of i)g(x,A);else if(i&&"object"==typeof i)for(const x of Object.keys(i))g(x,i[x]);return"function"==typeof s.sortMapEntries&&h.items.sort(s.sortMapEntries),h},default:!0,nodeClass:Ye,tag:"tag:yaml.org,2002:map",resolve:(s,i)=>(we(s)||i("Expected a mapping for this tag"),s)};class hn extends qn{constructor(i){super(ce,i),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(i){this.items.push(i)}delete(i){const r=it(i);return"number"==typeof r&&this.items.splice(r,1).length>0}get(i,r){const a=it(i);if("number"!=typeof a)return;const c=this.items[a];return!r&&J(c)?c.value:c}has(i){const r=it(i);return"number"==typeof r&&r<this.items.length}set(i,r){const a=it(i);if("number"!=typeof a)throw new Error(`Expected a valid index, not ${i}.`);const c=this.items[a];J(c)&&Gt(r)?c.value=r:this.items[a]=r}toJSON(i,r){const a=[];r&&r.onCreate&&r.onCreate(a);let c=0;for(const h of this.items)a.push(ut(h,String(c++),r));return a}toString(i,r,a){return i?gt(this,i,{blockItem:c=>c.comment?c.str:`- ${c.str}`,flowChars:{start:"[",end:"]"},itemIndent:(i.indent||"")+"  ",onChompKeep:a,onComment:r}):JSON.stringify(this)}}function it(s){let i=J(s)?s.value:s;return i&&"string"==typeof i&&(i=Number(i)),"number"==typeof i&&Number.isInteger(i)&&i>=0?i:null}const Qe={collection:"seq",createNode:function Sn(s,i,r){const{replacer:a}=r,c=new hn(s);if(i&&Symbol.iterator in Object(i)){let h=0;for(let g of i){if("function"==typeof a){const x=i instanceof Set?g:String(h++);g=a.call(i,x,g)}c.items.push(Ve(g,void 0,r))}}return c},default:!0,nodeClass:hn,tag:"tag:yaml.org,2002:seq",resolve:(s,i)=>(re(s)||i("Expected a sequence for this tag"),s)},on={identify:s=>"string"==typeof s,default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify:(s,i,r,a)=>$e(s,i=Object.assign({actualString:!0},i),r,a)},N={identify:s=>null==s,createNode:()=>new le(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new le(null),stringify:({source:s},i)=>s&&N.test.test(s)?s:i.options.nullStr},d={identify:s=>"boolean"==typeof s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:s=>new le("t"===s[0]||"T"===s[0]),stringify({source:s,value:i},r){if(s&&d.test.test(s)){if(i===("t"===s[0]||"T"===s[0]))return s}return i?r.options.trueStr:r.options.falseStr}};function _({format:s,minFractionDigits:i,tag:r,value:a}){if("bigint"==typeof a)return String(a);const c="number"==typeof a?a:Number(a);if(!isFinite(c))return isNaN(c)?".nan":c<0?"-.inf":".inf";let h=JSON.stringify(a);if(!s&&i&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(h)){let g=h.indexOf(".");g<0&&(g=h.length,h+=".");let x=i-(h.length-g-1);for(;x-- >0;)h+="0"}return h}const w={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:s=>"nan"===s.slice(-3).toLowerCase()?NaN:"-"===s[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_},E={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s),stringify:({value:s})=>Number(s).toExponential()},P={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(s){const i=new le(parseFloat(s)),r=s.indexOf(".");return-1!==r&&"0"===s[s.length-1]&&(i.minFractionDigits=s.length-r-1),i},stringify:_},Z=s=>"bigint"==typeof s||Number.isInteger(s),$=(s,i,r,{intAsBigInt:a})=>a?BigInt(s):parseInt(s.substring(i),r);function te(s,i,r){const{value:a}=s;return Z(a)&&a>=0?r+a.toString(i):_(s)}const ge={identify:s=>Z(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(s,i,r)=>$(s,2,8,r),stringify:s=>te(s,8,"0o")},Ze={identify:Z,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(s,i,r)=>$(s,0,10,r),stringify:_},ot={identify:s=>Z(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(s,i,r)=>$(s,2,16,r),stringify:s=>te(s,16,"0x")},wt=[Ft,Qe,on,N,d,ge,Ze,ot,w,E,P];function xt(s){return"bigint"==typeof s||Number.isInteger(s)}const _t=({value:s})=>JSON.stringify(s),Qn=[{identify:s=>"string"==typeof s,default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify:_t},{identify:s=>null==s,createNode:()=>new le(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:_t},{identify:s=>"boolean"==typeof s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:s=>"true"===s,stringify:_t},{identify:xt,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(s,i,{intAsBigInt:r})=>r?BigInt(s):parseInt(s,10),stringify:({value:s})=>xt(s)?s.toString():JSON.stringify(s)},{identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:s=>parseFloat(s),stringify:_t}],Tt={default:!0,tag:"",test:/^/,resolve:(s,i)=>(i(`Unresolved plain scalar ${JSON.stringify(s)}`),s)},Di=[Ft,Qe].concat(Qn,Tt),si={identify:s=>s instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(s,i){if("function"==typeof Buffer)return Buffer.from(s,"base64");if("function"==typeof atob){const r=atob(s.replace(/[\n\r]/g,"")),a=new Uint8Array(r.length);for(let c=0;c<r.length;++c)a[c]=r.charCodeAt(c);return a}return i("This environment does not support reading binary tags; either Buffer or atob is required"),s},stringify({comment:s,type:i,value:r},a,c,h){const g=r;let x;if("function"==typeof Buffer)x=g instanceof Buffer?g.toString("base64"):Buffer.from(g.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let A="";for(let I=0;I<g.length;++I)A+=String.fromCharCode(g[I]);x=btoa(A)}}if(i||(i=le.BLOCK_LITERAL),i!==le.QUOTE_DOUBLE){const A=Math.max(a.options.lineWidth-a.indent.length,a.options.minContentWidth),I=Math.ceil(x.length/A),L=new Array(I);for(let Q=0,F=0;Q<I;++Q,F+=A)L[Q]=x.substr(F,A);x=L.join(i===le.BLOCK_LITERAL?"\n":" ")}return $e({comment:s,type:i,value:x},a,c,h)}};function ai(s,i){if(re(s))for(let r=0;r<s.items.length;++r){let a=s.items[r];if(!k(a)){if(we(a)){a.items.length>1&&i("Each pair must have its own sequence indicator");const c=a.items[0]||new nt(new le(null));if(a.commentBefore&&(c.key.commentBefore=c.key.commentBefore?`${a.commentBefore}\n${c.key.commentBefore}`:a.commentBefore),a.comment){const h=c.value||c.key;h.comment=h.comment?`${a.comment}\n${h.comment}`:a.comment}a=c}s.items[r]=k(a)?a:new nt(a)}}else i("Expected a sequence for this tag");return s}function _i(s,i,r){const{replacer:a}=r,c=new hn(s);c.tag="tag:yaml.org,2002:pairs";let h=0;if(i&&Symbol.iterator in Object(i))for(let g of i){let x,A;if("function"==typeof a&&(g=a.call(i,String(h++),g)),Array.isArray(g)){if(2!==g.length)throw new TypeError(`Expected [key, value] tuple: ${g}`);x=g[0],A=g[1]}else if(g&&g instanceof Object){const I=Object.keys(g);if(1!==I.length)throw new TypeError(`Expected { key: value } tuple: ${g}`);x=I[0],A=g[x]}else x=g;c.items.push(ri(x,A,r))}return c}const $n={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:ai,createNode:_i};class li extends hn{constructor(){super(),this.add=Ye.prototype.add.bind(this),this.delete=Ye.prototype.delete.bind(this),this.get=Ye.prototype.get.bind(this),this.has=Ye.prototype.has.bind(this),this.set=Ye.prototype.set.bind(this),this.tag=li.tag}toJSON(i,r){if(!r)return super.toJSON(i);const a=new Map;r&&r.onCreate&&r.onCreate(a);for(const c of this.items){let h,g;if(k(c)?(h=ut(c.key,"",r),g=ut(c.value,h,r)):h=ut(c,"",r),a.has(h))throw new Error("Ordered maps must not include duplicate keys");a.set(h,g)}return a}}li.tag="tag:yaml.org,2002:omap";const Gn={collection:"seq",identify:s=>s instanceof Map,nodeClass:li,default:!1,tag:"tag:yaml.org,2002:omap",resolve(s,i){const r=ai(s,i),a=[];for(const{key:c}of r.items)J(c)&&(a.includes(c.value)?i(`Ordered maps must not include duplicate keys: ${c.value}`):a.push(c.value));return Object.assign(new li,r)},createNode(s,i,r){const a=_i(s,i,r),c=new li;return c.items=a.items,c}};function rt({value:s,source:i},r){return i&&(s?ki:ci).test.test(i)?i:s?r.options.trueStr:r.options.falseStr}const ki={identify:s=>!0===s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new le(!0),stringify:rt},ci={identify:s=>!1===s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new le(!1),stringify:rt},No={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:s=>"nan"===s.slice(-3).toLowerCase()?NaN:"-"===s[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_},Zi={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s.replace(/_/g,"")),stringify:({value:s})=>Number(s).toExponential()},Lo={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(s){const i=new le(parseFloat(s.replace(/_/g,""))),r=s.indexOf(".");if(-1!==r){const a=s.substring(r+1).replace(/_/g,"");"0"===a[a.length-1]&&(i.minFractionDigits=a.length)}return i},stringify:_},Wn=s=>"bigint"==typeof s||Number.isInteger(s);function Kn(s,i,r,{intAsBigInt:a}){const c=s[0];if(("-"===c||"+"===c)&&(i+=1),s=s.substring(i).replace(/_/g,""),a){switch(r){case 2:s=`0b${s}`;break;case 8:s=`0o${s}`;break;case 16:s=`0x${s}`}const g=BigInt(s);return"-"===c?BigInt(-1)*g:g}const h=parseInt(s,r);return"-"===c?-1*h:h}function Ni(s,i,r){const{value:a}=s;if(Wn(a)){const c=a.toString(i);return a<0?"-"+r+c.substr(1):r+c}return _(s)}const Ro={identify:Wn,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(s,i,r)=>Kn(s,2,2,r),stringify:s=>Ni(s,2,"0b")},Uo={identify:Wn,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(s,i,r)=>Kn(s,1,8,r),stringify:s=>Ni(s,8,"0")},qo={identify:Wn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(s,i,r)=>Kn(s,0,10,r),stringify:_},Yt={identify:Wn,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(s,i,r)=>Kn(s,2,16,r),stringify:s=>Ni(s,16,"0x")};class jt extends Ye{constructor(i){super(i),this.tag=jt.tag}add(i){let r;r=k(i)?i:"object"==typeof i&&"key"in i&&"value"in i&&null===i.value?new nt(i.key,null):new nt(i,null),Zt(this.items,r.key)||this.items.push(r)}get(i,r){const a=Zt(this.items,i);return!r&&k(a)?J(a.key)?a.key.value:a.key:a}set(i,r){if("boolean"!=typeof r)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof r);const a=Zt(this.items,i);a&&!r?this.items.splice(this.items.indexOf(a),1):!a&&r&&this.items.push(new nt(i))}toJSON(i,r){return super.toJSON(i,r,Set)}toString(i,r,a){if(!i)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},i,{allNullValues:!0}),r,a);throw new Error("Set items must all have null values")}}jt.tag="tag:yaml.org,2002:set";const Li={collection:"map",identify:s=>s instanceof Set,nodeClass:jt,default:!1,tag:"tag:yaml.org,2002:set",resolve(s,i){if(we(s)){if(s.hasAllNullValues(!0))return Object.assign(new jt,s);i("Set items must all have null values")}else i("Expected a mapping for this tag");return s},createNode(s,i,r){const{replacer:a}=r,c=new jt(s);if(i&&Symbol.iterator in Object(i))for(let h of i)"function"==typeof a&&(h=a.call(i,h,h)),c.items.push(ri(h,null,r));return c}};function On(s,i){const r=s[0],a="-"===r||"+"===r?s.substring(1):s,c=g=>i?BigInt(g):Number(g),h=a.replace(/_/g,"").split(":").reduce((g,x)=>g*c(60)+c(x),c(0));return"-"===r?c(-1)*h:h}function mi(s){let{value:i}=s,r=g=>g;if("bigint"==typeof i)r=g=>BigInt(g);else if(isNaN(i)||!isFinite(i))return _(s);let a="";i<0&&(a="-",i*=r(-1));const c=r(60),h=[i%c];return i<60?h.unshift(0):(i=(i-h[0])/c,h.unshift(i%c),i>=60&&(i=(i-h[0])/c,h.unshift(i))),a+h.map(g=>g<10?"0"+String(g):String(g)).join(":").replace(/000000\d*$/,"")}const Ri={identify:s=>"bigint"==typeof s||Number.isInteger(s),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(s,i,{intAsBigInt:r})=>On(s,r),stringify:mi},Ki={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:s=>On(s,!1),stringify:mi},Yn={identify:s=>s instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(s){const i=s.match(Yn.test);if(!i)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,r,a,c,h,g,x]=i.map(Number),A=i[7]?Number((i[7]+"00").substr(1,3)):0;let I=Date.UTC(r,a-1,c,h||0,g||0,x||0,A);const L=i[8];if(L&&"Z"!==L){let Q=On(L,!1);Math.abs(Q)<30&&(Q*=60),I-=6e4*Q}return new Date(I)},stringify:({value:s})=>s.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},jn=[Ft,Qe,on,N,ki,ci,Ro,Uo,qo,Yt,No,Zi,Lo,si,Gn,$n,Li,Ri,Ki,Yn],_o={core:wt,failsafe:[Ft,Qe,on],json:Di,yaml11:jn,"yaml-1.1":jn},Yi={binary:si,bool:d,float:P,floatExp:E,floatNaN:w,floatTime:Ki,int:Ze,intHex:ot,intOct:ge,intTime:Ri,map:Ft,null:N,omap:Gn,pairs:$n,seq:Qe,set:Li,timestamp:Yn},mo={"tag:yaml.org,2002:binary":si,"tag:yaml.org,2002:omap":Gn,"tag:yaml.org,2002:pairs":$n,"tag:yaml.org,2002:set":Li,"tag:yaml.org,2002:timestamp":Yn};const Fo=(s,i)=>s.key<i.key?-1:s.key>i.key?1:0;class vo{constructor({customTags:i,merge:r,resolveKnownTags:a,schema:c,sortMapEntries:h}){this.merge=!!r,this.name=c||"core",this.knownTags=a?mo:{},this.tags=function ji(s,i){let r=_o[i];if(!r){const a=Object.keys(_o).filter(c=>"yaml11"!==c).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${a}`)}if(Array.isArray(s))for(const a of s)r=r.concat(a);else"function"==typeof s&&(r=s(r.slice()));return r.map(a=>{if("string"!=typeof a)return a;const c=Yi[a];if(c)return c;const h=Object.keys(Yi).map(g=>JSON.stringify(g)).join(", ");throw new Error(`Unknown custom tag "${a}"; use one of ${h}`)})}(i,this.name),Object.defineProperty(this,K,{value:Ft}),Object.defineProperty(this,Oe,{value:on}),Object.defineProperty(this,ce,{value:Qe}),this.sortMapEntries=!0===h?Fo:h||null}}function Vt(s,i,r,a){if(a&&"object"==typeof a)if(Array.isArray(a))for(let c=0,h=a.length;c<h;++c){const g=a[c],x=Vt(s,a,String(c),g);void 0===x?delete a[c]:x!==g&&(a[c]=x)}else if(a instanceof Map)for(const c of Array.from(a.keys())){const h=a.get(c),g=Vt(s,a,c,h);void 0===g?a.delete(c):g!==h&&a.set(c,g)}else if(a instanceof Set)for(const c of Array.from(a)){const h=Vt(s,a,c,c);void 0===h?a.delete(c):h!==c&&(a.delete(c),a.add(h))}else for(const[c,h]of Object.entries(a)){const g=Vt(s,a,c,h);void 0===g?delete a[c]:g!==h&&(a[c]=g)}return s.call(i,r,a)}class Pn{constructor(i,r,a){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ee,{value:e});let c=null;"function"==typeof r||Array.isArray(r)?c=r:void 0===a&&r&&(a=r,r=void 0);const h=Object.assign({},Hn,a);this.options=h;let{version:g}=h;(null==a?void 0:a.directives)?(this.directives=a.directives.atDocument(),this.directives.yaml.explicit&&(g=this.directives.yaml.version)):this.directives=new tt({version:g}),this.setSchema(g,a),this.contents=void 0===i?null:this.createNode(i,c,a)}add(i){Vn(this.contents)&&this.contents.add(i)}addIn(i,r){Vn(this.contents)&&this.contents.addIn(i,r)}createAlias(i,r){if(!i.anchor){const a=gi(this);i.anchor=!r||a.has(r)?ni(r||"a",a):r}return new Cn(i.anchor)}createNode(i,r,a){let c;if("function"==typeof r)i=r.call({"":i},"",i),c=r;else if(Array.isArray(r)){const G=V=>"number"==typeof V||V instanceof String||V instanceof Number,z=r.filter(G).map(String);z.length>0&&(r=r.concat(z)),c=r}else void 0===a&&r&&(a=r,r=void 0);const{anchorPrefix:h,flow:g,keepUndefined:x,onTagObj:A,tag:I}=a||{},{onAnchor:L,setAnchors:Q,sourceObjects:F}=function un(s,i){const r=[],a=new Map;let c=null;return{onAnchor(h){r.push(h),c||(c=gi(s));const g=ni(i,c);return c.add(g),g},setAnchors(){for(const h of r){const g=a.get(h);if("object"!=typeof g||!g.anchor||!J(g.node)&&!ie(g.node)){const x=new Error("Failed to resolve repeated object (this should not happen)");throw x.source=h,x}g.node.anchor=g.anchor}},sourceObjects:a}}(this,h||"a"),pe=Ve(i,I,{keepUndefined:null!=x&&x,onAnchor:L,onTagObj:A,replacer:c,schema:this.schema,sourceObjects:F});return g&&ie(pe)&&(pe.flow=!0),Q(),pe}createPair(i,r,a={}){const c=this.createNode(i,null,a),h=this.createNode(r,null,a);return new nt(c,h)}delete(i){return!!Vn(this.contents)&&this.contents.delete(i)}deleteIn(i){return xn(i)?null!=this.contents&&(this.contents=null,!0):!!Vn(this.contents)&&this.contents.deleteIn(i)}get(i,r){return ie(this.contents)?this.contents.get(i,r):void 0}getIn(i,r){return xn(i)?!r&&J(this.contents)?this.contents.value:this.contents:ie(this.contents)?this.contents.getIn(i,r):void 0}has(i){return!!ie(this.contents)&&this.contents.has(i)}hasIn(i){return xn(i)?void 0!==this.contents:!!ie(this.contents)&&this.contents.hasIn(i)}set(i,r){null==this.contents?this.contents=dn(this.schema,[i],r):Vn(this.contents)&&this.contents.set(i,r)}setIn(i,r){xn(i)?this.contents=r:null==this.contents?this.contents=dn(this.schema,Array.from(i),r):Vn(this.contents)&&this.contents.setIn(i,r)}setSchema(i,r){let a;switch(String(i)){case"1.1":this.directives.yaml.version="1.1",a=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},r);break;case"1.2":this.directives.yaml.version="1.2",a=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},r);break;default:{const c=JSON.stringify(i);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${c}`)}}this.schema=new vo(a)}toJS({json:i,jsonArg:r,mapAsMap:a,maxAliasCount:c,onAnchor:h,reviver:g}={}){const x={anchors:new Map,doc:this,keep:!i,mapAsMap:!0===a,mapKeyWarned:!1,maxAliasCount:"number"==typeof c?c:100,stringify:Re},A=ut(this.contents,r||"",x);if("function"==typeof h)for(const{count:I,res:L}of x.anchors.values())h(L,I);return"function"==typeof g?Vt(g,{"":A},"",A):A}toJSON(i,r){return this.toJS({json:!0,jsonArg:i,mapAsMap:!1,onAnchor:r})}toString(i={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in i&&(!Number.isInteger(i.indent)||Number(i.indent)<=0)){const r=JSON.stringify(i.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return function Mn(s,i){const r=[];let a=!0===i.directives;if(!1!==i.directives){const A=s.directives.toString(s);A?(r.push(A),a=!0):s.directives.marker&&(a=!0)}a&&r.push("---"),s.commentBefore&&(1!==r.length&&r.unshift(""),r.unshift(pt(s.commentBefore,"")));const c=ii(s,i);let h=!1,g=null;if(s.contents){he(s.contents)&&(s.contents.spaceBefore&&a&&r.push(""),s.contents.commentBefore&&r.push(pt(s.contents.commentBefore,"")),c.forceBlockIndent=!!s.comment,g=s.contents.comment);const A=g?void 0:()=>h=!0;let I=Re(s.contents,c,()=>g=null,A);g&&(I=qt(I,"",g)),"|"!==I[0]&&">"!==I[0]||"---"!==r[r.length-1]?r.push(I):r[r.length-1]=`--- ${I}`}else r.push(Re(s.contents,c));let x=s.comment;return x&&h&&(x=x.replace(/^\n+/,"")),x&&((!h||g)&&""!==r[r.length-1]&&r.push(""),r.push(pt(x,""))),r.join("\n")+"\n"}(this,i)}}function Vn(s){if(ie(s))return!0;throw new Error("Expected a YAML collection as document contents")}class Vi extends Error{constructor(i,r,a,c){super(),this.name=i,this.code=a,this.message=c,this.pos=r}}class vi extends Vi{constructor(i,r,a){super("YAMLParseError",i,r,a)}}class yo extends Vi{constructor(i,r,a){super("YAMLWarning",i,r,a)}}const zi=(s,i)=>r=>{if(-1===r.pos[0])return;r.linePos=r.pos.map(x=>i.linePos(x));const{line:a,col:c}=r.linePos[0];r.message+=` at line ${a}, column ${c}`;let h=c-1,g=s.substring(i.lineStarts[a-1],i.lineStarts[a]).replace(/[\n\r]+$/,"");if(h>=60&&g.length>80){const x=Math.min(h-39,g.length-79);g="\u2026"+g.substring(x),h-=x-1}if(g.length>80&&(g=g.substring(0,79)+"\u2026"),a>1&&/^ *$/.test(g.substring(0,h))){let x=s.substring(i.lineStarts[a-2],i.lineStarts[a-1]);x.length>80&&(x=x.substring(0,79)+"\u2026\n"),g=x+g}if(/[^ ]/.test(g)){let x=1;const A=r.linePos[1];A&&A.line===a&&A.col>c&&(x=Math.min(A.col-c,80-h));const I=" ".repeat(h)+"^".repeat(x);r.message+=`:\n\n${g}\n${I}\n`}};function zn(s,{flow:i,indicator:r,next:a,offset:c,onError:h,startOnNewline:g}){let x=!1,A=g,I=g,L="",Q="",F=!1,j=!1,pe=null,G=null,z=null,V=null,fe=null;for(const oe of s)switch(j&&("space"!==oe.type&&"newline"!==oe.type&&"comma"!==oe.type&&h(oe.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),j=!1),oe.type){case"space":!i&&A&&"doc-start"!==r&&"\t"===oe.source[0]&&h(oe,"TAB_AS_INDENT","Tabs are not allowed as indentation"),I=!0;break;case"comment":{I||h(oe,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const Fe=oe.source.substring(1)||" ";L?L+=Q+Fe:L=Fe,Q="",A=!1;break}case"newline":A?L?L+=oe.source:x=!0:Q+=oe.source,A=!0,F=!0,I=!0;break;case"anchor":pe&&h(oe,"MULTIPLE_ANCHORS","A node can have at most one anchor"),pe=oe,null===fe&&(fe=oe.offset),A=!1,I=!1,j=!0;break;case"tag":G&&h(oe,"MULTIPLE_TAGS","A node can have at most one tag"),G=oe,null===fe&&(fe=oe.offset),A=!1,I=!1,j=!0;break;case r:(pe||G)&&h(oe,"BAD_PROP_ORDER",`Anchors and tags must be after the ${oe.source} indicator`),V=oe,A=!1,I=!1;break;case"comma":if(i){z&&h(oe,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`),z=oe,A=!1,I=!1;break}default:h(oe,"UNEXPECTED_TOKEN",`Unexpected ${oe.type} token`),A=!1,I=!1}const de=s[s.length-1],se=de?de.offset+de.source.length:c;return j&&a&&"space"!==a.type&&"newline"!==a.type&&"comma"!==a.type&&("scalar"!==a.type||""!==a.source)&&h(a.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:z,found:V,spaceBefore:x,comment:L,hasNewline:F,anchor:pe,tag:G,end:se,start:null!=fe?fe:se}}function yi(s){if(!s)return null;switch(s.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(s.source.includes("\n"))return!0;if(s.end)for(const i of s.end)if("newline"===i.type)return!0;return!1;case"flow-collection":for(const i of s.items){for(const r of i.start)if("newline"===r.type)return!0;if(i.sep)for(const r of i.sep)if("newline"===r.type)return!0;if(yi(i.key)||yi(i.value))return!0}return!1;default:return!0}}function Co(s,i,r){const{uniqueKeys:a}=s.options;if(!1===a)return!1;const c="function"==typeof a?a:(h,g)=>h===g||J(h)&&J(g)&&h.value===g.value&&!("<<"===h.value&&s.schema.merge);return i.some(h=>c(h.key,r))}const bo="All mapping items must start at the same column";function pn(s,i,r,a){let c="";if(s){let h=!1,g="";for(const x of s){const{source:A,type:I}=x;switch(I){case"space":h=!0;break;case"comment":{r&&!h&&a(x,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const L=A.substring(1)||" ";c?c+=g+L:c=L,g="";break}case"newline":c&&(g+=A),h=!0;break;default:a(x,"UNEXPECTED_TOKEN",`Unexpected ${I} at node end`)}i+=A.length}}return{comment:c,offset:i}}const C="Block collections are not allowed within flow collections",u=s=>s&&("block-map"===s.type||"block-seq"===s.type);function m(s,i,r,a,c){let h;switch(r.type){case"block-map":h=function Bo({composeNode:s,composeEmptyNode:i},r,a,c){var h;const g=new Ye(r.schema);let x=a.offset;for(const{start:A,key:I,sep:L,value:Q}of a.items){const F=zn(A,{indicator:"explicit-key-ind",next:I||(null==L?void 0:L[0]),offset:x,onError:c,startOnNewline:!0}),j=!F.found;if(j){if(I&&("block-seq"===I.type?c(x,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in I&&I.indent!==a.indent&&c(x,"BAD_INDENT",bo)),!F.anchor&&!F.tag&&!L){F.comment&&(g.comment?g.comment+="\n"+F.comment:g.comment=F.comment);continue}}else(null===(h=F.found)||void 0===h?void 0:h.indent)!==a.indent&&c(x,"BAD_INDENT",bo);j&&yi(I)&&c(I,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");const pe=F.end,G=I?s(r,I,F,c):i(r,pe,A,null,F,c);Co(r,g.items,G)&&c(pe,"DUPLICATE_KEY","Map keys must be unique");const z=zn(L||[],{indicator:"map-value-ind",next:Q,offset:G.range[2],onError:c,startOnNewline:!I||"block-scalar"===I.type});if(x=z.end,z.found){j&&("block-map"===(null==Q?void 0:Q.type)&&!z.hasNewline&&c(x,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&F.start<z.found.offset-1024&&c(G.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const V=Q?s(r,Q,z,c):i(r,x,L,null,z,c);x=V.range[2],g.items.push(new nt(G,V))}else j&&c(G.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),z.comment&&(G.comment?G.comment+="\n"+z.comment:G.comment=z.comment),g.items.push(new nt(G))}return g.range=[a.offset,x,x],g}(s,i,r,c);break;case"block-seq":h=function wo({composeNode:s,composeEmptyNode:i},r,a,c){const h=new hn(r.schema);let g=a.offset;for(const{start:x,value:A}of a.items){const I=zn(x,{indicator:"seq-item-ind",next:A,offset:g,onError:c,startOnNewline:!0});if(g=I.end,!I.found){if(!(I.anchor||I.tag||A)){I.comment&&(h.comment=I.comment);continue}A&&"block-seq"===A.type?c(g,"BAD_INDENT","All sequence items must start at the same column"):c(g,"MISSING_CHAR","Sequence item without - indicator")}const L=A?s(r,A,I,c):i(r,g,x,null,I,c);g=L.range[2],h.items.push(L)}return h.range=[a.offset,g,g],h}(s,i,r,c);break;case"flow-collection":h=function l({composeNode:s,composeEmptyNode:i},r,a,c){const h="{"===a.start.source,g=h?"flow map":"flow sequence",x=h?new Ye(r.schema):new hn(r.schema);x.flow=!0;let A=a.offset;for(let j=0;j<a.items.length;++j){const{start:pe,key:G,sep:z,value:V}=a.items[j],fe=zn(pe,{flow:g,indicator:"explicit-key-ind",next:G||(null==z?void 0:z[0]),offset:A,onError:c,startOnNewline:!1});if(!fe.found){if(!(fe.anchor||fe.tag||z||V)){0===j&&fe.comma?c(fe.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${g}`):j<a.items.length-1&&c(fe.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${g}`),fe.comment&&(x.comment?x.comment+="\n"+fe.comment:x.comment=fe.comment);continue}!h&&r.options.strict&&yi(G)&&c(G,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===j)fe.comma&&c(fe.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${g}`);else if(fe.comma||c(fe.start,"MISSING_CHAR",`Missing , between ${g} items`),fe.comment){let de="";e:for(const se of pe)switch(se.type){case"comma":case"space":break;case"comment":de=se.source.substring(1);break e;default:break e}if(de){let se=x.items[x.items.length-1];k(se)&&(se=se.value||se.key),se.comment?se.comment+="\n"+de:se.comment=de,fe.comment=fe.comment.substring(de.length+1)}}if(h||z||fe.found){const de=fe.end,se=G?s(r,G,fe,c):i(r,de,pe,null,fe,c);u(G)&&c(se.range,"BLOCK_IN_FLOW",C);const oe=zn(z||[],{flow:g,indicator:"map-value-ind",next:V,offset:se.range[2],onError:c,startOnNewline:!1});if(oe.found){if(!h&&!fe.found&&r.options.strict){if(z)for(const Nt of z){if(Nt===oe.found)break;if("newline"===Nt.type){c(Nt,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}fe.start<oe.found.offset-1024&&c(oe.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else V&&("source"in V&&V.source&&":"===V.source[0]?c(V,"MISSING_CHAR",`Missing space after : in ${g}`):c(oe.start,"MISSING_CHAR",`Missing , or : between ${g} items`));const Fe=V?s(r,V,oe,c):oe.found?i(r,oe.end,z,null,oe,c):null;Fe?u(V)&&c(Fe.range,"BLOCK_IN_FLOW",C):oe.comment&&(se.comment?se.comment+="\n"+oe.comment:se.comment=oe.comment);const ui=new nt(se,Fe);if(h){const Nt=x;Co(r,Nt.items,se)&&c(de,"DUPLICATE_KEY","Map keys must be unique"),Nt.items.push(ui)}else{const Nt=new Ye(r.schema);Nt.flow=!0,Nt.items.push(ui),x.items.push(Nt)}A=Fe?Fe.range[2]:oe.end}else{const de=V?s(r,V,fe,c):i(r,fe.end,z,null,fe,c);x.items.push(de),A=de.range[2],u(V)&&c(de.range,"BLOCK_IN_FLOW",C)}}const I=h?"}":"]",[L,...Q]=a.end;let F=A;if(L&&L.source===I?F=L.offset+L.source.length:(c(A+1,"MISSING_CHAR",`Expected ${g} to end with ${I}`),L&&1!==L.source.length&&Q.unshift(L)),Q.length>0){const j=pn(Q,F,r.options.strict,c);j.comment&&(x.comment?x.comment+="\n"+j.comment:x.comment=j.comment),x.range=[a.offset,F,j.offset]}else x.range=[a.offset,F,F];return x}(s,i,r,c)}if(!a)return h;const g=i.directives.tagName(a.source,F=>c(a,"TAG_RESOLVE_FAILED",F));if(!g)return h;const x=h.constructor;if("!"===g||g===x.tagName)return h.tag=x.tagName,h;const A=we(h)?"map":"seq";let I=i.schema.tags.find(F=>F.collection===A&&F.tag===g);if(!I){const F=i.schema.knownTags[g];if(!F||F.collection!==A)return c(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${g}`,!0),h.tag=g,h;i.schema.tags.push(Object.assign({},F,{default:!1})),I=F}const L=I.resolve(h,F=>c(a,"TAG_RESOLVE_FAILED",F),i.options),Q=he(L)?L:new le(L);return Q.range=h.range,Q.tag=g,(null==I?void 0:I.format)&&(Q.format=I.format),Q}function b(s,i,r){const a=s.offset,c=function H({offset:s,props:i},r,a){if("block-scalar-header"!==i[0].type)return a(i[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:c}=i[0],h=c[0];let g=0,x="",A=-1;for(let F=1;F<c.length;++F){const j=c[F];if(x||"-"!==j&&"+"!==j){const pe=Number(j);!g&&pe?g=pe:-1===A&&(A=s+F)}else x=j}-1!==A&&a(A,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${c}`);let I=!1,L="",Q=c.length;for(let F=1;F<i.length;++F){const j=i[F];switch(j.type){case"space":I=!0;case"newline":Q+=j.source.length;break;case"comment":r&&!I&&a(j,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),Q+=j.source.length,L=j.source.substring(1);break;case"error":a(j,"UNEXPECTED_TOKEN",j.message),Q+=j.source.length;break;default:{a(j,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${j.type}`);const G=j.source;G&&"string"==typeof G&&(Q+=G.length)}}}return{mode:h,indent:g,chomp:x,comment:L,length:Q}}(s,i,r);if(!c)return{value:"",type:null,comment:"",range:[a,a,a]};const h=">"===c.mode?le.BLOCK_FOLDED:le.BLOCK_LITERAL,g=s.source?function ue(s){const i=s.split(/\n( *)/),r=i[0],a=r.match(/^( *)/),h=[a&&a[1]?[a[1],r.slice(a[1].length)]:["",r]];for(let g=1;g<i.length;g+=2)h.push([i[g],i[g+1]]);return h}(s.source):[];let x=g.length;for(let G=g.length-1;G>=0;--G){const z=g[G][1];if(""!==z&&"\r"!==z)break;x=G}if(!s.source||0===x){const G="+"===c.chomp?g.map(V=>V[0]).join("\n"):"";let z=a+c.length;return s.source&&(z+=s.source.length),{value:G,type:h,comment:c.comment,range:[a,z,z]}}let A=s.indent+c.indent,I=s.offset+c.length,L=0;for(let G=0;G<x;++G){const[z,V]=g[G];if(""!==V&&"\r"!==V){if(z.length<A){const fe="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(I+z.length,"MISSING_CHAR",fe)}0===c.indent&&(A=z.length),L=G;break}0===c.indent&&z.length>A&&(A=z.length),I+=z.length+V.length+1}let Q="",F="",j=!1;for(let G=0;G<L;++G)Q+=g[G][0].slice(A)+"\n";for(let G=L;G<x;++G){let[z,V]=g[G];I+=z.length+V.length+1;const fe="\r"===V[V.length-1];if(fe&&(V=V.slice(0,-1)),V&&z.length<A){const se="Block scalar lines must not be less indented than their "+(c.indent?"explicit indentation indicator":"first line");r(I-V.length-(fe?2:1),"BAD_INDENT",se),z=""}h===le.BLOCK_LITERAL?(Q+=F+z.slice(A)+V,F="\n"):z.length>A||"\t"===V[0]?(" "===F?F="\n":!j&&"\n"===F&&(F="\n\n"),Q+=F+z.slice(A)+V,F="\n",j=!0):""===V?"\n"===F?Q+="\n":F="\n":(Q+=F+V,F=" ",j=!1)}switch(c.chomp){case"-":break;case"+":for(let G=x;G<g.length;++G)Q+="\n"+g[G][0].slice(A);"\n"!==Q[Q.length-1]&&(Q+="\n");break;default:Q+="\n"}const pe=a+c.length+s.source.length;return{value:Q,type:h,comment:c.comment,range:[a,pe,pe]}}function Ue(s,i,r){const{offset:a,type:c,source:h,end:g}=s;let x,A;const I=(F,j,pe)=>r(a+F,j,pe);switch(c){case"scalar":x=le.PLAIN,A=function Et(s,i){let r="";switch(s[0]){case"\t":r="Plain value cannot start with a tab character";break;case"|":case">":r=`Plain value cannot start with block scalar indicator ${s[0]}`;break;case"@":case"`":r=`Plain value cannot start with reserved character ${s[0]}`}return r&&i(0,"BAD_SCALAR_START",r),_e(s)}(h,I);break;case"single-quoted-scalar":x=le.QUOTE_SINGLE,A=function be(s,i){return("'"!==s[s.length-1]||1===s.length)&&i(s.length,"MISSING_CHAR","Missing closing 'quote"),_e(s.slice(1,-1)).replace(/''/g,"'")}(h,I);break;case"double-quoted-scalar":x=le.QUOTE_DOUBLE,A=function Ci(s,i){let r="";for(let a=1;a<s.length-1;++a){const c=s[a];if("\r"!==c||"\n"!==s[a+1])if("\n"===c){const{fold:h,offset:g}=Xi(s,a);r+=h,a=g}else if("\\"===c){let h=s[++a];const g=eo[h];if(g)r+=g;else if("\n"===h)for(h=s[a+1];" "===h||"\t"===h;)h=s[1+ ++a];else if("x"===h||"u"===h||"U"===h){const x={x:2,u:4,U:8}[h];r+=to(s,a+1,x,i),a+=x}else{const x=s.substr(a-1,2);i(a-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${x}`),r+=x}}else if(" "===c||"\t"===c){const h=a;let g=s[a+1];for(;" "===g||"\t"===g;)g=s[1+ ++a];"\n"!==g&&(r+=a>h?s.slice(h,a+1):c)}else r+=c}return('"'!==s[s.length-1]||1===s.length)&&i(s.length,"MISSING_CHAR",'Missing closing "quote'),r}(h,I);break;default:return r(s,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${c}`),{value:"",type:null,comment:"",range:[a,a+h.length,a+h.length]}}const L=a+h.length,Q=pn(g,L,i,r);return{value:A,type:x,comment:Q.comment,range:[a,L,Q.offset]}}function _e(s){let i,r;try{i=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),r=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(A){i=/(.*?)[ \t]*\r?\n/ys,r=/[ \t]*(.*?)[ \t]*\r?\n/ys}let a=i.exec(s);if(!a)return s;let c=a[1],h=" ",g=i.lastIndex;for(r.lastIndex=g;a=r.exec(s);)""===a[1]?"\n"===h?c+=h:h="\n":(c+=h+a[1],h=" "),g=r.lastIndex;const x=/[ \t]*(.*)/ys;return x.lastIndex=g,a=x.exec(s),c+h+(a&&a[1]||"")}function Xi(s,i){let r="",a=s[i+1];for(;!(" "!==a&&"\t"!==a&&"\n"!==a&&"\r"!==a||"\r"===a&&"\n"!==s[i+2]);)"\n"===a&&(r+="\n"),a=s[(i+=1)+1];return r||(r=" "),{fold:r,offset:i}}const eo={0:"\0",a:"\x07",b:"\b",e:"\x1b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"\x85",_:"\xa0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function to(s,i,r,a){const c=s.substr(i,r),g=c.length===r&&/^[0-9a-fA-F]+$/.test(c)?parseInt(c,16):NaN;if(isNaN(g)){const x=s.substr(i-2,r+2);return a(i-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${x}`),x}return String.fromCodePoint(g)}function no(s,i,r,a){const{value:c,type:h,comment:g,range:x}="block-scalar"===i.type?b(i,s.options.strict,a):Ue(i,s.options.strict,a),A=r?s.directives.tagName(r.source,Q=>a(r,"TAG_RESOLVE_FAILED",Q)):null,I=r&&A?function es(s,i,r,a,c){var h;if("!"===r)return s[Oe];const g=[];for(const A of s.tags)if(!A.collection&&A.tag===r){if(!A.default||!A.test)return A;g.push(A)}for(const A of g)if(null===(h=A.test)||void 0===h?void 0:h.test(i))return A;const x=s.knownTags[r];return x&&!x.collection?(s.tags.push(Object.assign({},x,{default:!1,test:void 0})),x):(c(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,"tag:yaml.org,2002:str"!==r),s[Oe])}(s.schema,c,A,r,a):function ur(s,i,r){var a;if(r)for(const c of s.tags)if(c.default&&(null===(a=c.test)||void 0===a?void 0:a.test(i)))return c;return s[Oe]}(s.schema,c,"scalar"===i.type);let L;try{const Q=I.resolve(c,F=>a(r||i,"TAG_RESOLVE_FAILED",F),s.options);L=J(Q)?Q:new le(Q)}catch(Q){a(r||i,"TAG_RESOLVE_FAILED",Q.message),L=new le(c)}return L.range=x,L.source=c,h&&(L.type=h),A&&(L.tag=A),I.format&&(L.format=I.format),g&&(L.comment=g),L}function ts(s,i,r){if(i){null===r&&(r=i.length);for(let a=r-1;a>=0;--a){let c=i[a];switch(c.type){case"space":case"comment":case"newline":s-=c.source.length;continue}for(c=i[++a];"space"===(null==c?void 0:c.type);)s+=c.source.length,c=i[++a];break}}return s}const mt={composeNode:Jo,composeEmptyNode:Ui};function Jo(s,i,r,a){const{spaceBefore:c,comment:h,anchor:g,tag:x}=r;let A;switch(i.type){case"alias":A=function dr({options:s},{offset:i,source:r,end:a},c){const h=new Cn(r.substring(1)),g=i+r.length,x=pn(a,g,s.strict,c);return h.range=[i,g,x.offset],x.comment&&(h.comment=x.comment),h}(s,i,a),(g||x)&&a(i,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":A=no(s,i,x,a),g&&(A.anchor=g.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":A=m(mt,s,i,x,a),g&&(A.anchor=g.source.substring(1));break;default:throw console.log(i),new Error(`Unsupporten token type: ${i.type}`)}return c&&(A.spaceBefore=!0),h&&("scalar"===i.type&&""===i.source?A.comment=h:A.commentBefore=h),A}function Ui(s,i,r,a,{spaceBefore:c,comment:h,anchor:g,tag:x},A){const L=no(s,{type:"scalar",offset:ts(i,r,a),indent:-1,source:""},x,A);return g&&(L.anchor=g.source.substring(1)),c&&(L.spaceBefore=!0),h&&(L.comment=h),L}function At(s){if("number"==typeof s)return[s,s+1];if(Array.isArray(s))return 2===s.length?s:[s[0],s[1]];const{offset:i,source:r}=s;return[i,i+("string"==typeof r?r.length:1)]}function Qo(s){let i="",r=!1,a=!1;for(let c=0;c<s.length;++c){const h=s[c];switch(h[0]){case"#":i+=(""===i?"":a?"\n\n":"\n")+(h.substring(1)||" "),r=!0,a=!1;break;case"%":"#"!==s[c+1][0]&&(c+=1),r=!1;break;default:r||(a=!0),r=!1}}return{comment:i,afterEmptyLine:a}}class hr{constructor(i={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,a,c,h)=>{const g=At(r);h?this.warnings.push(new yo(g,a,c)):this.errors.push(new vi(g,a,c))},this.directives=new tt({version:i.version||Hn.version}),this.options=i}decorate(i,r){const{comment:a,afterEmptyLine:c}=Qo(this.prelude);if(a){const h=i.contents;if(r)i.comment=i.comment?`${i.comment}\n${a}`:a;else if(c||i.directives.marker||!h)i.commentBefore=a;else if(ie(h)&&!h.flow&&h.items.length>0){let g=h.items[0];k(g)&&(g=g.key);const x=g.commentBefore;g.commentBefore=x?`${a}\n${x}`:a}else{const g=h.commentBefore;h.commentBefore=g?`${a}\n${g}`:a}}r?(Array.prototype.push.apply(i.errors,this.errors),Array.prototype.push.apply(i.warnings,this.warnings)):(i.errors=this.errors,i.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Qo(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(i,r=!1,a=-1){for(const c of i)yield*this.next(c);yield*this.end(r,a)}*next(i){switch(i.type){case"directive":this.directives.add(i.source,(r,a,c)=>{const h=At(i);h[0]+=r,this.onError(h,"BAD_DIRECTIVE",a,c)}),this.prelude.push(i.source),this.atDirectives=!0;break;case"document":{const r=function Ho(s,i,{offset:r,start:a,value:c,end:h},g){const x=Object.assign({directives:i},s),A=new Pn(void 0,x),I={directives:A.directives,options:A.options,schema:A.schema},L=zn(a,{indicator:"doc-start",next:c||(null==h?void 0:h[0]),offset:r,onError:g,startOnNewline:!0});L.found&&(A.directives.marker=!0,c&&("block-map"===c.type||"block-seq"===c.type)&&!L.hasNewline&&g(L.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),A.contents=c?Jo(I,c,L,g):Ui(I,L.end,a,null,L,g);const Q=A.contents.range[2],F=pn(h,Q,!1,g);return F.comment&&(A.comment=F.comment),A.range=[r,Q,F.offset],A}(this.options,this.directives,i,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(i,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(i.source);break;case"error":{const r=i.source?`${i.message}: ${JSON.stringify(i.source)}`:i.message,a=new vi(At(i),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(a):this.doc.errors.push(a);break}case"doc-end":{if(!this.doc){const a="Unexpected doc-end without preceding document";this.errors.push(new vi(At(i),"UNEXPECTED_TOKEN",a));break}const r=pn(i.end,i.offset+i.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){const a=this.doc.comment;this.doc.comment=a?`${a}\n${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new vi(At(i),"UNEXPECTED_TOKEN",`Unsupported token ${i.type}`))}}*end(i=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(i){const a=Object.assign({directives:this.directives},this.options),c=new Pn(void 0,a);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),c.range=[0,r,r],this.decorate(c,!1),yield c}}}const Jt=Symbol("break visit"),rs=Symbol("skip children"),Go=Symbol("remove item");function zt(s,i){"type"in s&&"document"===s.type&&(s={start:s.start,value:s.value}),io(Object.freeze([]),s,i)}function io(s,i,r){let a=r(i,s);if("symbol"==typeof a)return a;for(const c of["key","value"]){const h=i[c];if(h&&"items"in h){for(let g=0;g<h.items.length;++g){const x=io(Object.freeze(s.concat([[c,g]])),h.items[g],r);if("number"==typeof x)g=x-1;else{if(x===Jt)return Jt;x===Go&&(h.items.splice(g,1),g-=1)}}"function"==typeof a&&"key"===c&&(a=a(i,s))}}return"function"==typeof a?a(i,s):a}zt.BREAK=Jt,zt.SKIP=rs,zt.REMOVE=Go,zt.itemAtPath=(s,i)=>{let r=s;for(const[a,c]of i){const h=r&&r[a];if(!h||!("items"in h))return;r=h.items[c]}return r},zt.parentCollection=(s,i)=>{const r=zt.itemAtPath(s,i.slice(0,-1)),a=i[i.length-1][0],c=r&&r[a];if(c&&"items"in c)return c;throw new Error("Parent collection not found")};function rn(s){switch(s){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Wo=[",","[","]","{","}"],xo=[" ",",","[","]","{","}","\n","\r","\t"],fi=s=>!s||xo.includes(s);class as{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0}*lex(i,r=!1){i&&(this.buffer=this.buffer?this.buffer+i:i),this.atEnd=!r;let a=this.next||"stream";for(;a&&(r||this.hasChars(1));)a=yield*this.parseNext(a)}atLineEnd(){let i=this.pos,r=this.buffer[i];for(;" "===r||"\t"===r;)r=this.buffer[++i];return!r||"#"===r||"\n"===r||"\r"===r&&"\n"===this.buffer[i+1]}charAt(i){return this.buffer[this.pos+i]}continueScalar(i){let r=this.buffer[i];if(this.indentNext>0){let a=0;for(;" "===r;)r=this.buffer[++a+i];if("\r"===r){const c=this.buffer[a+i+1];if("\n"===c||!c&&!this.atEnd)return i+a+1}return"\n"===r||a>=this.indentNext||!r&&!this.atEnd?i+a:-1}if("-"===r||"."===r){const a=this.buffer.substr(i,3);if(("---"===a||"..."===a)&&rn(this.buffer[i+3]))return-1}return i}getLine(){let i=this.buffer.indexOf("\n",this.pos);return-1===i?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[i-1]&&(i-=1),this.buffer.substring(this.pos,i))}hasChars(i){return this.pos+i<=this.buffer.length}setNext(i){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=i,null}peek(i){return this.buffer.substr(this.pos,i)}*parseNext(i){switch(i){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let i=this.getLine();if(null===i)return this.setNext("stream");if("\ufeff"===i[0]&&(yield*this.pushCount(1),i=i.substring(1)),"%"===i[0]){let r=i.length;const a=i.indexOf("#");if(-1!==a){const h=i[a-1];(" "===h||"\t"===h)&&(r=a-1)}for(;;){const h=i[r-1];if(" "!==h&&"\t"!==h)break;r-=1}const c=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(i.length-c),this.pushNewline(),"stream"}if(this.atLineEnd()){const r=yield*this.pushSpaces(!0);return yield*this.pushCount(i.length-r),yield*this.pushNewline(),"stream"}return yield"\x02",yield*this.parseLineStart()}*parseLineStart(){const i=this.charAt(0);if(!i&&!this.atEnd)return this.setNext("line-start");if("-"===i||"."===i){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const r=this.peek(3);if("---"===r&&rn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===r&&rn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!rn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[i,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if(("-"===i||"?"===i||":"===i)&&rn(r)){const a=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=a,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const i=this.getLine();if(null===i)return this.setNext("doc");let r=yield*this.pushIndicators();switch(i[r]){case"#":yield*this.pushCount(i.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(fi),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=(yield*this.parseBlockScalarHeader()),r+=(yield*this.pushSpaces(!0)),yield*this.pushCount(i.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let i,r,a=-1;do{i=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),i>0&&(this.indentValue=a=r)}while(i+r>0);const c=this.getLine();if(null===c)return this.setNext("flow");if((-1!==a&&a<this.indentNext||0===a&&(c.startsWith("---")||c.startsWith("..."))&&rn(c[3]))&&(a!==this.indentNext-1||1!==this.flowLevel||"]"!==c[0]&&"}"!==c[0]))return this.flowLevel=0,yield"\x18",yield*this.parseLineStart();let h=0;for(;","===c[h];)h+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));switch(h+=(yield*this.pushIndicators()),c[h]){case void 0:return"flow";case"#":return yield*this.pushCount(c.length-h),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(fi),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const g=this.charAt(1);if(this.flowKey||rn(g)||","===g)return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const i=this.charAt(0);let r=this.buffer.indexOf(i,this.pos+1);if("'"===i)for(;-1!==r&&"'"===this.buffer[r+1];)r=this.buffer.indexOf("'",r+2);else for(;-1!==r;){let c=0;for(;"\\"===this.buffer[r-1-c];)c+=1;if(c%2==0)break;r=this.buffer.indexOf('"',r+1)}let a=this.buffer.indexOf("\n",this.pos);if(-1!==a&&a<r){for(;-1!==a&&a<r;){const c=this.continueScalar(a+1);if(-1===c)break;a=this.buffer.indexOf("\n",c)}-1!==a&&a<r&&(r=a-1)}if(-1===r){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let i=this.pos;for(;;){const r=this.buffer[++i];if("+"===r)this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if("-"!==r)break}return yield*this.pushUntil(r=>rn(r)||"#"===r)}*parseBlockScalar(){let a,i=this.pos-1,r=0;e:for(let c=this.pos;a=this.buffer[c];++c)switch(a){case" ":r+=1;break;case"\n":i=c,r=0;break;case"\r":{const h=this.buffer[c+1];if(!h&&!this.atEnd)return this.setNext("block-scalar");if("\n"===h)break}default:break e}if(!a&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{const c=this.continueScalar(i+1);if(-1===c)break;i=this.buffer.indexOf("\n",c)}while(-1!==i);if(-1===i){if(!this.atEnd)return this.setNext("block-scalar");i=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let c=i-1,h=this.buffer[c];for("\r"===h&&(h=this.buffer[--c]);" "===h||"\t"===h;)h=this.buffer[--c];if(!("\n"===h&&c>=this.pos))break;i=c}return yield"\x1f",yield*this.pushToIndex(i+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const i=this.flowLevel>0;let c,r=this.pos-1,a=this.pos-1;for(;c=this.buffer[++a];)if(":"===c){const h=this.buffer[a+1];if(rn(h)||i&&","===h)break;r=a}else if(rn(c)){const h=this.buffer[a+1];if("#"===h||i&&Wo.includes(h))break;if("\r"===c&&("\n"===h?(a+=1,c="\n"):r=a),"\n"===c){const g=this.continueScalar(a+1);if(-1===g)break;a=Math.max(a,g-2)}}else{if(i&&Wo.includes(c))break;r=a}return c||this.atEnd?(yield"\x1f",yield*this.pushToIndex(r+1,!0),i?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(i){return i>0?(yield this.buffer.substr(this.pos,i),this.pos+=i,i):0}*pushToIndex(i,r){const a=this.buffer.slice(this.pos,i);return a?(yield a,this.pos+=a.length,a.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return(yield*this.pushVerbatimTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(fi))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(rn(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushVerbatimTag(){let i=this.pos+2,r=this.buffer[i];for(;!rn(r)&&">"!==r;)r=this.buffer[++i];return yield*this.pushToIndex(">"===r?i+1:i,!1)}*pushNewline(){const i=this.buffer[this.pos];return"\n"===i?yield*this.pushCount(1):"\r"===i&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(i){let a,r=this.pos-1;do{a=this.buffer[++r]}while(" "===a||i&&"\t"===a);const c=r-this.pos;return c>0&&(yield this.buffer.substr(this.pos,c),this.pos=r),c}*pushUntil(i){let r=this.pos,a=this.buffer[r];for(;!i(a);)a=this.buffer[++r];return yield*this.pushToIndex(r,!1)}}function gn(s,i){for(let r=0;r<s.length;++r)if(s[r].type===i)return!0;return!1}function To(s){for(let i=0;i<s.length;++i)switch(s[i].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function Eo(s){switch(null==s?void 0:s.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Fi(s){switch(s.type){case"document":return s.start;case"block-map":{const i=s.items[s.items.length-1];return i.sep||i.start}case"block-seq":return s.items[s.items.length-1].start;default:return[]}}function Bi(s){var i;if(0===s.length)return[];let r=s.length;e:for(;--r>=0;)switch(s[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(i=s[++r])||void 0===i?void 0:i.type););return s.splice(r,s.length)}function _r(s){if("flow-seq-start"===s.start.type)for(const i of s.items)i.sep&&!i.value&&!gn(i.start,"explicit-key-ind")&&!gn(i.sep,"map-value-ind")&&(i.key&&(i.value=i.key),delete i.key,Eo(i.value)?i.value.end?Array.prototype.push.apply(i.value.end,i.sep):i.value.end=i.sep:Array.prototype.push.apply(i.start,i.sep),delete i.sep)}class Ko{constructor(i){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new as,this.onNewLine=i}*parse(i,r=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const a of this.lexer.lex(i,r))yield*this.next(a);r||(yield*this.end())}*next(i){if(this.source=i,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=i.length);const r=function ss(s){switch(s){case"\ufeff":return"byte-order-mark";case"\x02":return"doc-mode";case"\x18":return"flow-error-end";case"\x1f":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(s[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(i);if(r)if("scalar"===r)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+i.length);break;case"space":this.atNewLine&&" "===i[0]&&(this.indent+=i.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=i.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=i.length}else{const a=`Not a YAML token: ${i}`;yield*this.pop({type:"error",offset:this.offset,message:a,source:i}),this.offset+=i.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const i=this.peek(1);if("doc-end"!==this.type||i&&"doc-end"===i.type){if(!i)return yield*this.stream();switch(i.type){case"document":return yield*this.document(i);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(i);case"block-scalar":return yield*this.blockScalar(i);case"block-map":return yield*this.blockMap(i);case"block-seq":return yield*this.blockSequence(i);case"flow-collection":return yield*this.flowCollection(i);case"doc-end":return yield*this.documentEnd(i)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(i){return this.stack[this.stack.length-i]}*pop(i){const r=i||this.stack.pop();if(r)if(0===this.stack.length)yield r;else{const a=this.peek(1);switch(("block-scalar"===r.type||"flow-collection"===r.type)&&(r.indent="indent"in a?a.indent:-1),"flow-collection"===r.type&&_r(r),a.type){case"document":a.value=r;break;case"block-scalar":a.props.push(r);break;case"block-map":{const c=a.items[a.items.length-1];if(c.value)return a.items.push({start:[],key:r,sep:[]}),void(this.onKeyLine=!0);if(!c.sep)return Object.assign(c,{key:r,sep:[]}),void(this.onKeyLine=!gn(c.start,"explicit-key-ind"));c.value=r;break}case"block-seq":{const c=a.items[a.items.length-1];c.value?a.items.push({start:[],value:r}):c.value=r;break}case"flow-collection":{const c=a.items[a.items.length-1];return void(!c||c.value?a.items.push({start:[],key:r,sep:[]}):c.sep?c.value=r:Object.assign(c,{key:r,sep:[]}))}default:yield*this.pop(),yield*this.pop(r)}if(!("document"!==a.type&&"block-map"!==a.type&&"block-seq"!==a.type||"block-map"!==r.type&&"block-seq"!==r.type)){const c=r.items[r.items.length-1];c&&!c.sep&&!c.value&&c.start.length>0&&!To(c.start)&&(0===r.indent||c.start.every(h=>"comment"!==h.type||h.indent<r.indent))&&("document"===a.type?a.end=c.start:a.items.push({start:c.start}),r.items.splice(-1,1))}}else{const a="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:a}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const i={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&i.start.push(this.sourceToken),void this.stack.push(i)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(i){if(i.value)return yield*this.lineEnd(i);switch(this.type){case"doc-start":return void(To(i.start)?(yield*this.pop(),yield*this.step()):i.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void i.start.push(this.sourceToken)}const r=this.startBlockValue(i);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(i){if("map-value-ind"===this.type){const a=Bi(Fi(this.peek(2)));let c;i.end?(c=i.end,c.push(this.sourceToken),delete i.end):c=[this.sourceToken];const h={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:a,key:i,sep:c}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=h}else yield*this.lineEnd(i)}*blockScalar(i){switch(this.type){case"space":case"comment":case"newline":return void i.props.push(this.sourceToken);case"scalar":if(i.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf("\n")+1;for(;0!==r;)this.onNewLine(this.offset+r),r=this.source.indexOf("\n",r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(i){var r;const a=i.items[i.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,a.value){const c="end"in a.value?a.value.end:void 0,h=Array.isArray(c)?c[c.length-1]:void 0;"comment"===(null==h?void 0:h.type)?null==c||c.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else a.sep?a.sep.push(this.sourceToken):a.start.push(this.sourceToken);return;case"space":case"comment":if(a.value)i.items.push({start:[this.sourceToken]});else if(a.sep)a.sep.push(this.sourceToken);else{if(this.atIndentedComment(a.start,i.indent)){const c=i.items[i.items.length-2],h=null===(r=null==c?void 0:c.value)||void 0===r?void 0:r.end;if(Array.isArray(h))return Array.prototype.push.apply(h,a.start),h.push(this.sourceToken),void i.items.pop()}a.start.push(this.sourceToken)}return}if(this.indent>=i.indent){const c=!this.onKeyLine&&this.indent===i.indent&&(a.sep||To(a.start));switch(this.type){case"anchor":case"tag":return void(c||a.value?(i.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):a.sep?a.sep.push(this.sourceToken):a.start.push(this.sourceToken));case"explicit-key-ind":return a.sep||gn(a.start,"explicit-key-ind")?c||a.value?i.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):a.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(a.sep)if(a.value||c&&!gn(a.start,"explicit-key-ind"))i.items.push({start:[],key:null,sep:[this.sourceToken]});else if(gn(a.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(gn(a.start,"explicit-key-ind")&&Eo(a.key)&&!gn(a.sep,"newline")){const h=Bi(a.start),g=a.key,x=a.sep;x.push(this.sourceToken),delete a.key,delete a.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:h,key:g,sep:x}]})}else a.sep.push(this.sourceToken);else Object.assign(a,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const h=this.flowScalar(this.type);return void(c||a.value?(i.items.push({start:[],key:h,sep:[]}),this.onKeyLine=!0):a.sep?this.stack.push(h):(Object.assign(a,{key:h,sep:[]}),this.onKeyLine=!0))}default:{const h=this.startBlockValue(i);if(h)return c&&"block-seq"!==h.type&&gn(a.start,"explicit-key-ind")&&i.items.push({start:[]}),void this.stack.push(h)}}}yield*this.pop(),yield*this.step()}*blockSequence(i){var r;const a=i.items[i.items.length-1];switch(this.type){case"newline":if(a.value){const c="end"in a.value?a.value.end:void 0,h=Array.isArray(c)?c[c.length-1]:void 0;"comment"===(null==h?void 0:h.type)?null==c||c.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else a.start.push(this.sourceToken);return;case"space":case"comment":if(a.value)i.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(a.start,i.indent)){const c=i.items[i.items.length-2],h=null===(r=null==c?void 0:c.value)||void 0===r?void 0:r.end;if(Array.isArray(h))return Array.prototype.push.apply(h,a.start),h.push(this.sourceToken),void i.items.pop()}a.start.push(this.sourceToken)}return;case"anchor":case"tag":if(a.value||this.indent<=i.indent)break;return void a.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==i.indent)break;return void(a.value||gn(a.start,"seq-item-ind")?i.items.push({start:[this.sourceToken]}):a.start.push(this.sourceToken))}if(this.indent>i.indent){const c=this.startBlockValue(i);if(c)return void this.stack.push(c)}yield*this.pop(),yield*this.step()}*flowCollection(i){const r=i.items[i.items.length-1];if("flow-error-end"===this.type){let a;do{yield*this.pop(),a=this.peek(1)}while(a&&"flow-collection"===a.type)}else if(0===i.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!r||r.sep?i.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken));case"map-value-ind":return void(!r||r.value?i.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!r||r.value?i.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const c=this.flowScalar(this.type);return void(!r||r.value?i.items.push({start:[],key:c,sep:[]}):r.sep?this.stack.push(c):Object.assign(r,{key:c,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void i.end.push(this.sourceToken)}const a=this.startBlockValue(i);a?this.stack.push(a):(yield*this.pop(),yield*this.step())}else{const a=this.peek(2);if("block-map"!==a.type||"map-value-ind"!==this.type&&("newline"!==this.type||a.items[a.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==a.type){const h=Bi(Fi(a));_r(i);const g=i.end.splice(1,i.end.length);g.push(this.sourceToken);const x={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:h,key:i,sep:g}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=x}else yield*this.lineEnd(i);else yield*this.pop(),yield*this.step()}}flowScalar(i){if(this.onNewLine){let r=this.source.indexOf("\n")+1;for(;0!==r;)this.onNewLine(this.offset+r),r=this.source.indexOf("\n",r)+1}return{type:i,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(i){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const a=Bi(Fi(i));return a.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a}]}}case"map-value-ind":{this.onKeyLine=!0;const a=Bi(Fi(i));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(i,r){return!("comment"!==this.type||this.indent<=r)&&i.every(a=>"newline"===a.type||"space"===a.type)}*documentEnd(i){"doc-mode"!==this.type&&(i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(i){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}class Yo{constructor(){this.lineStarts=[],this.addNewLine=i=>this.lineStarts.push(i),this.linePos=i=>{let r=0,a=this.lineStarts.length;for(;r<a;){const h=r+a>>1;this.lineStarts[h]<i?r=h+1:a=h}if(this.lineStarts[r]===i)return{line:r+1,col:1};if(0===r)return{line:0,col:i};return{line:r,col:i-this.lineStarts[r-1]+1}}}}function mr(s){const i=!s||!1!==s.prettyErrors;return{lineCounter:s&&s.lineCounter||i&&new Yo||null,prettyErrors:i}}function jo(s,i,r){let a;"function"==typeof i?a=i:void 0===r&&i&&"object"==typeof i&&(r=i);const c=function Xt(s,i={}){const{lineCounter:r,prettyErrors:a}=mr(i),c=new Ko(null==r?void 0:r.addNewLine),h=new hr(i);let g=null;for(const x of h.compose(c.parse(s),!0,s.length))if(g){if("silent"!==g.options.logLevel){g.errors.push(new vi(x.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else g=x;return a&&r&&(g.errors.forEach(zi(s,r)),g.warnings.forEach(zi(s,r))),g}(s,r);if(!c)return null;if(c.warnings.forEach(h=>Pi(c.options.logLevel,h)),c.errors.length>0){if("silent"!==c.options.logLevel)throw c.errors[0];c.errors=[]}return c.toJS(Object.assign({reviver:a},r))}function ro(s,i,r){let a=null;if("function"==typeof i||Array.isArray(i)?a=i:void 0===r&&i&&(r=i),"string"==typeof r&&(r=r.length),"number"==typeof r){const c=Math.round(r);r=c<1?void 0:c>8?{indent:8}:{indent:c}}if(void 0===s){const{keepUndefined:c}=r||i||{};if(!c)return}return new Pn(s,a,r).toString(r)}}}]);
//# sourceMappingURL=496.8c7e5881a62562d0.js.map